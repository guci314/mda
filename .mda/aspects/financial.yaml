# 金融领域专用切面配置
domain: financial
description: 金融服务的严格合规和安全要求

aspects:
  # 所有金融操作
  all_methods:
    - security:
        authentication: multi_factor
        encryption: 
          algorithm: AES-256
          key_rotation: daily
        session_timeout: 900  # 15分钟
    
    - compliance:
        standards:
          - PCI-DSS
          - SOX
          - GDPR
        audit_trail: complete
        data_retention: 7_years
    
    - monitoring:
        level: detailed
        alerts:
          - suspicious_activity
          - large_transactions
          - failed_authentications
  
  # 支付相关方法
  payment_methods:
    - transaction:
        isolation: serializable  # 最高隔离级别
        timeout: 10
        distributed: true
        
    - fraud_detection:
        provider: internal
        risk_threshold: medium
        real_time: true
        
    - rate_limit:
        max_requests: 10
        window: 60
        by: "account_id"
        
    - idempotency:
        enabled: true
        key_header: "Idempotency-Key"
        ttl: 86400  # 24小时
  
  # 账户查询方法
  account_query_methods:
    - privacy:
        mask_sensitive_data: true
        fields_to_mask:
          - account_number
          - balance
          - ssn
        
    - cache:
        ttl: 60  # 1分钟，保证数据新鲜
        encrypted: true
  
  # 报表生成方法
  report_methods:
    - performance:
        timeout: 300  # 5分钟
        async_threshold: 30  # 超过30秒转异步
        
    - export_control:
        formats: [pdf, xlsx]
        watermark: true
        encryption: required

# 特殊业务规则
business_rules:
  transaction_limits:
    daily_limit: 1000000
    single_transaction_limit: 100000
    require_approval_above: 50000
    
  working_hours:
    timezone: "America/New_York"
    business_days: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"]
    business_hours: "09:00-17:00"
    
  regulatory_reporting:
    suspicious_activity_threshold: 10000
    currency_transaction_report: 10000
    
# 技术要求
requirements:
  availability: 99.99%
  rto: 15_minutes  # 恢复时间目标
  rpo: 1_minute    # 恢复点目标
  data_residency: ["US", "EU"]
  
# 集成要求
integrations:
  payment_gateways:
    - stripe
    - paypal
    - wire_transfer
    
  kyc_providers:
    - jumio
    - onfido
    
  credit_bureaus:
    - experian
    - equifax
    - transunion