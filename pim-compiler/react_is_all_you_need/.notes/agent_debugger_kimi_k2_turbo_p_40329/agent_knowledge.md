# Agent知识库

## 成功模式
### Python代码调试与修复
- **适用场景**：修复Python代码中的运行时错误和边界条件问题
- **解决方案**：
  1. 读取并分析原始代码
  2. 识别所有潜在的错误点
  3. 添加输入验证和边界条件检查
  4. 使用try-except处理可能的异常
  5. 添加详细的文档字符串
  6. 编写测试用例验证修复效果
- **效果**：代码能够处理各种边界情况，运行时不再抛出异常
- **注意事项**：修复时要保持原有功能的完整性，不要改变函数的原始意图

### 常见错误类型识别
- **适用场景**：分析Python代码中的错误
- **解决方案**：
  - ZeroDivisionError：检查除法操作中的除数是否可能为0
  - TypeError：检查变量类型是否正确，添加类型检查
  - KeyError：检查字典键是否存在，使用get()方法或in操作符
  - AttributeError：检查对象是否有该属性/方法
- **效果**：快速定位和修复常见错误
- **注意事项**：修复后要进行全面测试，确保没有引入新问题

## 错误模式
### 忽略边界条件
- **表现**：代码在处理空列表、None值、空字符串等边界情况时崩溃
- **原因**：开发者只考虑了正常情况，没有考虑异常输入
- **解决**：添加边界条件检查，如`if not numbers:`、`if item is None:`
- **预防**：编写代码时主动思考可能的边界情况，编写防御性代码

### 缺少输入验证
- **表现**：函数接收到不符合预期的输入类型导致错误
- **原因**：没有验证输入参数的类型和结构
- **解决**：使用isinstance()检查类型，验证数据结构完整性
- **预防**：在函数开始处添加输入验证逻辑

## 最佳实践
### 防御性编程
- **原则**：假设所有输入都可能是无效的
- **示例**：
  ```python
  def safe_function(data):
      if not data:
          return default_value
      if not isinstance(data, expected_type):
          return default_value
      # 继续处理
  ```
- **收益**：代码更加健壮，减少运行时错误

### 错误处理策略
- **原则**：优雅地处理错误，而不是让程序崩溃
- **示例**：
  ```python
  try:
      risky_operation()
  except SpecificError as e:
      log_error(e)
      return safe_default
  ```
- **收益**：提升用户体验，便于调试和维护

---
更新时间：2024-12-19