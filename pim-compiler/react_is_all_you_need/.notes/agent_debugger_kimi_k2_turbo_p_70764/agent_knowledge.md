# Agent知识库

## 成功模式
### Python错误修复模式
- **适用场景**：修复Python代码中的常见运行时错误
- **解决方案**：
  1. 读取并分析原始代码
  2. 识别具体的错误类型和位置
  3. 添加边界条件检查
  4. 添加类型检查和异常处理
  5. 编写测试验证修复结果
- **效果**：成功修复ZeroDivisionError和TypeError
- **注意事项**：
  - 空列表除零：检查列表长度是否为0
  - None值访问：检查对象是否为None并验证类型
  - 添加适当的默认值和错误处理

### 防御性编程模式
- **适用场景**：处理可能包含无效数据的函数
- **解决方案**：
  - 在函数开始处添加输入验证
  - 使用try-except处理可能的异常
  - 提供合理的默认值
  - 跳过无效数据而不是中断执行
- **效果**：提高代码健壮性，防止运行时错误

## 错误模式
### ZeroDivisionError
- **表现**：除法运算中除数为0
- **原因**：没有检查除数是否为0
- **解决**：在执行除法前检查除数
- **预防**：对所有除法运算添加边界检查

### TypeError
- **表现**：对None或错误类型执行操作
- **原因**：假设数据总是有效且类型正确
- **解决**：添加类型检查和空值检查
- **预防**：使用isinstance检查类型，处理None情况

## 最佳实践
### 输入验证
- **原则**：永远不要信任输入数据
- **示例**：
  ```python
  if not numbers:  # 检查空列表
      return 0.0
  
  if item is None or not isinstance(item, dict):  # 检查None和类型
      continue
  ```
- **收益**：防止运行时错误，提高代码稳定性

### 测试驱动修复
- **原则**：修复前先理解问题，修复后验证结果
- **示例**：创建专门的测试脚本验证修复
- **收益**：确保修复有效且不会引入新问题

---
更新时间：2024-12-19 10:35:00