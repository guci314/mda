# Agent知识库

## 成功模式
### Python常见错误修复模式
- **适用场景**：处理ZeroDivisionError和TypeError等常见Python异常
- **解决方案**：
  1. ZeroDivisionError：在除法操作前检查分母是否为0
  2. TypeError：添加类型检查和边界条件验证
  3. 使用防御性编程：检查输入参数的有效性
- **效果**：代码更健壮，能优雅处理边界情况
- **注意事项**：修复时要保持原有功能不变，只修复错误部分

### 防御性编程最佳实践
- **适用场景**：处理用户输入或外部数据
- **解决方案**：
  - 检查空值（None）
  - 验证数据类型（isinstance）
  - 检查字典键是否存在（in操作符）
  - 提供合理的默认值
- **效果**：减少运行时错误，提高代码可靠性
- **注意事项**：过度检查可能影响性能，需要平衡

## 错误模式
### 空列表导致的ZeroDivisionError
- **表现**：`ZeroDivisionError: division by zero`
- **原因**：对空列表进行除法操作
- **解决**：在除法前检查列表长度 `if not numbers: return 0.0`
- **预防**：对所有除法操作都考虑分母为0的情况

### None值导致的TypeError
- **表现**：`TypeError: 'NoneType' object is not subscriptable`
- **原因**：尝试访问None对象的属性或方法
- **解决**：添加None检查 `if item is not None`
- **预防**：处理外部数据时始终假设数据可能无效

## 最佳实践
### 错误处理原则
- **原则**：先分析错误原因，再实施修复
- **示例**：
  1. 读取错误堆栈定位问题
  2. 理解错误发生的上下文
  3. 设计最小侵入性的修复方案
  4. 验证修复效果
- **收益**：避免引入新问题，确保修复质量

### 测试验证方法
- **原则**：修复后必须验证所有边界情况
- **示例**：
  - 空输入测试
  - 无效数据测试
  - 正常数据测试
  - 边界值测试
- **收益**：确保修复完整且不影响正常功能

---
更新时间：2024-12-19 10:02:00