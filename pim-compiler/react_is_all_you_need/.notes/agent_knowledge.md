# Agent知识库

## 成功模式
### Python防御性编程模式
- **适用场景**：处理用户输入、边界条件、异常数据
- **解决方案**：
  1. 空值检查：`if not collection:` 处理空列表/字典
  2. 类型验证：`isinstance(item, dict)` 确保类型正确
  3. 键存在性检查：`'key' in dict` 避免KeyError
  4. None值处理：显式检查 `item is not None`
- **效果**：代码健壮性显著提升，减少运行时错误
- **注意事项**：过度检查可能影响性能，需权衡

### Bug修复最佳实践
- **适用场景**：修复现有代码中的错误
- **解决方案**：
  1. 先读取并理解现有代码
  2. 识别所有潜在错误点
  3. 制定最小侵入性修复方案
  4. 添加防御性编程
  5. 增加测试用例验证修复
  6. 更新文档字符串
- **效果**：系统性修复问题，避免引入新bug
- **注意事项**：保持向后兼容性，除非必要不改变原有接口

## 错误模式
### 常见Python运行时错误
- **表现**：ZeroDivisionError、TypeError、AttributeError
- **原因**：
  - 未处理空容器（列表、字典等）
  - 未验证输入类型
  - 未检查对象属性/键存在性
- **解决**：添加边界条件检查和类型验证
- **预防**：采用防御性编程，编写单元测试

## 最佳实践
### 代码修复流程
- **原则**：理解 → 分析 → 修复 → 验证
- **示例**：
  1. 完整读取问题代码
  2. 识别所有错误点
  3. 逐个修复并测试
  4. 添加边界测试
  5. 更新文档
- **收益**：系统性地解决问题，避免遗漏

---
更新时间：2024-12-19 10:33:00