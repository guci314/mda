```markdown
# 知识库

## 元知识
- 当工具调用失败时，可尝试以下备选方案：
  1. 检查工具配置是否正确
  2. 尝试直接执行等效命令
  3. 提供手动操作指南作为回退方案
- 文件操作失败时，可生成示例内容供用户手动保存
- 任务执行验证方法：通过检查输出文件的存在性和完整性确认操作成功
- 多步骤任务验证方法：通过检查状态文件中的"完成"标志位确认各阶段执行情况
- 新增：数据验证方法：通过检查数据长度和类型确保输入有效性

## 原理与设计
- 自然语言图灵机(NLTM)的基本工作流程：
  1. 读取程序定义文件
  2. 读取状态数据
  3. 执行计算/操作
  4. 更新状态
  5. 生成报告
- 错误处理原则：优先保证核心功能可用性，即使部分依赖失败
- 状态管理设计：状态文件包含"成功"标志位用于结果验证
- 程序执行阶段划分：数据验证→基础统计→高级分析→报告生成
- 新增：统计计算流程设计：总和/平均值→极值→排序相关计算

## 接口与API
- 文件操作工具常见问题：
  - 需要确保输入为有效路径字符串
  - 可能因配置问题导致调用失败
- 统计计算接口：
  - 输入：数字列表
  - 输出：总和、平均、最大、最小、中位数、范围
- 报告生成接口：
  - 支持.txt和.md格式输出
  - 基本结构包含计算结果摘要
- 状态文件接口：
  - 必含字段：数据数组、统计对象、完成标志
  - 支持分阶段状态更新
- 新增：程序定义文件接口：
  - 必须包含：目标描述、执行步骤划分
  - 建议包含：数据验证标准

## 实现细节（需验证）
- 统计计算实现：
  - 中位数计算采用排序后取中间值的算法
  - 范围计算为最大值减最小值
  - 可能位置：核心计算模块
- 文件结构参考：
  - program.nlpl (程序定义，包含执行步骤描述)
  - state.json (数据状态，包含分阶段完成标志)
  - report.txt/report.md (输出报告)
  - 注：实际路径可能变化
- 新增：中位数计算实现细节：
  - 偶数长度时取中间两数平均值
  - 奇数长度时直接取中间值

## 用户偏好与项目特点
- 输出格式偏好：
  - JSON状态文件包含完整数据和元数据
  - 文本报告采用简洁的结果摘要格式
- 常见错误模式：
  - 工具配置类型错误(ReactAgentConfig vs 路径字符串)
  - 状态文件缺少必要字段(如成功标志)
- 程序定义文件结构：
  - 包含明确的目标描述和步骤划分
  - 使用自然语言描述计算流程
- 新增：统计报告结构偏好：
  - 数据集展示→基础统计→高级分析
  - 包含明确的状态标识
```