# Agent Description 规范文档

## 概述

Agent的description是其对外接口的自然语言描述，是Router理解和选择Agent的唯一依据。本文档定义description的标准格式和编写规范。

## 核心原则

### 1. 黑盒原则
- **只说What，不说How**：描述能力，不描述实现
- **不暴露内部细节**：不提及使用的模型、工具版本、资源需求
- **接口即契约**：description是对外承诺，必须准确

### 2. 双协议原则
Agent有两种接口协议，description应当清晰说明：
- **自然语言协议**：与LLM/人类交互的能力
- **符号协议**：可调用的工具和知识函数

### 3. 简洁性原则
- **够用即可**：不追求完备，只列举核心能力
- **自然表达**：用自然语言，不用技术术语
- **LLM友好**：假设读者是LLM，能理解上下文

## Description 标准模板

### 基础模板（推荐）

```
{角色定位}。
{核心能力描述}。
工具：{符号接口列表}。
```

示例：
```
代码分析专家。
能深度分析代码逻辑、定位bug、提供优化建议。
工具：grep、read_file、edit、@analyze_function。
```

### 详细模板（复杂Agent）

```
{角色定位}。

能力：{自然语言能力列表}。
工具：{符号接口列表}。
知识函数：{可形式化的函数}。
条件反射：{自动触发的行为}。
```

示例：
```
企业订单处理专家。

能力：订单验证、库存检查、支付处理、物流安排。
工具：database_query、api_call、message_queue。
知识函数：@validate_order、@check_inventory、@calculate_shipping。
条件反射：订单异常时自动回滚、支付失败时自动重试。
```

### 极简模板（简单Agent）

```
{角色定位}。
```

示例：
```
Python代码格式化工具。
```

LLM能从角色定位推断出隐含的能力。

## 编写规范

### 1. 角色定位
- 使用"专家"、"助手"、"分析师"等角色词
- 明确领域：代码、订单、数据、文档等
- 一句话说清定位

**良好示例**：
- ✅ "代码安全分析专家"
- ✅ "订单处理助手"
- ✅ "数据迁移工具"

**不良示例**：
- ❌ "一个能做很多事的Agent"
- ❌ "使用Claude Sonnet的高级分析器"

### 2. 能力描述

#### 自然语言能力
描述Agent理解和响应的任务类型：

```
能力：代码分析、bug定位、性能诊断、重构建议。
```

#### 符号接口（工具）
列举Agent可以调用的外部工具：

```
工具：grep（搜索）、read_file（读取）、edit（修改）。
```

#### 知识函数
以@开头的可形式化函数：

```
知识函数：@analyze_function（分析函数）、@trace_dataflow（追踪数据流）。
```

### 3. 条件反射
自动触发的行为模式：

```
条件反射：看到TypeError自动分析类型链、/debug进入调试模式。
```

## 分类规范

### 按复杂度分类

#### 简单Agent
- 单一功能
- 确定性行为
- 可完全形式化

```
JSON格式化工具。
格式化和验证JSON数据。
工具：json_parse、json_format。
```

#### 复杂Agent
- 多种能力
- 需要推理和判断
- 部分形式化

```
全栈开发专家。
能设计架构、编写代码、调试问题、优化性能。
工具：create_file、edit、shell、grep。
知识函数：@design_api、@implement_feature、@debug_issue。
```

### 按用途分类

#### 分析型
```
{领域}分析专家。
能{分析类型}、{诊断类型}、{评估类型}。
```

#### 执行型
```
{任务}执行助手。
能{操作1}、{操作2}、{操作3}。
工具：{工具列表}。
```

#### 创造型
```
{领域}创作专家。
能{创造类型}、{生成类型}、{设计类型}。
```

## 反模式（应避免）

### 1. 暴露实现细节
❌ **错误**：
```
使用GPT-4的代码分析专家，需要至少8GB内存。
```

✅ **正确**：
```
代码分析专家。
```

### 2. 过度描述
❌ **错误**：
```
这是一个非常强大的Agent，它能做很多事情，包括但不限于分析代码、修复bug、优化性能、重构架构、编写测试、生成文档...
```

✅ **正确**：
```
全能开发助手。
能分析、修复、优化、重构代码。
```

### 3. 技术术语堆砌
❌ **错误**：
```
基于AST分析和符号执行的静态代码分析引擎。
```

✅ **正确**：
```
代码质量分析专家。
```

### 4. 模糊不清
❌ **错误**：
```
处理各种任务的助手。
```

✅ **正确**：
```
通用任务助手。
能理解自然语言指令并执行相应操作。
```

## 示例集

### 企业应用Agent

```
订单处理专家。
能验证订单、检查库存、处理支付、安排发货。
工具：database、payment_api、inventory_api、shipping_api。
知识函数：@validate_business_rules、@calculate_discount。
条件反射：库存不足时自动建议替代品、支付失败时自动重试。
```

### 开发工具Agent

```
代码重构专家。
能识别代码异味、提取通用模块、优化代码结构。
工具：read_file、edit、grep。
知识函数：@detect_code_smell、@extract_method、@inline_variable。
```

### 数据处理Agent

```
数据清洗专家。
能识别脏数据、修复格式错误、标准化数据。
工具：read_csv、write_csv、regex_replace。
知识函数：@detect_anomaly、@normalize_format。
```

### 极简工具Agent

```
时间戳转换器。
```

## 验证清单

编写完description后，检查以下要点：

- [ ] 角色定位是否明确？
- [ ] 能力描述是否具体？
- [ ] 是否避免了实现细节？
- [ ] 是否列举了主要工具？
- [ ] 是否说明了知识函数（如有）？
- [ ] 是否描述了条件反射（如有）？
- [ ] 整体是否简洁清晰？
- [ ] LLM是否能理解？

## 演进建议

1. **从简单开始**：先写最简description，根据需要逐步添加
2. **实践验证**：观察Router的选择效果，调整description
3. **保持更新**：Agent能力变化时，同步更新description
4. **避免过度设计**：不要预先定义所有可能的能力

## 哲学思考

Description的本质是**Agent的自我认知**：
- 它定义了Agent的身份
- 它承诺了Agent的能力
- 它是Agent与世界的接口

好的description让Agent能被正确理解和使用，就像好的自我介绍让人际交往更顺畅。

记住：**Description是给LLM看的，不是给人看的**。LLM能理解上下文和隐含信息，所以保持简洁，相信LLM的理解能力。