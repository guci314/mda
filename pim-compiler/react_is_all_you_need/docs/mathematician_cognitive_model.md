# 数学家认知模型

## 核心洞察

数学家用纸笔完成任意可计算函数的过程，揭示了认知的本质：
- **有限的工作记忆** + **无限的外部存储** = **图灵完备**

## 滑动窗口认知模型

```
新信息 → [滑动窗口] → 旧信息滑出
           ↓
      重要就写下来
```

### 核心特征

1. **固定大小的工作记忆**
   - 保持最近N条消息
   - 像队列一样FIFO

2. **自然遗忘**
   - 不是主动清空
   - 旧信息自然滑出窗口
   - 保持认知连续性

3. **外部持久化**
   - 重要信息写入笔记
   - 笔记是备份，不是替代
   - 窗口继续滑动

4. **按需加载**
   - 需要历史时读取笔记
   - 临时加载到工作记忆
   - 用完又会滑出

### 与清空模型的对比

| 清空模型（错误） | 滑动窗口（正确） |
|----------------|----------------|
| 做笔记→清空记忆 | 做笔记→继续滑动 |
| 认知断裂 | 认知连续 |
| 丢失上下文 | 保持上下文 |
| 不自然 | 模拟真实认知 |

## 实现

```python
# 滑动窗口管理
if len(messages) > threshold:
    # 保持固定大小的窗口
    system_msgs = [m for m in messages if m["role"] == "system"]
    recent_msgs = messages[len(system_msgs):][-threshold:]
    messages = system_msgs + recent_msgs
    
# 做笔记只是外部备份
if tool_name == "write_file" and "notes" in file_path:
    print("笔记已保存（外部持久化）")
    # 窗口继续滑动，不清空
```

## 与传统记忆系统的对比

| 传统系统 | 数学家模型 |
|---------|-----------|
| 主动压缩 | 自然遗忘 |
| 保留在内存 | 外部化到文件 |
| 搜索历史 | 查看笔记 |
| 复杂的管理 | 简单的循环 |

## 哲学意义

### 冯诺依曼架构的认知映射
- CPU（数学家大脑/Agent）
- 内存（纸/文件系统）
- 程序（证明步骤/任务）

### 图灵完备性
```
Agent + 文件系统 = 数学家 + 纸笔 = 通用图灵机
```

### 智能的本质
智能不是无限的记忆，而是：
1. 知道何时外部化（做笔记）
2. 知道如何索引（元记忆）
3. 知道何时加载（按需读取）

## 代码极简性

从1450行 → 600行 → 400行 → **真正的极简**

不是因为删除了功能，而是因为找到了正确的抽象：
- Agent不需要复杂的记忆管理
- Agent只需要像数学家一样使用纸笔
- 简单的机制产生复杂的行为

## 结论

最好的AI系统不是试图拥有无限记忆，而是像人类一样智慧地使用有限记忆 + 外部工具。

这就是为什么：
- 数学家能证明深奥定理
- 程序员能构建复杂系统
- Agent能完成任意任务

**核心秘密**：外部化 + 元记忆 = 无限认知