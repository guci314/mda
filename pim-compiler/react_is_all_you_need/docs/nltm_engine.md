# NLTM执行引擎 - 核心架构

## 概述
NLTM (Natural Language Turing Machine) 是一个通用的自然语言计算框架，通过编导-执行分离架构实现。

## 架构设计
```
用户 ←→ 编导Agent → [执行Agent作为工具] → 结果
            ↓              ↑
         NLPL程序      状态更新
```

## 核心组件

### 1. 编导Agent (Director Agent)
- **角色**: 理解用户意图，生成和优化NLPL程序
- **能力**: 调用执行Agent作为工具
- **职责**: 
  - 分析自然语言请求
  - 生成NLPL程序
  - 处理执行反馈
  - 动态调整程序

### 2. 执行Agent (Executor Agent)
- **角色**: 作为工具被调用，严格执行NLPL程序
- **特性**: 无状态、幂等、原子性
- **职责**:
  - 验证NLPL语法
  - 执行程序步骤
  - 维护状态一致性
  - 返回执行结果

### 3. NLPL (Natural Language Programming Language)
- **本质**: 结构化的自然语言程序
- **特性**: 图灵完备、自描述、可动态修改
- **结构**:
  ```yaml
  程序: [名称]
    目标: [明确目标]
    状态: [状态模型]
    主流程: [执行步骤]
  ```

## Agent as Tool 模式

### 工具化优势
1. **简化通信**: 不需要复杂的消息协议
2. **自然调用**: 像函数调用一样简单
3. **错误处理**: 标准的异常机制
4. **状态隔离**: 执行Agent内部状态不污染编导Agent

### 调用模式
```python
# 编导Agent调用执行Agent
result = executor_agent.execute(
    nlpl_program,     # 完整的NLPL程序
    initial_state,    # 初始状态
    options           # 执行选项
)
```

## 执行流程

### 标准流程
1. 用户提交自然语言请求
2. 编导Agent分析并生成NLPL
3. 编导Agent调用执行Agent工具
4. 执行Agent执行NLPL程序
5. 返回结果给编导Agent
6. 编导Agent生成用户友好的响应

### 动态调整流程
1. 执行遇到问题，返回错误信息
2. 编导Agent分析错误
3. 生成新版本NLPL
4. 重新调用执行Agent（全覆盖模式）
5. 从断点继续或重新开始

## 设计原则

### 1. 领域无关性
- 框架不包含任何特定领域逻辑
- 所有领域知识通过NLPL表达
- 执行机制保持通用

### 2. 知识驱动
- 程序即知识（NLPL）
- 执行即理解（Agent）
- 经验即积累（模式库）

### 3. 简单性
- 每个组件职责单一
- 接口清晰明确
- 避免过度设计

### 4. 可扩展性
- 可以添加新的执行Agent
- 可以扩展NLPL语法
- 可以积累领域模板

## 图灵完备性保证

NLTM通过以下机制保证图灵完备性：

1. **顺序执行**: 步骤按序执行
2. **条件分支**: IF-THEN-ELSE结构
3. **循环结构**: WHILE/FOR循环
4. **状态存储**: JSON状态持久化
5. **子程序调用**: 步骤可以调用其他程序

## 创新点

1. **自然语言作为编程语言**: 直接执行自然语言
2. **动态自适应**: 程序可在运行时自我修改
3. **智能执行**: LLM作为执行引擎
4. **全覆盖更新**: 每次调整都是完整程序替换

## 应用范围

NLTM可以处理从简单到复杂的各种任务：
- 数据处理和分析
- 业务流程自动化
- 决策支持系统
- 知识处理任务
- 创造性任务

## 未来演进

1. **多执行Agent**: 不同专长的执行Agent
2. **并行执行**: 独立步骤并行处理
3. **学习机制**: 从执行历史中学习优化
4. **可视化**: NLPL的图形化表示