# è‡ªç„¶è¯­è¨€è™šæ‹Ÿæœºè®¾è®¡æ–‡æ¡£

## 1. æ¦‚è¿°

GenericReactAgent è¢«è®¾è®¡ä¸ºä¸€ä¸ª"è‡ªç„¶è¯­è¨€è™šæ‹Ÿæœº"ï¼ˆNatural Language Virtual Machine, NLVMï¼‰ï¼Œå®ƒé€šè¿‡è‡ªç„¶è¯­è¨€æŒ‡ä»¤æ‰§è¡Œå¤æ‚ä»»åŠ¡ï¼Œç±»ä¼¼äºä¼ ç»Ÿè®¡ç®—æœºé€šè¿‡æœºå™¨ç æ‰§è¡Œç¨‹åºã€‚

### 1.1 æ ¸å¿ƒç†å¿µ

- **æŒ‡ä»¤ç³»ç»Ÿ**ï¼šè‡ªç„¶è¯­è¨€ä½œä¸ºæŒ‡ä»¤é›†
- **æ‰§è¡Œå¼•æ“**ï¼šLLM ä½œä¸ºæŒ‡ä»¤è§£é‡Šå™¨
- **å†…å­˜å±‚æ¬¡**ï¼šå¤šçº§è®°å¿†ç³»ç»Ÿæ¨¡æ‹Ÿè®¡ç®—æœºå†…å­˜æ¶æ„
- **å·¥å…·è°ƒç”¨**ï¼šç±»ä¼¼ç³»ç»Ÿè°ƒç”¨çš„å¤–éƒ¨èƒ½åŠ›æ¥å£
- **æŒä¹…åŒ–**ï¼šæå–çš„çŸ¥è¯†æä¾›è·¨ä¼šè¯çš„ç»éªŒç§¯ç´¯

### 1.2 ä¸ä¼ ç»Ÿè™šæ‹Ÿæœºçš„ç±»æ¯”

| ä¼ ç»Ÿè™šæ‹Ÿæœº | è‡ªç„¶è¯­è¨€è™šæ‹Ÿæœº | è¯´æ˜ |
|-----------|---------------|------|
| CPU | LLM | æŒ‡ä»¤æ‰§è¡Œå•å…ƒ |
| æŒ‡ä»¤å¯„å­˜å™¨ | å½“å‰æç¤ºè¯ | å¾…æ‰§è¡Œçš„æŒ‡ä»¤ï¼ˆä»»åŠ¡+çŸ¥è¯†ï¼‰ |
| ç¼“å­˜ | ä¼šè¯è®°å¿† | çŸ­æœŸå·¥ä½œè®°å¿† |
| å†…å­˜ | æ•°æ®åŒºåŸŸ | ä»»åŠ¡æ‰§è¡ŒæœŸé—´çš„å·¥ä½œç©ºé—´ |
| ç¡¬ç›˜ | æå–çš„çŸ¥è¯† | æŒä¹…åŒ–çš„ç»éªŒçŸ¥è¯† |
| ç³»ç»Ÿè°ƒç”¨ | å·¥å…·è°ƒç”¨ | ä¸å¤–éƒ¨ç¯å¢ƒäº¤äº’ |
| ç¨‹åº | çŸ¥è¯†æ–‡ä»¶ | å®šä¹‰è¡Œä¸ºæ¨¡å¼å’Œæ‰§è¡Œé€»è¾‘ |
| ç¨‹åºè¾“å…¥ | ä»»åŠ¡æè¿° | è¦å¤„ç†çš„å…·ä½“æ•°æ®/æŒ‡ä»¤ |
| BIOS/å›ºä»¶ | ç³»ç»Ÿæç¤ºè¯ | åŸºç¡€è¡Œä¸ºå®šä¹‰ |

### 1.3 å›¾çµå®Œå¤‡æ€§ä¸ BPMN æ¨¡æ‹Ÿ

è‡ªç„¶è¯­è¨€è™šæ‹Ÿæœºï¼ˆNLVMï¼‰å…·æœ‰å›¾çµå®Œå¤‡æ€§ï¼Œèƒ½å¤Ÿæ¨¡æ‹Ÿä»»æ„è®¡ç®—è¿‡ç¨‹ã€‚è¿™ä¸€ç‚¹é€šè¿‡å…¶å¯¹ BPMNï¼ˆBusiness Process Model and Notationï¼‰çš„æ¨¡æ‹Ÿèƒ½åŠ›å¾—åˆ°äº†å……åˆ†è¯æ˜ï¼š

#### 1.3.1 BPMN æ‰§è¡Œèƒ½åŠ›
NLVM å¯ä»¥ï¼š
- **é¡ºåºæ‰§è¡Œ**ï¼šæŒ‰ç…§ BPMN æµç¨‹å›¾å®šä¹‰çš„é¡ºåºæ‰§è¡Œä»»åŠ¡
- **æ¡ä»¶åˆ†æ”¯**ï¼šé€šè¿‡ `exclusiveGateway` å®ç° if-else é€»è¾‘
- **å¹¶è¡Œå¤„ç†**ï¼šé€šè¿‡ `parallelGateway` å®ç°å¹¶å‘æ‰§è¡Œ
- **å¾ªç¯ç»“æ„**ï¼šé€šè¿‡ç½‘å…³å’Œæ¡ä»¶å®ç°å¾ªç¯æ§åˆ¶
- **å­æµç¨‹è°ƒç”¨**ï¼šé€šè¿‡ `callActivity` è°ƒç”¨å…¶ä»– Agent æˆ–æµç¨‹

#### 1.3.2 çŠ¶æ€ç®¡ç†
- **æµç¨‹çŠ¶æ€è·Ÿè¸ª**ï¼šåœ¨ `workflow_execution.bpmn` ä¸­è®°å½•æ‰§è¡ŒçŠ¶æ€
- **å˜é‡å­˜å‚¨**ï¼šé€šè¿‡ä¸Šä¸‹æ–‡å’Œè®°å¿†ç³»ç»Ÿä¿å­˜æµç¨‹å˜é‡
- **å¼‚å¸¸å¤„ç†**ï¼šé€šè¿‡è¾¹ç•Œäº‹ä»¶å’Œé”™è¯¯å¤„ç†æµç¨‹ç®¡ç†å¼‚å¸¸

#### 1.3.3 æ™®é€‚è®¡ç®—èƒ½åŠ›
NLVM ä½œä¸ºæ™®é€‚å›¾çµæœºçš„è¯æ®ï¼š
1. **æ— é™å­˜å‚¨**ï¼šé€šè¿‡çŸ¥è¯†æå–å’Œæ–‡ä»¶ç³»ç»Ÿæä¾›ç†è®ºä¸Šæ— é™çš„å­˜å‚¨ç©ºé—´
2. **æ¡ä»¶è·³è½¬**ï¼šé€šè¿‡ BPMN ç½‘å…³å®ç°ä»»æ„æ¡ä»¶è·³è½¬
3. **å¾ªç¯æ§åˆ¶**ï¼šæ”¯æŒ whileã€for ç­‰å¾ªç¯ç»“æ„çš„æ¨¡æ‹Ÿ
4. **å­ç¨‹åºè°ƒç”¨**ï¼šé€šè¿‡ Agent as Tool å®ç°å‡½æ•°è°ƒç”¨è¯­ä¹‰
5. **è¾“å…¥è¾“å‡º**ï¼šé€šè¿‡å·¥å…·ç³»ç»Ÿä¸å¤–éƒ¨ç¯å¢ƒäº¤äº’

#### 1.3.4 å®é™…æ¡ˆä¾‹
åœ¨ BPMN å¼ºè¿«ç—‡çŸ¥è¯†æ–‡ä»¶çš„æŒ‡å¯¼ä¸‹ï¼ŒNLVM æˆåŠŸæ‰§è¡Œäº†åŒ…å«æ¡ä»¶åˆ†æ”¯çš„ç”¨æˆ·éªŒè¯æµç¨‹ï¼š
- åˆ›å»ºåŒ…å«å¤šä¸ª `exclusiveGateway` çš„å¤æ‚æµç¨‹
- æ ¹æ®æ¡ä»¶åŠ¨æ€é€‰æ‹©æ‰§è¡Œè·¯å¾„
- æ›´æ–°æ‰§è¡ŒçŠ¶æ€å¹¶è®°å½•å†³ç­–å†å²

è¿™è¡¨æ˜ NLVM ä¸ä»…æ˜¯ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå™¨ï¼Œæ›´æ˜¯ä¸€ä¸ªèƒ½å¤Ÿæ¨¡æ‹Ÿä»»æ„è®¡ç®—æ¨¡å‹çš„é€šç”¨è®¡ç®—å¹³å°ã€‚åŒæ—¶ï¼Œè¿™ä¹Ÿè¯æ˜äº† Transformer æ¶æ„æœ¬èº«æ˜¯å›¾çµå®Œå¤‡çš„â€”â€”é€šè¿‡é€‚å½“çš„æç¤ºå·¥ç¨‹å’Œæ‰§è¡Œæ¡†æ¶ï¼ŒåŸºäº Transformer çš„è¯­è¨€æ¨¡å‹èƒ½å¤Ÿå®ç°ä»»æ„è®¡ç®—ã€‚

## 2. æ¶æ„è®¾è®¡

### 2.1 ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GenericReactAgent (è‡ªç„¶è¯­è¨€è™šæ‹Ÿæœº)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              æ‰§è¡Œå¼•æ“ (LangGraph React Agent)                â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚    LLM Core      â”‚  â”‚      React æ‰§è¡Œå¾ªç¯          â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ DeepSeek   â”‚  â”‚  â”‚  â”‚ Thought (æ€è€ƒ)         â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ Gemini     â”‚  â”‚  â”‚  â”‚    â†“                   â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ GPT-4      â”‚  â”‚  â”‚  â”‚ Action (å·¥å…·è°ƒç”¨)      â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ Claude     â”‚  â”‚  â”‚  â”‚    â†“                   â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚ Observation (è§‚å¯Ÿç»“æœ) â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚    â†‘___________________|  â”‚  â”‚   â”‚
â”‚  â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 è®°å¿†ç³»ç»Ÿ (Memory Hierarchy)                  â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚              ä¸‰çº§è®°å¿†æ¶æ„ (MemoryLevel)              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                                     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  NONE:  æ— çŠ¶æ€æ¨¡å¼ (æ¯æ¬¡é‡æ–°å¼€å§‹)                   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                                     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  SMART: æ™ºèƒ½ç¼“å†²æ¨¡å¼                                â”‚   â”‚   â”‚
â”‚  â”‚  â”‚         â”œâ”€ ConversationBufferMemory (å†…å­˜)         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚         â””â”€ CustomSummaryBufferMemory (è‡ªåŠ¨æ‘˜è¦)    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                                     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  PRO:   æŒä¹…åŒ–æ¨¡å¼                                  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚         â””â”€ SQLiteCache + SQLChatMessageHistory     â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚              Agent å­˜å‚¨ç»“æ„                          â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                                     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  .agents/{agent_name}/                             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€ short_term_data/   # çŸ­æœŸæ•°æ®å­˜å‚¨             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€ long_term_data/    # é•¿æœŸæ•°æ®å­˜å‚¨             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚      â””â”€â”€ extracted_knowledge.md                    â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 çŸ¥è¯†ç³»ç»Ÿ (Knowledge System)                  â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  çŸ¥è¯†æ–‡ä»¶åŠ è½½     â”‚  â”‚      çŸ¥è¯†æ¥æº                  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                  â”‚  â”‚                                â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ include æœºåˆ¶   â”‚  â”‚  â€¢ knowledge_files (æ–‡ä»¶åˆ—è¡¨)  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ é€’å½’åŠ è½½      â”‚  â”‚  â€¢ knowledge_strings (å­—ç¬¦ä¸²)  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ å»é‡å¤„ç†      â”‚  â”‚  â€¢ interface (ä»»åŠ¡æ¥å£)       â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â€¢ system_prompt (ç³»ç»Ÿæç¤º)   â”‚  â”‚   â”‚
â”‚  â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 å·¥å…·ç³»ç»Ÿ (Tool System)                       â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚   æ–‡ä»¶æ“ä½œ      â”‚  â”‚   ä»£ç æœç´¢      â”‚  â”‚  å‘½ä»¤æ‰§è¡Œ    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ write_file   â”‚  â”‚ â€¢ search_files  â”‚  â”‚ â€¢ execute_   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ read_file    â”‚  â”‚ â€¢ find_symbol   â”‚  â”‚   command    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ create_      â”‚  â”‚ â€¢ extract_code  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚  â”‚   directory    â”‚  â”‚ â€¢ search_       â”‚                    â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ list_        â”‚  â”‚   replace       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚   directory    â”‚  â”‚ â€¢ edit_lines    â”‚  â”‚  Web å·¥å…·    â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â€¢ apply_diff    â”‚  â”‚ â€¢ google_    â”‚  â”‚   â”‚
â”‚  â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   search      â”‚  â”‚   â”‚
â”‚  â”‚                                          â”‚ â€¢ read_web_   â”‚  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   page        â”‚  â”‚   â”‚
â”‚  â”‚  â”‚      è‡ªå®šä¹‰å·¥å…· (Custom Tools)      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ ç”¨æˆ·å®šä¹‰çš„æ‰©å±•å·¥å…·               â”‚                    â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Agent as Tool (å­Agentè°ƒç”¨)     â”‚                    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              é…ç½®ç³»ç»Ÿ (ReactAgentConfig)                     â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚  â€¢ work_dir: å·¥ä½œç›®å½•ï¼ˆå¤–éƒ¨ä¸–ç•Œï¼‰                           â”‚   â”‚
â”‚  â”‚  â€¢ agent_home: Agentå†…éƒ¨å­˜å‚¨ç›®å½•                            â”‚   â”‚
â”‚  â”‚  â€¢ llm_model: LLMæ¨¡å‹é€‰æ‹©                                   â”‚   â”‚
â”‚  â”‚  â€¢ memory_level: è®°å¿†çº§åˆ«é…ç½®                               â”‚   â”‚
â”‚  â”‚  â€¢ context_window: ä¸Šä¸‹æ–‡çª—å£å¤§å°                           â”‚   â”‚
â”‚  â”‚  â€¢ knowledge_extraction_limit: çŸ¥è¯†æå–é™åˆ¶                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ ¸å¿ƒç»„ä»¶

#### 2.2.1 æ‰§è¡Œå¼•æ“
- **LLM Core**ï¼šå¤§è¯­è¨€æ¨¡å‹ä½œä¸ºä¸­å¤®å¤„ç†å•å…ƒ
- **React Agent Loop**ï¼šæ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿå¾ªç¯
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šç®¡ç†è¾“å…¥è¾“å‡ºæµ

#### 2.2.2 è®°å¿†ç³»ç»Ÿ
- **Context (å¯„å­˜å™¨)**ï¼šå½“å‰ä»»åŠ¡çš„å³æ—¶ä¸Šä¸‹æ–‡
- **Session Memory (ç¼“å­˜)**ï¼šä¼šè¯çº§åˆ«çš„å·¥ä½œè®°å¿†
- **Data Area (å†…å­˜)**ï¼šä»»åŠ¡æ‰§è¡Œçš„ç§æœ‰å·¥ä½œç©ºé—´
- **Long-term Memory (ç¡¬ç›˜)**ï¼šè·¨ä¼šè¯çš„æŒä¹…åŒ–çŸ¥è¯†

#### 2.2.3 å·¥å…·ç³»ç»Ÿ
- **æ ‡å‡†å·¥å…·åº“**ï¼šæ–‡ä»¶æ“ä½œã€ä»£ç æœç´¢ã€å‘½ä»¤æ‰§è¡Œç­‰
- **è‡ªå®šä¹‰å·¥å…·**ï¼šç”¨æˆ·å®šä¹‰çš„æ‰©å±•èƒ½åŠ›
- **Agent as Tool**ï¼šå…¶ä»– Agent ä½œä¸ºå·¥å…·è°ƒç”¨

## 3. è®°å¿†å±‚æ¬¡è¯¦è§£

### 3.1 æŒ‡ä»¤å¯„å­˜å™¨çº§ï¼šå½“å‰æç¤ºè¯
```python
# ç‰¹ç‚¹ï¼šå­˜å‚¨å¾…æ‰§è¡Œçš„"æŒ‡ä»¤"
# å®ç°ï¼šå½“å‰çš„ promptï¼ˆç³»ç»Ÿæç¤º + ç”¨æˆ·ä»»åŠ¡ + çŸ¥è¯†æ³¨å…¥ï¼‰
# å†…å®¹ï¼šLLM æœ¬æ¬¡æ¨ç†çš„å®Œæ•´è¾“å…¥
# ç±»æ¯”ï¼šCPU çš„æŒ‡ä»¤å¯„å­˜å™¨ï¼ˆIRï¼‰ï¼Œå­˜å‚¨å³å°†æ‰§è¡Œçš„æŒ‡ä»¤
```

### 3.2 ç¼“å­˜çº§ï¼šä¼šè¯è®°å¿†
```python
class MemoryLevel(Enum):
    NONE = "none"     # æ— çŠ¶æ€ï¼Œæ¯æ¬¡é‡æ–°å¼€å§‹
    SMART = "smart"   # æ™ºèƒ½æ‘˜è¦ï¼Œè‡ªåŠ¨ç®¡ç†å®¹é‡
    PRO = "pro"       # SQLite æŒä¹…åŒ–
```

### 3.3 å†…å­˜çº§ï¼šæ•°æ®åŒºåŸŸ
```
.agent_data/
â””â”€â”€ {agent_name}/
    â”œâ”€â”€ temp_files/      # ä¸´æ—¶æ–‡ä»¶
    â”œâ”€â”€ working_data/    # å·¥ä½œæ•°æ®
    â””â”€â”€ outputs/         # è¾“å‡ºç»“æœ
```

### 3.4 ç¡¬ç›˜çº§ï¼šæå–çš„çŸ¥è¯†
```
.agent_memory/
â””â”€â”€ {agent_name}/
    â””â”€â”€ extracted_knowledge.md  # Markdown æ ¼å¼çš„æå–çŸ¥è¯†
```

## 4. è®°å¿†ç®¡ç†æœºåˆ¶

### 4.1 çŸ¥è¯†æ–‡ä»¶å®¹é‡é™åˆ¶
```python
DEFAULT_KNOWLEDGE_EXTRACTION_LIMITS = {
    "deepseek-chat": 50 * 1024,      # 50KB
    "gemini-2.5-flash": 200 * 1024,  # 200KB
    "gpt-4": 100 * 1024,             # 100KB
    "default": 100 * 1024            # 100KB
}
```

### 4.2 çŸ¥è¯†ç²¾ç‚¼ç³»ç»Ÿ
å½“çŸ¥è¯†æ–‡ä»¶è¶…è¿‡é™åˆ¶æ—¶ï¼Œè§¦å‘æ™ºèƒ½å‹ç¼©ï¼š

1. **æ—¶é—´è¡°å‡**ï¼šä¿ç•™æœ€è¿‘çš„ï¼Œåˆ é™¤è¿‡æ—¶çš„
2. **é‡è¦æ€§è¯„ä¼°**ï¼šä¿ç•™å…³é”®é”™è¯¯ã€ç”¨æˆ·åå¥½ã€æœ‰æ•ˆæ¨¡å¼
3. **æŠ½è±¡åŒ–**ï¼šå°†å…·ä½“æ¡ˆä¾‹æŠ½è±¡ä¸ºé€šç”¨åŸåˆ™
4. **ç»“æ„åŒ–**ï¼šç»„ç»‡ä¸ºæ¸…æ™°çš„çŸ¥è¯†ç»“æ„

#### SMARTè®°å¿†å‹ç¼©ç”¨æˆ·é€šçŸ¥
å‹ç¼©æ—¶ä¼šä¸»åŠ¨é€šçŸ¥ç”¨æˆ·ï¼š
```python
# è®°å¿†å‹ç¼©é€šçŸ¥
print(f"ğŸ’­ [SMARTè®°å¿†] å½“å‰å¯¹è¯å†å²è¶…è¿‡é™åˆ¶({tokens} > {limit})ï¼Œæ­£åœ¨è¿›è¡Œè®°å¿†å‹ç¼©...")
print(f"ğŸ’­ [SMARTè®°å¿†] è®°å¿†å‹ç¼©å®Œæˆï¼Œä¿ç•™äº†å…³é”®ä¿¡æ¯")

# çŸ¥è¯†æå–å‹ç¼©é€šçŸ¥  
print(f"ğŸ’­ æ­£åœ¨æç‚¼çŸ¥è¯†ï¼ˆæ–‡ä»¶å¤§å°: {size/1024:.1f}KBï¼‰...")
print(f"ğŸ“ çŸ¥è¯†æç‚¼å®Œæˆï¼Œå·²å‹ç¼©è‡³ {compressed_size/1024:.1f}KB")
```

### 4.3 çŸ¥è¯†æå–æµç¨‹
```python
# å¼‚æ­¥æ›´æ–°ï¼Œä¸é˜»å¡ä¸»ä»»åŠ¡
def execute_task(self, task):
    # æ‰§è¡Œä»»åŠ¡
    result = self._run_task(task)
    
    # å¼‚æ­¥æå–çŸ¥è¯†
    if self.config.knowledge_extraction_limit > 0:
        threading.Thread(
            target=self._update_extracted_knowledge,
            args=(messages,)
        ).start()
    
    return result
```

## 5. é…ç½®ç³»ç»Ÿ

### 5.1 ä¸‰å±‚è¯­ä¹‰
```python
# 1. ç±»å‹å±‚ï¼šå®šä¹‰èƒ½åŠ›è¾¹ç•Œ
class ReactAgentConfig:
    interface: str           # èƒ½åŠ›æ¥å£å£°æ˜
    knowledge_files: List   # çŸ¥è¯†åº“
    tools: List            # å¯ç”¨å·¥å…·
    memory_limit: int      # è®°å¿†å®¹é‡
    
# 2. å®ä¾‹å±‚ï¼šå…·ä½“èº«ä»½
class GenericReactAgent:
    def __init__(self, config, name):
        self.name = name        # å®ä¾‹æ ‡è¯†
        self.config = config    # ç±»å‹é…ç½®
        
# 3. è¿è¡Œå±‚ï¼šæ‰§è¡ŒçŠ¶æ€
# - å½“å‰ä»»åŠ¡
# - ä¼šè¯å†å²
# - å·¥ä½œæ•°æ®
```

### 5.2 é…ç½®ç¤ºä¾‹
```python
# åˆ›å»ºä¸“é—¨çš„ä»£ç ç”Ÿæˆå™¨
code_gen_config = ReactAgentConfig(
    work_dir="output/codegen",
    knowledge_files=["knowledge/ç¼–ç¨‹è§„èŒƒ.md"],
    interface="ä¸“ä¸šçš„ä»£ç ç”Ÿæˆå·¥å…·",
    memory_limit=100 * 1024  # 100KB
)

agent = GenericReactAgent(
    config=code_gen_config,
    name="code_generator"
)
```

## 6. å·¥å…·ç³»ç»Ÿ

### 6.1 æ ‡å‡†å·¥å…·é›†
- **æ–‡ä»¶æ“ä½œ**ï¼šread_file, write_file, create_directory
- **ä»£ç æœç´¢**ï¼šsearch_files, find_symbol
- **ä»£ç ä¿®æ”¹**ï¼šsearch_replace, edit_lines, apply_diff
- **å‘½ä»¤æ‰§è¡Œ**ï¼šexecute_command
- **Webæ“ä½œ**ï¼šgoogle_search, read_web_pageï¼ˆå¯é€‰ï¼‰

### 6.2 è‡ªå®šä¹‰å·¥å…·
```python
from langchain_core.tools import tool

@tool
def custom_tool(param: str) -> str:
    """è‡ªå®šä¹‰å·¥å…·æè¿°"""
    return f"å¤„ç†ç»“æœ: {param}"

# æ³¨å…¥åˆ° Agent - è‡ªå®šä¹‰å·¥å…·ä¼šä¸é»˜è®¤å·¥å…·åˆå¹¶
agent = GenericReactAgent(
    config=config,
    custom_tools=[custom_tool]  # è¿™äº›å·¥å…·å°†æ·»åŠ åˆ°é»˜è®¤å·¥å…·é›†ä¸­
)
```

#### å·¥å…·åˆå¹¶æœºåˆ¶ï¼ˆé‡è¦æ”¹è¿›ï¼‰
ä»å®è·µä¸­å‘ç°çš„å…³é”®é—®é¢˜ï¼šè‡ªå®šä¹‰å·¥å…·ä¸åº”æ›¿æ¢é»˜è®¤å·¥å…·ï¼Œè€Œåº”è¯¥åˆå¹¶ã€‚

```python
# react_agent.py ä¸­çš„æ­£ç¡®å®ç°
default_tools = create_tools(self.config.work_dir)
if self._tools is None:
    tools = default_tools
else:
    tools = default_tools + self._tools  # åˆå¹¶è€Œéæ›¿æ¢ï¼
```

è¿™ä¸ªæ”¹è¿›è§£å†³äº†è°ƒè¯•Agentåªæœ‰ä¸€ä¸ªå·¥å…·çš„ä¸¥é‡é—®é¢˜ã€‚

### 6.3 Agent as Tool - å¤šAgentåä½œæœºåˆ¶

Agent as Tool æ˜¯å®ç°å¤šAgentåä½œçš„æ ¸å¿ƒæœºåˆ¶ï¼Œå®ƒå…è®¸ä¸€ä¸ªAgentå°†å¦ä¸€ä¸ªAgentä½œä¸ºå·¥å…·æ¥è°ƒç”¨ï¼Œå®ç°å¤æ‚ä»»åŠ¡çš„åˆ†è§£å’Œä¸“ä¸šåŒ–å¤„ç†ã€‚

#### 6.3.1 åŸºæœ¬å®ç°
```python
from langchain_agent_tool import AgentToolWrapper

# 1. åˆ›å»ºä¸“ä¸šåŒ–çš„å­Agent
code_gen_config = ReactAgentConfig(
    work_dir="output/shared_workspace",
    knowledge_files=["knowledge/programming/python_programming_knowledge.md"],
    interface="ä¸“ä¸šçš„Pythonä»£ç ç”Ÿæˆå™¨",
    memory_level=MemoryLevel.SMART
)
code_generator = GenericReactAgent(code_gen_config, name="code_generator")

# 2. å°†å­AgentåŒ…è£…ä¸ºå·¥å…·
code_gen_tool = AgentToolWrapper(
    agent=code_generator,
    name="code_generator",
    description="ç”Ÿæˆé«˜è´¨é‡çš„Pythonä»£ç ",
    show_execution=False  # éšè—æ‰§è¡Œç»†èŠ‚
)

# 3. ä¸»Agentä½¿ç”¨å­Agentå·¥å…·
main_config = ReactAgentConfig(
    work_dir="output/shared_workspace",
    knowledge_files=["knowledge/coordination/delegation_best_practices.md"]
)
main_agent = GenericReactAgent(
    config=main_config,
    name="project_manager",
    custom_tools=[code_gen_tool]  # æ³¨å…¥å­Agentå·¥å…·
)
```

#### 6.3.2 åä½œæ¨¡å¼

**1. å±‚çº§åä½œæ¨¡å¼**
```python
# é¡¹ç›®ç»ç† â†’ å¤šä¸ªä¸“ä¸šAgent
project_manager
â”œâ”€â”€ code_generator    # ä»£ç ç”Ÿæˆ
â”œâ”€â”€ code_runner      # ä»£ç æ‰§è¡Œå’Œæµ‹è¯•
â””â”€â”€ code_reviewer    # ä»£ç å®¡æŸ¥

# ç¤ºä¾‹è°ƒç”¨
result = project_manager.execute_task("""
åˆ›å»ºä¸€ä¸ªæ•°å­¦å·¥å…·ç±»ï¼ŒåŒ…å«ï¼š
1. åŸºæœ¬è¿ç®—æ–¹æ³•
2. å•å…ƒæµ‹è¯•
3. ä»£ç è´¨é‡ä¿è¯
""")
```

**2. æµæ°´çº¿åä½œæ¨¡å¼**
```python
# Agent1 â†’ Agent2 â†’ Agent3
analyzer â†’ designer â†’ implementer

# æ¯ä¸ªAgentçš„è¾“å‡ºä½œä¸ºä¸‹ä¸€ä¸ªAgentçš„è¾“å…¥
spec = analyzer.execute_task("åˆ†æç”¨æˆ·éœ€æ±‚...")
design = designer.execute_task(f"åŸºäºè§„æ ¼è®¾è®¡: {spec}")
code = implementer.execute_task(f"å®ç°è®¾è®¡: {design}")
```

**3. å¹¶è¡Œåä½œæ¨¡å¼**
```python
# ä¸»AgentåŒæ—¶è°ƒç”¨å¤šä¸ªå­Agent
async def parallel_execution():
    frontend_task = frontend_agent.execute_task_async("åˆ›å»ºå‰ç«¯ç•Œé¢")
    backend_task = backend_agent.execute_task_async("åˆ›å»ºåç«¯API")
    
    # ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ
    frontend_result = await frontend_task
    backend_result = await backend_task
    
    # æ•´åˆç»“æœ
    return integrate_results(frontend_result, backend_result)
```

#### 6.3.3 å…±äº«æœºåˆ¶

**1. å·¥ä½œç›®å½•å…±äº«**
```python
# æ‰€æœ‰Agentä½¿ç”¨ç›¸åŒçš„work_dir
shared_workspace = "output/shared_workspace"

# Agenté—´é€šè¿‡æ–‡ä»¶ç³»ç»Ÿäº¤æ¢æ•°æ®
code_generator:  å†™å…¥ â†’ math_utils.py
code_runner:     è¯»å– â†’ math_utils.py â†’ æ‰§è¡Œæµ‹è¯•
code_reviewer:   è¯»å– â†’ math_utils.py â†’ ç”ŸæˆæŠ¥å‘Š
```

**2. ä¸Šä¸‹æ–‡ä¼ é€’**
```python
# é€šè¿‡ä»»åŠ¡æè¿°ä¼ é€’ä¸Šä¸‹æ–‡
context = {
    "project_type": "web_app",
    "tech_stack": ["FastAPI", "PostgreSQL"],
    "requirements": ["ç”¨æˆ·è®¤è¯", "æ•°æ®éªŒè¯"]
}

task_with_context = f"""
ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼š
{json.dumps(context, indent=2)}

ä»»åŠ¡ï¼šå®ç°ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½
"""
```

**3. çŸ¥è¯†å…±äº«**
```python
# å…±äº«çŸ¥è¯†æ–‡ä»¶
shared_knowledge = [
    "knowledge/core/system_prompt.md",
    "knowledge/programming/python_programming_knowledge.md"
]

# æ¯ä¸ªAgentéƒ½å¯ä»¥è®¿é—®å…±äº«çŸ¥è¯†
for agent_config in [config1, config2, config3]:
    agent_config.knowledge_files.extend(shared_knowledge)
```

#### 6.3.4 é€šä¿¡åè®®

**1. æ ‡å‡†åŒ–è¾“å…¥è¾“å‡º**
```python
# å®šä¹‰ç»Ÿä¸€çš„ä»»åŠ¡æ ¼å¼
class TaskRequest:
    task_type: str      # ä»»åŠ¡ç±»å‹
    description: str    # ä»»åŠ¡æè¿°
    context: dict      # ä¸Šä¸‹æ–‡ä¿¡æ¯
    constraints: list  # çº¦æŸæ¡ä»¶

# å®šä¹‰ç»Ÿä¸€çš„ç»“æœæ ¼å¼
class TaskResult:
    status: str        # success/failure
    output: str        # ä¸»è¦è¾“å‡º
    artifacts: dict    # ç”Ÿæˆçš„æ–‡ä»¶ç­‰
    metadata: dict     # æ‰§è¡Œå…ƒæ•°æ®
```

**2. é”™è¯¯å¤„ç†å’Œé‡è¯•**
```python
def execute_with_retry(agent_tool, task, max_retries=3):
    for attempt in range(max_retries):
        try:
            result = agent_tool.execute(task)
            if "error" not in result.lower():
                return result
        except Exception as e:
            if attempt == max_retries - 1:
                raise
            time.sleep(2 ** attempt)  # æŒ‡æ•°é€€é¿
    return "ä»»åŠ¡æ‰§è¡Œå¤±è´¥"
```

#### 6.3.5 å®é™…æ¡ˆä¾‹

**å®Œæ•´çš„å¤šAgentåä½œç¤ºä¾‹**
```python
# åœºæ™¯ï¼šåˆ›å»ºä¸€ä¸ªå®Œæ•´çš„Web APIé¡¹ç›®

# 1. éœ€æ±‚åˆ†æAgent
requirements_agent = GenericReactAgent(
    ReactAgentConfig(
        work_dir=shared_workspace,
        interface="éœ€æ±‚åˆ†æä¸“å®¶",
        knowledge_files=["knowledge/requirements_analysis.md"]
    ),
    name="requirements_analyst"
)

# 2. æ¶æ„è®¾è®¡Agent
architect_agent = GenericReactAgent(
    ReactAgentConfig(
        work_dir=shared_workspace,
        interface="ç³»ç»Ÿæ¶æ„å¸ˆ",
        knowledge_files=["knowledge/system_design.md"]
    ),
    name="architect"
)

# 3. å®ç°Agentå›¢é˜Ÿ
implementation_team = {
    "backend": backend_agent,
    "frontend": frontend_agent,
    "database": database_agent
}

# 4. æµ‹è¯•Agent
test_agent = GenericReactAgent(
    ReactAgentConfig(
        work_dir=shared_workspace,
        interface="æµ‹è¯•å·¥ç¨‹å¸ˆ",
        knowledge_files=["knowledge/testing_best_practices.md"]
    ),
    name="tester"
)

# 5. é¡¹ç›®ç»ç†åè°ƒæ‰€æœ‰Agent
project_manager = GenericReactAgent(
    ReactAgentConfig(
        work_dir=shared_workspace,
        interface="é¡¹ç›®ç»ç†ï¼Œåè°ƒæ•´ä¸ªå¼€å‘æµç¨‹"
    ),
    name="project_manager",
    custom_tools=[
        AgentToolWrapper(requirements_agent),
        AgentToolWrapper(architect_agent),
        *[AgentToolWrapper(agent) for agent in implementation_team.values()],
        AgentToolWrapper(test_agent)
    ]
)

# æ‰§è¡Œå®Œæ•´é¡¹ç›®
project_result = project_manager.execute_task("""
åˆ›å»ºä¸€ä¸ªä»»åŠ¡ç®¡ç†ç³»ç»Ÿï¼š
1. åˆ†æéœ€æ±‚
2. è®¾è®¡æ¶æ„
3. å®ç°åŠŸèƒ½
4. ç¼–å†™æµ‹è¯•
5. ç”Ÿæˆæ–‡æ¡£
""")
```

#### 6.3.6 æœ€ä½³å®è·µ

1. **æ˜ç¡®èŒè´£è¾¹ç•Œ**ï¼šæ¯ä¸ªAgentåº”æœ‰æ¸…æ™°çš„ä¸“ä¸šé¢†åŸŸ
2. **æ ‡å‡†åŒ–æ¥å£**ï¼šä½¿ç”¨ç»Ÿä¸€çš„è¾“å…¥è¾“å‡ºæ ¼å¼
3. **é”™è¯¯éš”ç¦»**ï¼šå­Agentçš„å¤±è´¥ä¸åº”å¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒ
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šé¿å…ä¸å¿…è¦çš„Agentè°ƒç”¨é“¾
5. **å¯è§‚æµ‹æ€§**ï¼šè®°å½•Agenté—´çš„è°ƒç”¨å…³ç³»å’Œæ•°æ®æµ

## 7. Agent Interface æ¥å£è§„èŒƒ

Agent Interface æ˜¯ Agent å¯¹å¤–æš´éœ²çš„æ¥å£å£°æ˜ï¼Œç±»ä¼¼äºå‡½æ•°ç­¾åæˆ– API æ–‡æ¡£ã€‚å®ƒå‘Šè¯‰è°ƒç”¨è€…ï¼ˆé€šå¸¸æ˜¯ä¸» Agentï¼‰è¿™ä¸ª Agent èƒ½åšä»€ä¹ˆã€å¦‚ä½•è°ƒç”¨ã€æœŸæœ›ä»€ä¹ˆè¾“å…¥ã€ä¼šè¿”å›ä»€ä¹ˆè¾“å‡ºã€‚

### 7.1 Interface çš„ä½œç”¨

```python
# ä¸» Agent è¯»å–å­ Agent çš„ interface
sub_agent_interface = code_generator.config.interface

# åŸºäº interface å†³å®šæ˜¯å¦è°ƒç”¨è¯¥ Agent
if "Pythonä»£ç ç”Ÿæˆ" in sub_agent_spec:
    # æ„é€ åˆé€‚çš„ä»»åŠ¡æè¿°ï¼ˆpromptï¼‰
    task = "è¯·ç”Ÿæˆä¸€ä¸ªè®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å‡½æ•°"
    result = code_generator.execute_task(task)
```

### 7.2 åŸºæœ¬æ ¼å¼

```python
interface = """
ã€èƒ½åŠ›å£°æ˜ã€‘
æœ¬Agentä¸“æ³¨äº{ä¸“ä¸šé¢†åŸŸ}ï¼Œèƒ½å¤Ÿå¤„ç†ä»¥ä¸‹ä»»åŠ¡ï¼š
- {èƒ½åŠ›1}
- {èƒ½åŠ›2}
- {èƒ½åŠ›3}

ã€è¾“å…¥æ ¼å¼ã€‘
æ¥å—ä»¥ä¸‹æ ¼å¼çš„ä»»åŠ¡æè¿°ï¼š
- ä»»åŠ¡ç±»å‹ï¼š{æ”¯æŒçš„ä»»åŠ¡ç±»å‹åˆ—è¡¨}
- å¿…éœ€å‚æ•°ï¼š{å‚æ•°1}ã€{å‚æ•°2}
- å¯é€‰å‚æ•°ï¼š{å‚æ•°3}ã€{å‚æ•°4}

ã€è¾“å‡ºæ ¼å¼ã€‘
è¿”å›ç»“æœåŒ…å«ï¼š
- ä¸»è¦è¾“å‡ºï¼š{è¾“å‡ºå†…å®¹æè¿°}
- é™„åŠ ä¿¡æ¯ï¼š{å…ƒæ•°æ®ã€æ—¥å¿—ç­‰}
- æ–‡ä»¶äº§å‡ºï¼š{ç”Ÿæˆçš„æ–‡ä»¶ç±»å‹å’Œä½ç½®}

ã€ä½¿ç”¨ç¤ºä¾‹ã€‘
è¾“å…¥ï¼š"åˆ›å»ºä¸€ä¸ªç”¨æˆ·ç®¡ç†ç³»ç»Ÿçš„REST API"
è¾“å‡ºï¼šç”Ÿæˆ user_api.py æ–‡ä»¶ï¼ŒåŒ…å«å®Œæ•´çš„CRUDæ“ä½œ

ã€é™åˆ¶æ¡ä»¶ã€‘
- {é™åˆ¶1}
- {é™åˆ¶2}
"""
```

### 7.3 Interface æ ¸å¿ƒè¦ç´ 

#### 7.3.1 èƒ½åŠ›å£°æ˜ï¼ˆå¿…éœ€ï¼‰
æ¸…æ™°åˆ—å‡º Agent èƒ½å¤Ÿæ‰§è¡Œçš„ä»»åŠ¡ç±»å‹ã€‚

```python
interface = """
ã€èƒ½åŠ›å£°æ˜ã€‘
æœ¬Agentèƒ½å¤Ÿï¼š
- ç”ŸæˆPythonä»£ç ï¼ˆç±»ã€å‡½æ•°ã€æ¨¡å—ï¼‰
- åˆ›å»ºå•å…ƒæµ‹è¯•
- ç”ŸæˆAPIæ¥å£
- ç¼–å†™æ•°æ®æ¨¡å‹
- åˆ›å»ºå‘½ä»¤è¡Œå·¥å…·
"""
```

#### 7.3.2 è¾“å…¥æ¥å£ï¼ˆå¿…éœ€ï¼‰
å®šä¹‰æ¥å—çš„ä»»åŠ¡æ ¼å¼å’Œå‚æ•°ã€‚

```python
interface = """
ã€è¾“å…¥æ ¼å¼ã€‘
æ¥å—è‡ªç„¶è¯­è¨€ä»»åŠ¡æè¿°ï¼Œæ”¯æŒä»¥ä¸‹æ ¼å¼ï¼š

1. ç›´æ¥æè¿°ï¼š
   "åˆ›å»ºä¸€ä¸ªè®¡ç®—å™¨ç±»ï¼Œæ”¯æŒåŸºæœ¬è¿ç®—"

2. ç»“æ„åŒ–è¾“å…¥ï¼š
   ä»»åŠ¡ç±»å‹ï¼šåˆ›å»ºç±»
   ç±»åï¼šCalculator
   åŠŸèƒ½ï¼šåŠ å‡ä¹˜é™¤
   è¦æ±‚ï¼šåŒ…å«é”™è¯¯å¤„ç†

3. å¸¦ä¸Šä¸‹æ–‡ï¼š
   åŸºäºå·²æœ‰çš„ user.pyï¼Œåˆ›å»ºå¯¹åº”çš„ service å±‚
"""
```

#### 7.3.3 è¾“å‡ºæ¥å£ï¼ˆå¿…éœ€ï¼‰
è¯´æ˜è¿”å›ç»“æœçš„æ ¼å¼å’Œå†…å®¹ã€‚

```python
interface = """
ã€è¾“å‡ºæ ¼å¼ã€‘
è¿”å›å†…å®¹åŒ…æ‹¬ï¼š
1. ç”Ÿæˆçš„ä»£ç æ–‡ä»¶è·¯å¾„
2. æ‰§è¡Œç»“æœæ‘˜è¦
3. å¯èƒ½çš„åç»­æ­¥éª¤å»ºè®®

ç¤ºä¾‹è¾“å‡ºï¼š
"å·²åˆ›å»º calculator.pyï¼ŒåŒ…å« Calculator ç±»å’Œ 4 ä¸ªæ–¹æ³•ã€‚
å»ºè®®ä¸‹ä¸€æ­¥ï¼šè¿è¡Œå•å…ƒæµ‹è¯•éªŒè¯åŠŸèƒ½ã€‚"
"""
```

#### 7.3.4 æ–‡ä»¶äº§å‡ºï¼ˆæ¨èï¼‰
åˆ—å‡ºä¼šç”Ÿæˆæˆ–ä¿®æ”¹çš„æ–‡ä»¶ã€‚

```python
interface = """
ã€æ–‡ä»¶äº§å‡ºã€‘
- æºä»£ç æ–‡ä»¶ï¼š*.py
- æµ‹è¯•æ–‡ä»¶ï¼štest_*.py
- é…ç½®æ–‡ä»¶ï¼š*.yaml, *.json
- æ–‡æ¡£ï¼š*.md
æ‰€æœ‰æ–‡ä»¶ç”Ÿæˆåœ¨å·¥ä½œç›®å½•ä¸­
"""
```

#### 7.3.5 è°ƒç”¨ç¤ºä¾‹ï¼ˆæ¨èï¼‰
æä¾›å…·ä½“çš„è°ƒç”¨æ¡ˆä¾‹ã€‚

```python
interface = """
ã€è°ƒç”¨ç¤ºä¾‹ã€‘
ç¤ºä¾‹1ï¼š
è¾“å…¥ï¼š"åˆ›å»ºä¸€ä¸ªç”¨æˆ·è®¤è¯æ¨¡å—"
è¾“å‡ºï¼šç”Ÿæˆ auth.pyï¼ŒåŒ…å« login(), logout(), register() å‡½æ•°

ç¤ºä¾‹2ï¼š
è¾“å…¥ï¼š"ä¸º OrderService ç±»æ·»åŠ å•å…ƒæµ‹è¯•"
è¾“å‡ºï¼šç”Ÿæˆ test_order_service.pyï¼Œè¦†ç›–æ‰€æœ‰å…¬å…±æ–¹æ³•
"""
```

#### 7.3.6 é”™è¯¯å¤„ç†ï¼ˆå¯é€‰ï¼‰
è¯´æ˜å¯èƒ½çš„é”™è¯¯æƒ…å†µã€‚

```python
interface = """
ã€é”™è¯¯å¤„ç†ã€‘
- ä»»åŠ¡ä¸æ˜ç¡®æ—¶ï¼šè¿”å›æ¾„æ¸…è¯·æ±‚
- è¶…å‡ºèƒ½åŠ›èŒƒå›´ï¼šæ˜ç¡®æ‹’ç»å¹¶è¯´æ˜åŸå› 
- æ‰§è¡Œå¤±è´¥ï¼šè¿”å›é”™è¯¯ä¿¡æ¯å’Œå¯èƒ½çš„è§£å†³æ–¹æ¡ˆ
"""
```

### 7.4 ä¸åŒç±»å‹Agentçš„Interfaceç¤ºä¾‹

#### 7.4.1 ä»£ç ç”ŸæˆAgent
```python
interface = """
ã€èƒ½åŠ›å£°æ˜ã€‘
ä¸“ä¸šçš„Pythonä»£ç ç”ŸæˆæœåŠ¡ï¼Œèƒ½å¤Ÿï¼š
- åˆ›å»ºå®Œæ•´çš„Pythonæ¨¡å—ã€ç±»å’Œå‡½æ•°
- ç”ŸæˆFastAPI/Flask Webåº”ç”¨
- ç¼–å†™å‘½ä»¤è¡Œå·¥å…·
- åˆ›å»ºæ•°æ®å¤„ç†è„šæœ¬
- ç”Ÿæˆé…ç½®æ–‡ä»¶

ã€è¾“å…¥æ ¼å¼ã€‘
æ¥å—è‡ªç„¶è¯­è¨€æè¿°çš„ç¼–ç¨‹ä»»åŠ¡ï¼Œä¾‹å¦‚ï¼š
- "åˆ›å»ºä¸€ä¸ªç”¨æˆ·ç®¡ç†ç³»ç»Ÿ"
- "å®ç°ä¸€ä¸ªç¼“å­˜è£…é¥°å™¨"
- "ç”ŸæˆRESTful APIæ¥å£"

ã€è¾“å‡ºæ ¼å¼ã€‘
- ä¸»è¦äº§å‡ºï¼šæºä»£ç æ–‡ä»¶ï¼ˆ.pyï¼‰
- æ‰§è¡Œæ‘˜è¦ï¼šç”Ÿæˆäº†ä»€ä¹ˆï¼ŒåŒ…å«å“ªäº›åŠŸèƒ½
- åç»­å»ºè®®ï¼šæµ‹è¯•ã€éƒ¨ç½²ç­‰ä¸‹ä¸€æ­¥æ“ä½œ

ã€è°ƒç”¨ç¤ºä¾‹ã€‘
è¾“å…¥ï¼š"åˆ›å»ºä¸€ä¸ªç®€å•çš„ä»»åŠ¡é˜Ÿåˆ—ç³»ç»Ÿ"
è¾“å‡ºï¼šç”Ÿæˆ task_queue.pyï¼ŒåŒ…å« TaskQueue ç±»ã€add_task() å’Œ process_tasks() æ–¹æ³•

ã€é™åˆ¶ã€‘
- ä»…ç”ŸæˆPythonä»£ç 
- ä¸æ‰§è¡Œç”Ÿæˆçš„ä»£ç 
- ä¸å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶
"""
```

#### 7.4.2 ä»£ç æ‰§è¡Œä¸æµ‹è¯•Agent
```python
interface = """
ã€èƒ½åŠ›å£°æ˜ã€‘
ä»£ç æ‰§è¡Œå’Œæµ‹è¯•æœåŠ¡ï¼Œèƒ½å¤Ÿï¼š
- è¿è¡ŒPythonä»£ç å¹¶è¿”å›ç»“æœ
- æ‰§è¡Œå•å…ƒæµ‹è¯•
- æ£€æµ‹ä»£ç é”™è¯¯
- ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
- éªŒè¯å‡½æ•°è¡Œä¸º

ã€è¾“å…¥æ ¼å¼ã€‘
1. ç›´æ¥æŒ‡ä»¤ï¼š"è¿è¡Œ main.py"
2. æµ‹è¯•è¯·æ±‚ï¼š"æµ‹è¯• calculator.py ä¸­çš„æ‰€æœ‰å‡½æ•°"
3. éªŒè¯è¯·æ±‚ï¼š"éªŒè¯ api.py æ˜¯å¦èƒ½æ­£å¸¸å¯åŠ¨"

ã€è¾“å‡ºæ ¼å¼ã€‘
æ‰§è¡ŒæˆåŠŸæ—¶ï¼š
- ç¨‹åºè¾“å‡º
- æ‰§è¡Œæ—¶é—´
- èµ„æºä½¿ç”¨æƒ…å†µ

æ‰§è¡Œå¤±è´¥æ—¶ï¼š
- é”™è¯¯ç±»å‹
- é”™è¯¯ä¿¡æ¯
- å †æ ˆè·Ÿè¸ª
- ä¿®å¤å»ºè®®

ã€æ–‡ä»¶ä¾èµ–ã€‘
éœ€è¦ä»£ç æ–‡ä»¶å·²å­˜åœ¨äºå·¥ä½œç›®å½•

ã€é™åˆ¶ã€‘
- æ‰§è¡Œè¶…æ—¶ï¼š30ç§’
- ä»…æ‰§è¡ŒPythonä»£ç 
- ä¸ä¿®æ”¹åŸå§‹ä»£ç 
"""
```

#### 7.4.3 ä»£ç å®¡æŸ¥Agent
```python
interface = """
ã€èƒ½åŠ›å£°æ˜ã€‘
ä¸“ä¸šä»£ç å®¡æŸ¥æœåŠ¡ï¼Œæä¾›ï¼š
- ä»£ç è´¨é‡è¯„ä¼°
- æ½œåœ¨é—®é¢˜è¯†åˆ«
- æ€§èƒ½ä¼˜åŒ–å»ºè®®
- å®‰å…¨æ¼æ´æ£€æŸ¥
- æœ€ä½³å®è·µæ¨è

ã€è¾“å…¥æ ¼å¼ã€‘
- "å®¡æŸ¥ [æ–‡ä»¶å]"
- "æ£€æŸ¥ [ç›®å½•] ä¸‹çš„æ‰€æœ‰Pythonæ–‡ä»¶"
- "è¯„ä¼° [å‡½æ•°å] çš„å®ç°è´¨é‡"

ã€è¾“å‡ºæ ¼å¼ã€‘
ç»“æ„åŒ–æŠ¥å‘ŠåŒ…å«ï¼š
1. æ€»ä½“è¯„åˆ†ï¼ˆ1-10åˆ†ï¼‰
2. é—®é¢˜åˆ—è¡¨ï¼ˆæŒ‰ä¸¥é‡ç¨‹åº¦æ’åºï¼‰
3. å…·ä½“æ”¹è¿›å»ºè®®
4. ä»£ç ç¤ºä¾‹

ã€è¯„å®¡æ ‡å‡†ã€‘
- PEP 8 è§„èŒƒç¬¦åˆåº¦
- ä»£ç å¤æ‚åº¦
- æµ‹è¯•è¦†ç›–ç‡
- æ–‡æ¡£å®Œæ•´æ€§
- é”™è¯¯å¤„ç†

ã€äº§å‡ºæ–‡ä»¶ã€‘
- code_review_report.md
"""
```

#### 7.4.4 é¡¹ç›®åè°ƒAgent
```python
interface = """
ã€èƒ½åŠ›å£°æ˜ã€‘
é¡¹ç›®ç®¡ç†å’Œå¤šAgentåè°ƒæœåŠ¡ï¼š
- ä»»åŠ¡åˆ†è§£å’Œåˆ†é…
- å¤šAgentå·¥ä½œæµåè°ƒ
- è¿›åº¦è·Ÿè¸ªå’ŒæŠ¥å‘Š
- ä¾èµ–å…³ç³»ç®¡ç†
- ç»“æœæ•´åˆ

ã€è¾“å…¥æ ¼å¼ã€‘
é¡¹ç›®æè¿°ï¼ŒåŒ…å«ï¼š
- é¡¹ç›®ç›®æ ‡
- åŠŸèƒ½éœ€æ±‚åˆ—è¡¨
- è´¨é‡è¦æ±‚
- æ—¶é—´é™åˆ¶

ã€è¾“å‡ºæ ¼å¼ã€‘
- ä»»åŠ¡åˆ†é…è®¡åˆ’
- æ‰§è¡Œè¿›åº¦æ›´æ–°
- æœ€ç»ˆäº¤ä»˜æ€»ç»“
- ç”Ÿæˆçš„æ‰€æœ‰æ–‡ä»¶æ¸…å•

ã€å¯è°ƒç”¨çš„å­Agentã€‘
- code_generatorï¼šä»£ç ç”Ÿæˆ
- code_runnerï¼šä»£ç æ‰§è¡Œ
- code_reviewerï¼šä»£ç å®¡æŸ¥
- test_writerï¼šæµ‹è¯•ç¼–å†™

ã€åè°ƒæ¨¡å¼ã€‘
1. é¡ºåºæ‰§è¡Œï¼šç”Ÿæˆâ†’æµ‹è¯•â†’å®¡æŸ¥
2. å¹¶è¡Œæ‰§è¡Œï¼šå‰ç«¯/åç«¯åŒæ—¶å¼€å‘
3. è¿­ä»£æ‰§è¡Œï¼šæ ¹æ®åé¦ˆå¾ªç¯æ”¹è¿›
"""
```

### 7.5 ä¸»Agentå¦‚ä½•ä½¿ç”¨Interface

#### 7.5.1 ä»»åŠ¡åˆ†é…å†³ç­–
```python
def assign_task_to_agent(task: str, available_agents: List[Agent]) -> Agent:
    """ä¸»Agentæ ¹æ®interfaceé€‰æ‹©åˆé€‚çš„å­Agent"""
    
    for agent in available_agents:
        spec = agent.config.interface
        
        # è§£æèƒ½åŠ›å£°æ˜
        if "èƒ½åŠ›å£°æ˜" in spec:
            capabilities = extract_capabilities(spec)
            if task_matches_capabilities(task, capabilities):
                return agent
    
    # å¦‚æœæ²¡æœ‰å®Œå…¨åŒ¹é…çš„ï¼Œé€‰æ‹©æœ€æ¥è¿‘çš„
    return find_best_match(task, available_agents)
```

#### 7.5.2 æ„é€ åˆé€‚çš„Prompt
```python
def create_agent_prompt(agent: Agent, task: str) -> str:
    """æ ¹æ®Agentçš„interfaceæ„é€ åˆé€‚çš„ä»»åŠ¡æè¿°"""
    
    spec = agent.config.specification
    
    # æå–è¾“å…¥æ ¼å¼è¦æ±‚
    input_format = extract_input_format(spec)
    
    # æ ¹æ®æ ¼å¼è¦æ±‚è°ƒæ•´ä»»åŠ¡æè¿°
    if "ç»“æ„åŒ–è¾“å…¥" in input_format:
        return format_structured_task(task)
    else:
        return task  # ç›´æ¥ä½¿ç”¨è‡ªç„¶è¯­è¨€æè¿°
```

#### 7.5.3 è§£æå’ŒéªŒè¯è¾“å‡º
```python
def validate_agent_output(agent: Agent, output: str) -> bool:
    """éªŒè¯å­Agentçš„è¾“å‡ºæ˜¯å¦ç¬¦åˆinterface"""
    
    spec = agent.config.specification
    expected_output = extract_output_format(spec)
    
    # æ£€æŸ¥å¿…éœ€çš„è¾“å‡ºå…ƒç´ 
    for required_element in expected_output:
        if required_element not in output:
            return False
    
    return True
```

### 7.6 Interfaceæœ€ä½³å®è·µ

#### 7.6.1 æ¸…æ™°çš„èƒ½åŠ›è¾¹ç•Œ
```python
# å¥½çš„ä¾‹å­
interface = """
ã€èƒ½åŠ›å£°æ˜ã€‘
æœ¬Agentä¸“é—¨å¤„ç†Pythonä»£ç ç”Ÿæˆï¼Œä¸åŒ…æ‹¬ï¼š
- å…¶ä»–ç¼–ç¨‹è¯­è¨€
- ä»£ç æ‰§è¡Œ
- éƒ¨ç½²æ“ä½œ
"""

# ä¸å¥½çš„ä¾‹å­
specification = "èƒ½åšå„ç§ç¼–ç¨‹ä»»åŠ¡"
```

#### 7.6.2 æ ‡å‡†åŒ–çš„æ ¼å¼
ä½¿ç”¨ç»Ÿä¸€çš„æ ‡è®°ï¼ˆå¦‚ã€ã€‘ï¼‰ä¾¿äºè§£æï¼š
```python
interface = """
ã€èƒ½åŠ›å£°æ˜ã€‘...
ã€è¾“å…¥æ ¼å¼ã€‘...
ã€è¾“å‡ºæ ¼å¼ã€‘...
ã€è°ƒç”¨ç¤ºä¾‹ã€‘...
"""
```

#### 7.6.3 å¯éªŒè¯çš„æ‰¿è¯º
```python
interface = """
ã€è¾“å‡ºæ ¼å¼ã€‘
è¿”å›å€¼åŒ…å«ï¼š
- result: æ‰§è¡Œç»“æœï¼ˆå­—ç¬¦ä¸²ï¼‰
- files_created: åˆ›å»ºçš„æ–‡ä»¶åˆ—è¡¨
- next_steps: å»ºè®®çš„åç»­æ“ä½œ

ã€è¾“å‡ºä¿è¯ã€‘
- æ‰€æœ‰ç”Ÿæˆçš„ä»£ç éƒ½æœ‰ç±»å‹æ³¨è§£
- æ‰€æœ‰å‡½æ•°éƒ½æœ‰docstring
- æ‰€æœ‰æ–‡ä»¶éƒ½ä¿å­˜åœ¨å·¥ä½œç›®å½•
"""
```

### 7.7 Interfaceä¸å…¶ä»–é…ç½®çš„å…³ç³»

```
Agentå¯¹å¤–æ¥å£
â”œâ”€â”€ interface          # å¯¹å¤–å£°æ˜çš„èƒ½åŠ›æ¥å£
â”œâ”€â”€ description       # AgentToolWrapperä¸­çš„ç®€çŸ­æè¿°
â””â”€â”€ name             # Agentçš„å”¯ä¸€æ ‡è¯†

Agentå†…éƒ¨é…ç½®
â”œâ”€â”€ knowledge_files   # é¢†åŸŸçŸ¥è¯†ï¼ˆä¸å¯¹å¤–æš´éœ²ï¼‰
â”œâ”€â”€ system_prompt    # å†…éƒ¨æç¤ºè¯ï¼ˆä¸å¯¹å¤–æš´éœ²ï¼‰
â”œâ”€â”€ tools           # å¯ç”¨å·¥å…·é›†ï¼ˆéƒ¨åˆ†èƒ½åŠ›çš„å®ç°ï¼‰
â””â”€â”€ memory_level    # è®°å¿†é…ç½®ï¼ˆå†…éƒ¨æœºåˆ¶ï¼‰
```

**å…³é”®åŒºåˆ«**ï¼š
- **Interface**ï¼šé¢å‘è°ƒç”¨è€…çš„æ¥å£æ–‡æ¡£
- **Knowledge/Prompt**ï¼šé¢å‘Agentè‡ªèº«çš„è¡Œä¸ºæŒ‡å¯¼

è¿™ç§åˆ†ç¦»ç¡®ä¿äº†ï¼š
1. è°ƒç”¨è€…åªéœ€è¦äº†è§£æ¥å£ï¼Œä¸éœ€è¦äº†è§£å†…éƒ¨å®ç°
2. Agentå¯ä»¥ç‹¬ç«‹å‡çº§å†…éƒ¨å®ç°è€Œä¸å½±å“æ¥å£
3. ä¾¿äºè‡ªåŠ¨åŒ–çš„ä»»åŠ¡åˆ†é…å’Œç»“æœéªŒè¯

## 8. æ‰§è¡Œæ¨¡å‹

### 8.1 React å¾ªç¯
```
1. Thoughtï¼ˆæ€è€ƒï¼‰ï¼šåˆ†æä»»åŠ¡ï¼Œåˆ¶å®šè®¡åˆ’
2. Actionï¼ˆè¡ŒåŠ¨ï¼‰ï¼šé€‰æ‹©å¹¶è°ƒç”¨å·¥å…·
3. Observationï¼ˆè§‚å¯Ÿï¼‰ï¼šè·å–å·¥å…·ç»“æœ
4. Repeatï¼šé‡å¤ç›´åˆ°ä»»åŠ¡å®Œæˆ
```

### 7.2 æ‰§è¡Œç¤ºä¾‹
```
[Agent] > Executing task...
ğŸ¤” æ€è€ƒï¼šéœ€è¦åˆ›å»ºä¸€ä¸ªPythonæ–‡ä»¶...
ğŸ”§ è°ƒç”¨å·¥å…·ï¼šwrite_file
ğŸ’¬ è§‚å¯Ÿç»“æœï¼šæ–‡ä»¶åˆ›å»ºæˆåŠŸ
ğŸ¤” æ€è€ƒï¼šç°åœ¨éœ€è¦è¿è¡Œæµ‹è¯•...
ğŸ”§ è°ƒç”¨å·¥å…·ï¼šexecute_command
ğŸ’¬ è§‚å¯Ÿç»“æœï¼šæµ‹è¯•é€šè¿‡
ğŸ¤– æœ€ç»ˆå›ç­”ï¼šä»»åŠ¡å·²å®Œæˆï¼Œæ–‡ä»¶åˆ›å»ºå¹¶æµ‹è¯•æˆåŠŸã€‚
```

## 8. åº”ç”¨åœºæ™¯

### 8.1 å• Agent åº”ç”¨
- **ä»£ç ç”Ÿæˆ**ï¼šè‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡ä»£ç 
- **é¡¹ç›®åˆ†æ**ï¼šç†è§£å’Œåˆ†æä»£ç åº“
- **è‡ªåŠ¨åŒ–æµ‹è¯•**ï¼šç¼–å†™å’Œæ‰§è¡Œæµ‹è¯•
- **æ–‡æ¡£ç”Ÿæˆ**ï¼šåˆ›å»ºæŠ€æœ¯æ–‡æ¡£

### 8.2 å¤š Agent åä½œ
- **å¼€å‘æµç¨‹**ï¼šéœ€æ±‚åˆ†æ â†’ ä»£ç ç”Ÿæˆ â†’ æµ‹è¯• â†’ éƒ¨ç½²
- **ä»£ç å®¡æŸ¥**ï¼šå¼€å‘è€… Agent + å®¡æŸ¥è€… Agent
- **é¡¹ç›®ç®¡ç†**ï¼šåè°ƒå¤šä¸ªä¸“ä¸š Agent å®Œæˆå¤æ‚ä»»åŠ¡

### 8.3 æŒç»­å­¦ä¹ ç³»ç»Ÿ
- **ç»éªŒç§¯ç´¯**ï¼šé€šè¿‡çŸ¥è¯†æå–ä¿å­˜æœ€ä½³å®è·µ
- **ä¸ªæ€§åŒ–æœåŠ¡**ï¼šè®°ä½ç”¨æˆ·åå¥½å’Œé¡¹ç›®ç‰¹ç‚¹
- **çŸ¥è¯†ä¼ æ‰¿**ï¼šæ–° Agent ç»§æ‰¿å·²æœ‰ç»éªŒ

## 9. æ€§èƒ½ä¼˜åŒ–

### 9.1 ç¼“å­˜æœºåˆ¶
- **LLM å“åº”ç¼“å­˜**ï¼šé¿å…é‡å¤è°ƒç”¨
- **å·¥å…·ç»“æœç¼“å­˜**ï¼šç¼“å­˜ç¡®å®šæ€§æ“ä½œ
- **SQLite å­˜å‚¨**ï¼šé«˜æ•ˆçš„ä¼šè¯ç®¡ç†

### 9.2 å¹¶å‘å¤„ç†
- **å¼‚æ­¥è®°å¿†æ›´æ–°**ï¼šä¸é˜»å¡ä¸»ä»»åŠ¡
- **å¹¶è¡Œå·¥å…·è°ƒç”¨**ï¼šæ”¯æŒæ‰¹é‡æ“ä½œ
- **æµå¼è¾“å‡º**ï¼šå®æ—¶æ˜¾ç¤ºæ‰§è¡Œè¿‡ç¨‹

## 10. æœ€ä½³å®è·µ

### 10.1 Agent è®¾è®¡åŸåˆ™
1. **å•ä¸€èŒè´£**ï¼šæ¯ä¸ª Agent ä¸“æ³¨ç‰¹å®šé¢†åŸŸ
2. **æ¸…æ™°æ¥å£**ï¼šæ˜ç¡®çš„ interface
3. **é€‚åº¦è®°å¿†**ï¼šåˆç†è®¾ç½® memory_limit
4. **çŸ¥è¯†ç®¡ç†**ï¼šç²¾é€‰ç›¸å…³ knowledge_files

### 10.2 ä»»åŠ¡æè¿°æŠ€å·§
1. **æ˜ç¡®å…·ä½“**ï¼šæ¸…æ™°æè¿°æœŸæœ›ç»“æœ
2. **åˆ†æ­¥éª¤**ï¼šå¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºæ­¥éª¤
3. **æä¾›ä¸Šä¸‹æ–‡**ï¼šå¿…è¦çš„èƒŒæ™¯ä¿¡æ¯
4. **ä¾èµ–å…³ç³»**ï¼šæ˜ç¡®ä»»åŠ¡é—´çš„ä¾èµ–

### 10.3 è®°å¿†ç®¡ç†ç­–ç•¥
1. **å®šæœŸæ¸…ç†**ï¼šåˆ é™¤è¿‡æ—¶çš„å·¥ä½œæ•°æ®
2. **çŸ¥è¯†æç‚¼**ï¼šä»å…·ä½“åˆ°æŠ½è±¡
3. **ç»“æ„åŒ–ç»„ç»‡**ï¼šä¿æŒè®°å¿†çš„å¯è¯»æ€§
4. **ç‰ˆæœ¬æ§åˆ¶**ï¼šé‡è¦è®°å¿†çš„å¤‡ä»½

## 11. çŸ¥è¯†æ–‡æ¡£æ ¼å¼

### 11.1 çŸ¥è¯†çš„æœ¬è´¨ï¼šç¨‹åºèŒƒå¼

çŸ¥è¯†çš„æœ¬è´¨æ˜¯ç¨‹åº - å®ƒä¸ä»…å­˜å‚¨ä¿¡æ¯ï¼Œæ›´å®šä¹‰äº† Agent çš„è¡Œä¸ºæ¨¡å¼ã€‚æ­£å¦‚ç¨‹åºæŒ‡å¯¼è®¡ç®—æœºæ‰§è¡Œä»»åŠ¡ï¼ŒçŸ¥è¯†æŒ‡å¯¼ Agent æ€è€ƒå’Œè¡ŒåŠ¨ã€‚

#### ä¸¤ç§å“²å­¦èŒƒå¼

1. **ç»éªŒä¸»ä¹‰èŒƒå¼**ï¼ˆEmpiricist Paradigmï¼‰
   - åŸºäºç»éªŒã€æ¡ˆä¾‹å’Œæ¨¡å¼è¯†åˆ«
   - å¼ºè°ƒä»å®è·µä¸­å­¦ä¹ 
   - é€‚åˆå¤„ç†å¤æ‚ã€æ¨¡ç³Šçš„ç°å®é—®é¢˜

2. **ç†æ€§ä¸»ä¹‰èŒƒå¼**ï¼ˆRationalist Paradigmï¼‰
   - åŸºäºé€»è¾‘ã€è§„åˆ™å’Œæ¨ç†
   - å¼ºè°ƒå½¢å¼åŒ–å’Œè¯æ˜
   - é€‚åˆå¤„ç†ç»“æ„åŒ–ã€ç¡®å®šæ€§é—®é¢˜

#### å¯¹åº”çš„çŸ¥è¯†é£æ ¼

1. **æ„å›¾å£°æ˜å¼èŒƒå¼**ï¼ˆIntent-Declarative Styleï¼‰
   - æè¿°"æƒ³è¦ä»€ä¹ˆ"è€Œä¸æ˜¯"æ€ä¹ˆåš"
   - ç»™äºˆ Agent æ›´å¤šè‡ªä¸»æƒ
   - ä¾‹å¦‚ï¼š"ä¿æŒä»£ç è´¨é‡"è€Œä¸æ˜¯"æ¯è¡Œå¿…é¡»æ³¨é‡Š"

2. **çŠ¶æ€æœºèŒƒå¼**ï¼ˆState Machine Styleï¼‰
   - æ˜ç¡®å®šä¹‰çŠ¶æ€å’Œè½¬æ¢æ¡ä»¶
   - è¡Œä¸ºå¯é¢„æµ‹ã€å¯éªŒè¯
   - ä¾‹å¦‚ï¼šBPMN å·¥ä½œæµã€æœ‰é™çŠ¶æ€è‡ªåŠ¨æœº

### 11.2 çŸ¥è¯†æ–‡æ¡£åˆ†ç±»

æ ¹æ®çŸ¥è¯†çš„æ€§è´¨å’Œç”¨é€”ï¼Œæˆ‘ä»¬å®šä¹‰äº†å››ç§ä¸»è¦ç±»å‹ï¼š

#### 1. å£°æ˜å¼çŸ¥è¯†ï¼ˆDeclarative Knowledgeï¼‰
æè¿°"æ˜¯ä»€ä¹ˆ"çš„çŸ¥è¯†ï¼ŒåŒ…æ‹¬äº‹å®ã€æ¦‚å¿µã€åŸåˆ™ã€‚

```markdown
# ä»£ç è´¨é‡åŸåˆ™

## ç±»å‹ï¼šå£°æ˜å¼çŸ¥è¯†
## ä¼˜å…ˆçº§ï¼šé«˜
## é€‚ç”¨åœºæ™¯ï¼šä»£ç å®¡æŸ¥ã€é‡æ„å†³ç­–

## æ ¸å¿ƒä¿¡å¿µ
- å¯è¯»æ€§ä¼˜äºæ€§èƒ½ä¼˜åŒ–
- ç®€å•ä¼˜äºå¤æ‚
- æ˜ç¡®ä¼˜äºéšå«

## çº¦æŸæ¡ä»¶
- å‡½æ•°é•¿åº¦ä¸è¶…è¿‡ 50 è¡Œ
- åœˆå¤æ‚åº¦ä¸è¶…è¿‡ 10
- æµ‹è¯•è¦†ç›–ç‡è‡³å°‘ 80%

## ç¤ºä¾‹
âœ… å¥½çš„å®è·µï¼šä½¿ç”¨æè¿°æ€§å˜é‡å
âŒ é¿å…ï¼šå•å­—æ¯å˜é‡åï¼ˆé™¤äº†å¾ªç¯ç´¢å¼•ï¼‰
```

#### 2. è¿‡ç¨‹å¼çŸ¥è¯†ï¼ˆProcedural Knowledgeï¼‰
æè¿°"æ€ä¹ˆåš"çš„çŸ¥è¯†ï¼ŒåŒ…æ‹¬æ­¥éª¤ã€æµç¨‹ã€æ–¹æ³•ã€‚

```markdown
# API è®¾è®¡æµç¨‹

## ç±»å‹ï¼šè¿‡ç¨‹å¼çŸ¥è¯†
## è§¦å‘æ¡ä»¶ï¼šæ”¶åˆ°"è®¾è®¡ API"çš„ä»»åŠ¡
## ä¼˜å…ˆçº§ï¼šä¸­

## æ‰§è¡Œæ­¥éª¤
1. åˆ†æéœ€æ±‚
   - ç¡®å®šèµ„æºç±»å‹
   - å®šä¹‰æ“ä½œï¼ˆCRUD+ï¼‰
   
2. è®¾è®¡ç«¯ç‚¹
   - éµå¾ª RESTful åŸåˆ™
   - ä½¿ç”¨åˆé€‚çš„ HTTP æ–¹æ³•
   
3. å®šä¹‰æ•°æ®æ¨¡å‹
   - è¯·æ±‚/å“åº”æ ¼å¼
   - é”™è¯¯æ ¼å¼

## é€€å‡ºæ¡ä»¶
- ç”Ÿæˆ OpenAPI è§„èŒƒ
- æ‰€æœ‰ç«¯ç‚¹éƒ½æœ‰ç¤ºä¾‹

## å¼‚å¸¸å¤„ç†
- éœ€æ±‚ä¸æ¸…ï¼šè¦æ±‚æ¾„æ¸…
- å†²çªè®¾è®¡ï¼šå¯»æ±‚æƒè¡¡
```

#### 3. è§„åˆ™å¼çŸ¥è¯†ï¼ˆRule-based Knowledgeï¼‰
æè¿°"ä½•æ—¶åšä»€ä¹ˆ"çš„æ¡ä»¶æ€§çŸ¥è¯†ã€‚

```markdown
# é”™è¯¯å¤„ç†è§„åˆ™

## ç±»å‹ï¼šè§„åˆ™å¼çŸ¥è¯†
## ä¼˜å…ˆçº§ï¼šé«˜
## å†²çªè§£å†³ï¼šæœ€å…·ä½“è§„åˆ™ä¼˜å…ˆ

## è§„åˆ™é›†

### è§„åˆ™1ï¼šç½‘ç»œé”™è¯¯
IF é”™è¯¯ç±»å‹ = NetworkError
THEN 
  - é‡è¯• 3 æ¬¡ï¼ŒæŒ‡æ•°é€€é¿
  - è®°å½•è¯¦ç»†æ—¥å¿—
  - è¿”å›ç”¨æˆ·å‹å¥½æ¶ˆæ¯

### è§„åˆ™2ï¼šéªŒè¯é”™è¯¯
IF é”™è¯¯ç±»å‹ = ValidationError
THEN
  - ä¸é‡è¯•
  - è¿”å›å…·ä½“å­—æ®µé”™è¯¯
  - çŠ¶æ€ç  400

### è§„åˆ™3ï¼šæœªçŸ¥é”™è¯¯
IF é”™è¯¯ç±»å‹ = Unknown
THEN
  - è®°å½•å®Œæ•´å †æ ˆ
  - é€šçŸ¥å¼€å‘å›¢é˜Ÿ
  - è¿”å›é€šç”¨é”™è¯¯æ¶ˆæ¯
```

#### 4. ç»éªŒå¼çŸ¥è¯†ï¼ˆExperiential Knowledgeï¼‰
ä»å®è·µä¸­æå–çš„æ¨¡å¼å’Œæœ€ä½³å®è·µã€‚

```markdown
# Python æ€§èƒ½ä¼˜åŒ–ç»éªŒ

## ç±»å‹ï¼šç»éªŒå¼çŸ¥è¯†
## æ¥æºï¼šç”Ÿäº§ç¯å¢ƒä¼˜åŒ–æ¡ˆä¾‹
## å¯ä¿¡åº¦ï¼šé«˜ï¼ˆåŸºäº 100+ æ¡ˆä¾‹ï¼‰

## æ¨¡å¼è¯†åˆ«

### æ¨¡å¼ï¼šåˆ—è¡¨ç†è§£ vs å¾ªç¯
- **è§‚å¯Ÿ**ï¼šåˆ—è¡¨ç†è§£é€šå¸¸æ¯”ç­‰æ•ˆå¾ªç¯å¿« 20-30%
- **é€‚ç”¨æ¡ä»¶**ï¼šç®€å•è½¬æ¢ï¼Œæ— å‰¯ä½œç”¨
- **åä¾‹**ï¼šå¤æ‚é€»è¾‘æ—¶å¯è¯»æ€§ä¸‹é™

### æ¨¡å¼ï¼šå­—å…¸æŸ¥æ‰¾ vs åˆ—è¡¨æœç´¢
- **è§‚å¯Ÿ**ï¼šå­—å…¸ O(1) vs åˆ—è¡¨ O(n)
- **ä¸´ç•Œç‚¹**ï¼šå…ƒç´ æ•° > 10 æ—¶ä¼˜åŠ¿æ˜æ˜¾
- **ä»£ä»·**ï¼šé¢å¤–å†…å­˜å¼€é”€

## æ¡ˆä¾‹åº“
1. æ¡ˆä¾‹ï¼šä¼˜åŒ–æ•°æ®æ‰¹å¤„ç†
   - é—®é¢˜ï¼šå¤„ç† 100 ä¸‡æ¡è®°å½•è€—æ—¶ 5 åˆ†é’Ÿ
   - è§£å†³ï¼šä½¿ç”¨ pandas å‘é‡åŒ–æ“ä½œ
   - ç»“æœï¼šé™è‡³ 30 ç§’
```

### 11.3 çŸ¥è¯†æ–‡æ¡£æ ¼å¼è§„èŒƒ

æ¯ä¸ªçŸ¥è¯†æ–‡æ¡£åº”åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

#### å…ƒæ•°æ®å¤´éƒ¨
```yaml
---
title: çŸ¥è¯†æ ‡é¢˜
type: declarative|procedural|rule-based|experiential
priority: low|medium|high|critical
domain: é€‚ç”¨é¢†åŸŸ
tags: [æ ‡ç­¾åˆ—è¡¨]
version: 1.0
updated: 2024-01-20
author: Agentåç§°æˆ–äººç±»ä½œè€…
---
```

#### æ ¸å¿ƒå†…å®¹ç»“æ„

1. **æ¦‚è¿°éƒ¨åˆ†**
   - çŸ¥è¯†çš„ç®€è¦æè¿°
   - é€‚ç”¨åœºæ™¯
   - å‰ç½®æ¡ä»¶

2. **ä¸»ä½“éƒ¨åˆ†**ï¼ˆæ ¹æ®ç±»å‹ä¸åŒï¼‰
   - å£°æ˜å¼ï¼šä¿¡å¿µã€åŸåˆ™ã€çº¦æŸ
   - è¿‡ç¨‹å¼ï¼šæ­¥éª¤ã€å†³ç­–ç‚¹ã€åˆ†æ”¯
   - è§„åˆ™å¼ï¼šæ¡ä»¶ã€åŠ¨ä½œã€ä¼˜å…ˆçº§
   - ç»éªŒå¼ï¼šæ¨¡å¼ã€æ¡ˆä¾‹ã€ç»Ÿè®¡

3. **ç¤ºä¾‹éƒ¨åˆ†**
   - æ­£é¢ä¾‹å­ï¼ˆåº”è¯¥è¿™æ ·åšï¼‰
   - åé¢ä¾‹å­ï¼ˆé¿å…è¿™æ ·åšï¼‰
   - è¾¹ç•Œæƒ…å†µ

4. **è¯„ä¼°éƒ¨åˆ†**
   - æ•ˆæœæŒ‡æ ‡
   - é€‚ç”¨æ€§è¾¹ç•Œ
   - æ›´æ–°è§¦å‘æ¡ä»¶

### 11.4 æ··åˆçŸ¥è¯†æ¨¡å¼

åœ¨å®è·µä¸­ï¼Œä¸åŒç±»å‹çš„çŸ¥è¯†å¸¸å¸¸éœ€è¦ç»„åˆä½¿ç”¨ï¼š

#### åˆ†å±‚æ¶æ„
```
æˆ˜ç•¥å±‚ï¼ˆStrategicï¼‰
â”œâ”€â”€ æ„å›¾å£°æ˜å¼çŸ¥è¯†
â”‚   â””â”€â”€ é«˜å±‚ç›®æ ‡å’Œä»·å€¼è§‚
â”‚
æˆ˜æœ¯å±‚ï¼ˆTacticalï¼‰  
â”œâ”€â”€ è§„åˆ™å¼çŸ¥è¯†
â”‚   â””â”€â”€ å†³ç­–è§„åˆ™å’Œç­–ç•¥
â”‚
æ‰§è¡Œå±‚ï¼ˆOperationalï¼‰
â”œâ”€â”€ è¿‡ç¨‹å¼çŸ¥è¯†
â”‚   â””â”€â”€ å…·ä½“æ‰§è¡Œæ­¥éª¤
â””â”€â”€ çŠ¶æ€æœºçŸ¥è¯†
    â””â”€â”€ å·¥ä½œæµå’Œåè®®
```

#### çŸ¥è¯†ç»„åˆç¤ºä¾‹
```markdown
# ä»£ç å®¡æŸ¥å®Œæ•´çŸ¥è¯†

## 1. å£°æ˜å¼å±‚ï¼ˆä»·å€¼è§‚ï¼‰
- ä»£ç æ˜¯å†™ç»™äººçœ‹çš„
- è´¨é‡ä¼˜äºé€Ÿåº¦
- é¢„é˜²ä¼˜äºä¿®å¤

## 2. è§„åˆ™å¼å±‚ï¼ˆå†³ç­–ï¼‰
IF å¤æ‚åº¦ > é˜ˆå€¼ THEN è¦æ±‚é‡æ„
IF æµ‹è¯•ç¼ºå¤± THEN é˜»æ­¢åˆå¹¶
IF æ–‡æ¡£ä¸è¶³ THEN è¦æ±‚è¡¥å……

## 3. è¿‡ç¨‹å¼å±‚ï¼ˆæ‰§è¡Œï¼‰
1. é™æ€åˆ†æ
2. è¿è¡Œæµ‹è¯•
3. äººå·¥å®¡æŸ¥
4. åé¦ˆæ•´åˆ

## 4. ç»éªŒå¼å±‚ï¼ˆä¼˜åŒ–ï¼‰
- å¸¸è§é—®é¢˜æ¨¡å¼
- å›¢é˜Ÿç‰¹å®šçº¦å®š
- å†å²æ¡ˆä¾‹å‚è€ƒ
```

### 11.5 çŸ¥è¯†æ–‡æ¡£æœ€ä½³å®è·µ

#### 1. é€‰æ‹©åˆé€‚çš„çŸ¥è¯†ç±»å‹
- **ç›®æ ‡å¯¼å‘** â†’ å£°æ˜å¼
- **æµç¨‹æ ‡å‡†** â†’ è¿‡ç¨‹å¼  
- **å†³ç­–é€»è¾‘** â†’ è§„åˆ™å¼
- **å®è·µæ€»ç»“** â†’ ç»éªŒå¼

#### 2. ç¼–å†™é«˜è´¨é‡çŸ¥è¯†
- **å…·ä½“æ˜ç¡®**ï¼šé¿å…æ¨¡ç³Šè¡¨è¿°
- **å¯éªŒè¯**ï¼šåŒ…å«æˆåŠŸæ ‡å‡†
- **å¯æ›´æ–°**ï¼šæ ‡è®°ç‰ˆæœ¬å’Œæœ‰æ•ˆæœŸ
- **ç‹¬ç«‹å®Œæ•´**ï¼šå‡å°‘å¤–éƒ¨ä¾èµ–

#### 3. çŸ¥è¯†çš„ç”Ÿå‘½å‘¨æœŸ
```
åˆ›å»º â†’ éªŒè¯ â†’ åº”ç”¨ â†’ è¯„ä¼° â†’ æ›´æ–° â†’ å½’æ¡£
 â†‘                                    â†“
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æŒç»­æ”¹è¿›å¾ªç¯ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4. çŸ¥è¯†å†²çªè§£å†³
1. **ä¼˜å…ˆçº§æœºåˆ¶**ï¼šcritical > high > medium > low
2. **ç‰¹å¼‚æ€§åŸåˆ™**ï¼šå…·ä½“çŸ¥è¯†ä¼˜äºé€šç”¨çŸ¥è¯†
3. **æ—¶æ•ˆæ€§åŸåˆ™**ï¼šæ–°çŸ¥è¯†ä¼˜äºæ—§çŸ¥è¯†
4. **æ¥æºå¯ä¿¡åº¦**ï¼šå®æµ‹ç»éªŒ > ç†è®ºæ¨å¯¼

### 11.6 çŸ¥è¯†å³ç¨‹åºçš„å®ç°

çŸ¥è¯†æ–‡æ¡£æœ€ç»ˆä¼šè¢« Agent "æ‰§è¡Œ"ï¼š

```python
# ä¼ªä»£ç ï¼šçŸ¥è¯†æ‰§è¡Œå¼•æ“
class KnowledgeExecutor:
    def execute(self, knowledge, context):
        if knowledge.type == "declarative":
            return self.apply_principles(knowledge, context)
        elif knowledge.type == "procedural":
            return self.follow_steps(knowledge, context)
        elif knowledge.type == "rule-based":
            return self.evaluate_rules(knowledge, context)
        elif knowledge.type == "experiential":
            return self.match_patterns(knowledge, context)
```

è¿™ç§"çŸ¥è¯†å³ç¨‹åº"çš„è®¾è®¡è®© Agent èƒ½å¤Ÿï¼š
- åŠ¨æ€åŠ è½½å’Œå¸è½½çŸ¥è¯†
- ç»„åˆä¸åŒçŸ¥è¯†è§£å†³é—®é¢˜
- ä»æ‰§è¡Œä¸­å­¦ä¹ å’Œæ”¹è¿›
- åœ¨ä¸åŒæŠ½è±¡å±‚æ¬¡ä¸Šæ¨ç†

## 12. æœªæ¥å±•æœ›

### 12.1 è®¡åˆ’ä¸­çš„åŠŸèƒ½
- **åˆ†å¸ƒå¼æ‰§è¡Œ**ï¼šå¤š Agent å¹¶è¡Œåä½œ
- **è®°å¿†å…±äº«**ï¼šAgent é—´çš„çŸ¥è¯†ä¼ é€’
- **è‡ªé€‚åº”å­¦ä¹ **ï¼šæ ¹æ®æ•ˆæœè°ƒæ•´ç­–ç•¥
- **å¯è§†åŒ–ç›‘æ§**ï¼šæ‰§è¡Œè¿‡ç¨‹çš„å›¾å½¢åŒ–å±•ç¤º

### 12.2 ç ”ç©¶æ–¹å‘
- **è®°å¿†å‹ç¼©ç®—æ³•**ï¼šæ›´æ™ºèƒ½çš„é—å¿˜æœºåˆ¶
- **ä»»åŠ¡è§„åˆ’ä¼˜åŒ–**ï¼šè‡ªåŠ¨ä»»åŠ¡åˆ†è§£å’Œè°ƒåº¦
- **è·¨æ¨¡æ€èƒ½åŠ›**ï¼šå›¾åƒã€éŸ³é¢‘ç­‰å¤šæ¨¡æ€æ”¯æŒ
- **å®‰å…¨æœºåˆ¶**ï¼šæ‰§è¡Œéš”ç¦»å’Œæƒé™æ§åˆ¶

## 13. è°ƒè¯•ä¸ä¼˜åŒ–å®è·µ

### 13.1 è°ƒè¯•ç¬”è®°ç®¡ç†ç³»ç»Ÿ

ä¸ºäº†é˜²æ­¢è°ƒè¯•ç¬”è®°æ— é™å¢é•¿å½±å“æ€§èƒ½ï¼Œå®ç°äº†æ™ºèƒ½çš„ç¬”è®°ç®¡ç†ç³»ç»Ÿã€‚

#### 13.1.1 è‡ªåŠ¨å‹ç¼©æœºåˆ¶
```python
def compress_debug_notes(notes_path: str, max_keep_errors: int = 10, max_keep_strategies: int = 20):
    """å‹ç¼©è°ƒè¯•ç¬”è®°ï¼Œé˜²æ­¢æ–‡ä»¶è¿‡å¤§"""
    # 1. å½’æ¡£åŸæ–‡ä»¶
    archive_dir = Path(notes_path).parent / "debug_archive"
    archive_dir.mkdir(exist_ok=True)
    archive_name = f"debug_notes_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json"
    shutil.copy(notes_path, archive_dir / archive_name)
    
    # 2. å‹ç¼©ç­–ç•¥
    # - åªä¿ç•™æœ€è¿‘çš„Nä¸ªé”™è¯¯
    # - ä¿ç•™æˆåŠŸç‡æœ€é«˜çš„ç­–ç•¥
    # - æ¸…ç†è¿‡æœŸçš„æµ‹è¯•å†å²
    
    # 3. è‡ªåŠ¨æ¸…ç†æ—§å½’æ¡£ï¼ˆè¶…è¿‡7å¤©ï¼‰
    cutoff = datetime.now().timestamp() - (7 * 24 * 3600)
    for old_file in archive_dir.glob("debug_notes_*.json"):
        if old_file.stat().st_mtime < cutoff:
            old_file.unlink()
```

å®é™…æ•ˆæœï¼šå‹ç¼©ç‡è¾¾åˆ°73%ï¼Œä»åŸå§‹æ–‡ä»¶æ˜¾è‘—å‡å°ï¼Œä¿æŒäº†å…³é”®å­¦ä¹ ä¿¡æ¯ã€‚

#### 13.1.2 è°ƒè¯•ç­–ç•¥çŸ¥è¯†åŒ–
å°†å¸¸è§çš„è°ƒè¯•æ¨¡å¼æå–ä¸ºçŸ¥è¯†æ–‡ä»¶ï¼š

**syntax_fix_strategies.md**ï¼š
```markdown
# Pythonè¯­æ³•é”™è¯¯ä¿®å¤ç­–ç•¥

## æ ¸å¿ƒåŸåˆ™
**ä¸è¦é€è¡Œä¿®å¤è¯­æ³•é”™è¯¯ï¼** è¿™ä¼šå¯¼è‡´åå¤ä¿®å¤åŒæ ·çš„é—®é¢˜ã€‚

## æ¨èç­–ç•¥
1. **æ•´æ–‡ä»¶é‡å†™**ï¼šå¯¹äºç¼©è¿›å’Œæ‹¬å·é”™è¯¯ï¼Œé‡å†™æ•´ä¸ªæ–‡ä»¶
2. **ä½¿ç”¨ä¸“é—¨å·¥å…·**ï¼šfix_python_syntax_errorså·¥å…·
3. **æ‰¹é‡ä¿®å¤**ï¼šä¸€æ¬¡æ€§ä¿®å¤æ‰€æœ‰ç›¸å…³é”™è¯¯
```

### 13.2 å¤šAgentåä½œè°ƒè¯•æµç¨‹

#### 13.2.1 ä»»åŠ¡åˆ†å·¥
```python
# ç”ŸæˆAgent - ä¸“æ³¨äºå¿«é€Ÿäº¤ä»˜
generation_agent.interface = """ä»£ç ç”Ÿæˆä¸“å®¶
- å¿«é€Ÿç”Ÿæˆé«˜è´¨é‡ä»£ç 
- ç”Ÿæˆå³è¿”å›ï¼Œä¸åšè°ƒè¯•
- é‡åˆ°é—®é¢˜è®°å½•ä½†ä¸ä¿®å¤
"""

# è°ƒè¯•Agent - ä¸“æ³¨äºé”™è¯¯ä¿®å¤
debug_agent.interface = """è°ƒè¯•ä¸“å®¶
- ç»´æŠ¤è°ƒè¯•ç¬”è®°é¿å…é‡å¤ä¿®å¤
- æ™ºèƒ½è¯­æ³•é”™è¯¯ä¿®å¤ï¼ˆæ•´æ–‡ä»¶é‡å†™ï¼‰
- ç¡®ä¿100%æµ‹è¯•é€šè¿‡
"""

# åè°ƒAgent - æµç¨‹ç®¡ç†
coordinator.interface = """MDA Pipelineåè°ƒè€…
- è°ƒç”¨ç”ŸæˆAgentåˆ›å»ºä»£ç 
- è¿è¡Œæµ‹è¯•éªŒè¯
- å¦‚æœ‰å¤±è´¥ï¼Œè°ƒç”¨è°ƒè¯•Agentä¿®å¤
- å¾ªç¯ç›´åˆ°100%é€šè¿‡
"""
```

#### 13.2.2 è°ƒè¯•Agentå­¦ä¹ æœºåˆ¶
è°ƒè¯•Agenté€šè¿‡æŒä¹…åŒ–çš„debug_notes.jsonå®ç°ç´¯ç§¯å­¦ä¹ ï¼š

```json
{
  "successful_strategies": [
    {
      "error_pattern": "IndentationError",
      "solution": "ä½¿ç”¨fix_python_syntax_errorså·¥å…·",
      "success_count": 5,
      "confidence": 0.95
    }
  ],
  "failed_strategies": [
    {
      "error_pattern": "é€è¡Œä¿®å¤ç¼©è¿›",
      "reason": "å¯¼è‡´åå¤ä¿®å¤",
      "recommendation": "æ”¹ç”¨æ•´æ–‡ä»¶é‡å†™"
    }
  ]
}
```

### 13.3 æ€§èƒ½ä¼˜åŒ–æˆæœ

#### 13.3.1 æµ‹è¯•æˆåŠŸç‡æå‡
- **DeepSeek**ï¼šä»åå¤ä¿®å¤åˆ°ç¨³å®šé€šè¿‡
- **Kimi**ï¼šè¿ç»­ä¸¤æ¬¡è¿è¡Œ100%æˆåŠŸï¼Œæ— éœ€è°ƒè¯•ä»‹å…¥
- **æ‰§è¡Œæ—¶é—´**ï¼šä»5åˆ†é’Ÿä»¥ä¸Šä¼˜åŒ–åˆ°180-211ç§’

#### 13.3.2 å…³é”®æ”¹è¿›ç‚¹
1. **å·¥å…·åˆå¹¶ä¿®å¤**ï¼šè§£å†³äº†è°ƒè¯•Agentåªæœ‰ä¸€ä¸ªå·¥å…·çš„é—®é¢˜
2. **å‹ç¼©é€šçŸ¥æœºåˆ¶**ï¼šç”¨æˆ·èƒ½å¤Ÿäº†è§£ç³»ç»Ÿå†…éƒ¨ä¼˜åŒ–è¿‡ç¨‹
3. **çŸ¥è¯†æ–‡ä»¶åˆ†ç¦»**ï¼šç”Ÿæˆå’Œè°ƒè¯•ä½¿ç”¨ä¸åŒçš„ä¸“é—¨çŸ¥è¯†
4. **è°ƒè¯•ç¬”è®°å‹ç¼©**ï¼šé˜²æ­¢æ€§èƒ½é€€åŒ–ï¼Œä¿æŒé«˜æ•ˆæ‰§è¡Œ

## 14. æ€»ç»“

GenericReactAgent ä½œä¸ºè‡ªç„¶è¯­è¨€è™šæ‹Ÿæœºï¼Œæä¾›äº†ä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„ä»»åŠ¡æ‰§è¡Œæ¡†æ¶ã€‚é€šè¿‡æ¨¡æ‹Ÿä¼ ç»Ÿè®¡ç®—æœºçš„å†…å­˜å±‚æ¬¡å’Œæ‰§è¡Œæ¨¡å‹ï¼Œå®ƒèƒ½å¤Ÿï¼š

1. **ç†è§£å’Œæ‰§è¡Œ**å¤æ‚çš„è‡ªç„¶è¯­è¨€æŒ‡ä»¤
2. **ç§¯ç´¯å’Œåº”ç”¨**è·¨ä¼šè¯çš„ç»éªŒçŸ¥è¯†
3. **åè°ƒå’Œç®¡ç†**å¤šAgentåä½œç³»ç»Ÿ
4. **é€‚åº”å’Œä¼˜åŒ–**ä¸åŒçš„åº”ç”¨åœºæ™¯
5. **æŒç»­å­¦ä¹ **é€šè¿‡è°ƒè¯•ç¬”è®°å’ŒçŸ¥è¯†æå–æœºåˆ¶ä¸æ–­æ”¹è¿›

è¿™ç§è®¾è®¡ä½¿å¾— AI Agent ä¸ä»…æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œæ›´æ˜¯ä¸€ä¸ªå¯ä»¥æŒç»­å­¦ä¹ å’Œè¿›åŒ–çš„æ™ºèƒ½ç³»ç»Ÿã€‚é€šè¿‡å®è·µä¸­çš„ä¸æ–­ä¼˜åŒ–ï¼Œç³»ç»Ÿå±•ç°å‡ºäº†å¼ºå¤§çš„è‡ªé€‚åº”å’Œè‡ªæˆ‘æ”¹è¿›èƒ½åŠ›ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šAgentåä½œå’Œé”™è¯¯ä¿®å¤æ–¹é¢è¾¾åˆ°äº†äº§å“çº§çš„ç¨³å®šæ€§ã€‚