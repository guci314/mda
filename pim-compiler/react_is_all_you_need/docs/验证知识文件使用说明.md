# 验证知识文件使用说明

## 架构设计

- **系统提示词**：统一的 `system_prompt_minimal.md`
- **验证知识文件**：两个版本供选择
  - `validation_simplicity.md` - 大道至简版（默认）
  - `validation_procedural_justice.md` - 程序正义版

## 默认配置

Agent默认加载：
1. `system_prompt_minimal.md` - 系统提示词
2. `validation_simplicity.md` - 大道至简版验证知识（自动加载）

## 如何使用程序正义版

```python
from core.react_agent_minimal import ReactAgentMinimal

# 方法1：显式指定程序正义版
agent = ReactAgentMinimal(
    work_dir="/tmp/my_project",
    knowledge_files=[
        "knowledge/minimal/validation/validation_procedural_justice.md",
        # 其他知识文件...
    ]
)

# 方法2：Agent Creator中指定
creator.run("""
创建一个Agent，使用程序正义版验证：
knowledge_files: ['knowledge/minimal/validation/validation_procedural_justice.md']
""")
```

## 两个版本的区别

### 大道至简版（默认）
- **理念**：简单的往往是正确的
- **行为**：
  - 优先使用直接观察验证
  - 只在必要时创建脚本
  - 相信Agent的判断

### 程序正义版
- **理念**：过程透明可追溯
- **行为**：
  - 必须创建验证脚本
  - 强制符号主义验证
  - 留下验证证据

## 实验建议

```python
# 实验脚本
def test_validation_strategies():
    # 测试任务
    task = "创建一个返回JSON的函数并验证"

    # 大道至简版
    agent_simple = ReactAgentMinimal(
        work_dir="/tmp/test_simple",
        # 默认已加载validation_simplicity.md
    )
    result_simple = agent_simple.run(task)

    # 程序正义版
    agent_justice = ReactAgentMinimal(
        work_dir="/tmp/test_justice",
        knowledge_files=[
            "knowledge/minimal/validation/validation_procedural_justice.md"
        ]
    )
    result_justice = agent_justice.run(task)

    # 比较结果
    print("简单版是否创建脚本:", check_script_exists("/tmp/test_simple"))
    print("正义版是否创建脚本:", check_script_exists("/tmp/test_justice"))
```

## 选择建议

| 场景 | 推荐版本 | 原因 |
|-----|---------|------|
| 快速原型 | 大道至简 | 效率优先 |
| 生产环境 | 程序正义 | 质量保证 |
| 个人项目 | 大道至简 | 灵活性好 |
| 团队协作 | 程序正义 | 便于审查 |
| 调试问题 | 程序正义 | 过程清晰 |
| 简单任务 | 大道至简 | 避免过度 |

## 切换验证策略的方法

1. **临时切换**：在knowledge_files中指定
2. **项目级配置**：在项目的CLAUDE.md中配置
3. **全局配置**：修改react_agent_minimal.py的默认加载

## 注意事项

- 指定knowledge_files会覆盖默认的验证知识
- 两个版本不要同时加载
- 系统提示词保持不变，只切换验证知识

## 总结

通过分离系统提示词和验证知识，实现了：
- **灵活性**：可根据需求切换验证策略
- **简洁性**：系统提示词保持简单
- **实验性**：便于A/B测试对比

默认使用大道至简版，体现了"简单优先"的设计理念。