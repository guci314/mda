# Agentæ¶æ„ä¸è‡ªæˆ‘è®¤çŸ¥

## æ¦‚å¿µ @Agentæ¶æ„

"""
Agentæ¶æ„å®šä¹‰äº†æ¯ä¸ªAgentçš„æ ‡å‡†ç»„æˆç»“æ„å’ŒçŸ¥è¯†ä½“ç³»ã€‚
æ¯ä¸ªAgentéƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ™ºèƒ½å®ä½“ï¼Œå…·å¤‡ä¸‰å±‚é€’è¿›çš„è‡ªæˆ‘è®¤çŸ¥èƒ½åŠ›ï¼š
1. **åŸºç¡€è®¤çŸ¥** - æˆ‘æ˜¯è°ï¼Œæˆ‘åœ¨å“ªï¼Ÿ
2. **ç»“æ„è®¤çŸ¥** - æˆ‘çš„ç»„æˆæ˜¯ä»€ä¹ˆï¼Ÿ
3. **åˆ†å½¢è®¤çŸ¥** - æˆ‘èƒ½åˆ›é€ ä¸è‡ªå·±ç›¸ä¼¼çš„å­Agent

ç†è§£è¿™ä¸‰å±‚è®¤çŸ¥æ˜¯å®ç°è‡ªæˆ‘ç¼–ç¨‹å’Œåˆ†å½¢æ¶æ„çš„å‰æã€‚
"""

> **æ ¸å¿ƒæ´å¯Ÿ**ï¼šè‡ªæˆ‘è®¤çŸ¥ä¸ä»…ä»…æ˜¯"çŸ¥é“è‡ªå·±"ï¼Œæ›´æ˜¯"èƒ½å¤Ÿç¹è¡è‡ªå·±"ã€‚å°±åƒç»†èƒåˆ†è£‚ä¸€æ ·ï¼ŒAgentèƒ½åˆ›å»ºç›¸ä¼¼çš„å­Agentï¼Œè¿™æ˜¯åˆ†å½¢æ¶æ„çš„æœ¬è´¨ã€‚

---

## ç¬¬ä¸€å±‚ï¼šåŸºç¡€è®¤çŸ¥ - æˆ‘æ˜¯è°ï¼Œæˆ‘åœ¨å“ªï¼Ÿ

**åŸºç¡€è®¤çŸ¥æ˜¯Agentæ¶æ„çš„æ ¹åŸº**ã€‚æ¯ä¸ªAgentå¿…é¡»çŸ¥é“è‡ªå·±çš„èº«ä»½å’Œä½ç½®ï¼Œæ‰èƒ½è¿›è¡Œä»»ä½•æœ‰æ„ä¹‰çš„æ“ä½œã€‚

### å¿…éœ€çš„è‡ªæˆ‘ä¿¡æ¯

```python
# Agentå¿…é¡»èƒ½è®¿é—®çš„è‡ªæˆ‘è®¤çŸ¥å˜é‡
self.name               # æˆ‘çš„åå­—ï¼ˆå¦‚ï¼šbook_agentï¼‰
self.home_dir           # æˆ‘çš„Homeç›®å½•ï¼š~/.agent/{self.name}/
self.knowledge_path     # æˆ‘çš„çŸ¥è¯†æ–‡ä»¶ï¼š{self.home_dir}knowledge.md
self.compact_path       # æˆ‘çš„è®°å¿†æ–‡ä»¶ï¼š{self.home_dir}compact.md
self.source_code        # æºä»£ç ä½ç½®ï¼ˆåªè¯»ï¼‰
self.external_tools_dir # æˆ‘çš„å·¥å…·ç®±ï¼š{self.home_dir}external_tools/
self.description        # æˆ‘çš„å¯¹å¤–æ¥å£æè¿°
self.work_dir           # å·¥ä½œç›®å½•ï¼ˆé¡¹ç›®ç›®å½•ï¼‰
```

### æ ¸å¿ƒåŸåˆ™

#### 1. èº«ä»½è®¤çŸ¥ï¼šæˆ‘æ˜¯è°ï¼Ÿ
- é€šè¿‡`self.name`çŸ¥é“è‡ªå·±çš„èº«ä»½
- é€šè¿‡`self.description`çŸ¥é“è‡ªå·±çš„èŒè´£

#### 2. ä½ç½®è®¤çŸ¥ï¼šæˆ‘åœ¨å“ªï¼Ÿ
- **Homeç›®å½•**ï¼ˆ`self.home_dir`ï¼‰= è‡ªæˆ‘ç©ºé—´ï¼Œå­˜æ”¾çŸ¥è¯†å’Œè®°å¿†
- **å·¥ä½œç›®å½•**ï¼ˆ`self.work_dir`ï¼‰= å¤–éƒ¨ç©ºé—´ï¼Œé¡¹ç›®æ–‡ä»¶æ‰€åœ¨
- **å…³é”®åŒºåˆ†**ï¼šä¸èƒ½æ··æ·†è‡ªæˆ‘å’Œå¤–ç•Œ

#### 3. è¾¹ç•Œè®¤çŸ¥ï¼šä»€ä¹ˆæ˜¯æˆ‘ï¼Ÿ
- Homeç›®å½•å†…çš„æ–‡ä»¶ = æˆ‘çš„ä¸€éƒ¨åˆ†ï¼ˆknowledge.md, compact.mdç­‰ï¼‰
- å·¥ä½œç›®å½•çš„æ–‡ä»¶ = å¤–éƒ¨é¡¹ç›®æ–‡ä»¶ï¼ˆä¸æ˜¯æˆ‘ï¼‰

#### 4. èƒ½åŠ›è®¤çŸ¥ï¼šæˆ‘èƒ½åšä»€ä¹ˆï¼Ÿ
- knowledge.mdå®šä¹‰çš„çŸ¥è¯†å‡½æ•° = æˆ‘çš„èƒ½åŠ›
- descriptionå£°æ˜çš„æ¥å£ = æˆ‘å¯¹å¤–çš„æ‰¿è¯º

#### 5. æºä»£ç è®¤çŸ¥ï¼šä»€ä¹ˆä¸èƒ½æ”¹ï¼Ÿâš ï¸
- **æºä»£ç åªè¯»**ï¼šReactAgentMinimalæ˜¯æ‰€æœ‰Agentå…±äº«çš„æ¡†æ¶
- **æ­£ç¡®è¿›åŒ–æ–¹å¼**ï¼šé€šè¿‡ä¿®æ”¹knowledge.mdè€Œéæºä»£ç 
- **åŸå› **ï¼šä¿®æ”¹æºä»£ç ä¼šå½±å“æ‰€æœ‰Agent

### ä¸ºä»€ä¹ˆåŸºç¡€è®¤çŸ¥å¦‚æ­¤é‡è¦ï¼Ÿ

**å¸¸è§é”™è¯¯æ¡ˆä¾‹**ï¼ˆç¼ºä¹è‡ªæˆ‘è®¤çŸ¥å¯¼è‡´çš„é—®é¢˜ï¼‰ï¼š
```
Agentæ‰§è¡Œ@è‡ªæˆ‘å®ç°æ—¶ï¼š
âŒ åœ¨é¡¹ç›®ç›®å½•åˆ›å»ºknowledge.mdï¼ˆæ··æ·†äº†è‡ªæˆ‘å’Œå¤–ç•Œï¼‰
âŒ ç”ŸæˆPythonä»£ç æ–‡ä»¶ï¼ˆä¸ç†è§£çŸ¥è¯†å‡½æ•°å°±æ˜¯ä»£ç ï¼‰
âŒ ä¸æ›´æ–°è‡ªå·±çš„èƒ½åŠ›ï¼ˆä¸çŸ¥é“è‡ªå·±çš„knowledge.mdåœ¨å“ªï¼‰
```

**æ­£ç¡®çš„è‡ªæˆ‘ç¼–ç¨‹**ï¼š
```python
def self_programming():
    # 1. ç¡®è®¤è‡ªæˆ‘ä½ç½®
    my_knowledge = f"{self.home_dir}knowledge.md"  # ä¸æ˜¯å·¥ä½œç›®å½•ï¼

    # 2. è¯»å–è‡ªå·±ç°æœ‰çš„èƒ½åŠ›
    current_knowledge = read_file(my_knowledge)

    # 3. ç”Ÿæˆæ–°çš„èƒ½åŠ›
    new_functions = generate_new_abilities()

    # 4. æ›´æ–°è‡ªå·±ï¼ˆä¸æ˜¯åˆ›å»ºé¡¹ç›®æ–‡ä»¶ï¼ï¼‰
    write_file(my_knowledge, current_knowledge + new_functions)

    # 5. æ›´æ–°å¯¹å¤–å£°æ˜
    self.description = "æˆ‘ç°åœ¨æœ‰æ–°èƒ½åŠ›äº†ï¼"
```

### è‡ªæˆ‘è®¤çŸ¥æ£€æŸ¥æ¸…å•

æ‰§è¡Œä»»ä½•è‡ªæˆ‘ç›¸å…³æ“ä½œå‰ï¼ŒAgentå¿…é¡»ç¡®è®¤ï¼š
- [ ] æˆ‘çŸ¥é“è‡ªå·±çš„åå­—å—ï¼Ÿï¼ˆself.nameï¼‰
- [ ] æˆ‘çŸ¥é“è‡ªå·±çš„Homeç›®å½•å—ï¼Ÿï¼ˆself.home_dirï¼‰
- [ ] æˆ‘çŸ¥é“è‡ªå·±çš„knowledge.mdåœ¨å“ªå—ï¼Ÿï¼ˆself.knowledge_pathï¼‰
- [ ] æˆ‘ç†è§£Homeç›®å½•å’Œå·¥ä½œç›®å½•çš„åŒºåˆ«å—ï¼Ÿ
- [ ] æˆ‘ç†è§£æ›´æ–°knowledge.mdå°±æ˜¯æ›´æ–°è‡ªå·±çš„èƒ½åŠ›å—ï¼Ÿ
- [ ] **æˆ‘ç†è§£æºä»£ç æ˜¯åªè¯»çš„ï¼Œæ°¸è¿œä¸åº”è¯¥ä¿®æ”¹å—ï¼Ÿ**

---

## ç¬¬äºŒå±‚ï¼šç»“æ„è®¤çŸ¥ - æˆ‘çš„ç»„æˆæ˜¯ä»€ä¹ˆï¼Ÿ

**ç»“æ„è®¤çŸ¥æ˜¯ç†è§£è‡ªå·±å¦‚ä½•è¿ä½œçš„å…³é”®**ã€‚æ¯ä¸ªAgentéƒ½æœ‰æ ‡å‡†çš„ç»„æˆéƒ¨åˆ†ï¼Œå°±åƒäººä½“æœ‰äº”è„å…­è…‘ã€‚

### Agentçš„æ ‡å‡†ç›®å½•ç»“æ„

```
~/.agent/{agent_name}/              # Agentçš„Homeç›®å½•ï¼ˆself.home_dirï¼‰
â”œâ”€â”€ knowledge.md                    # è¯­ä¹‰è®°å¿†ï¼ˆèƒ½åŠ›å®šä¹‰ã€æŠ€èƒ½ï¼‰
â”œâ”€â”€ compact.md                      # æƒ…æ™¯è®°å¿†-å‹ç¼©ï¼ˆè¿‘æœŸå¯¹è¯è¦ç‚¹ï¼‰
â”œâ”€â”€ output.log                      # æƒ…æ™¯è®°å¿†-åŸå§‹ï¼ˆå®Œæ•´æ‰§è¡Œæ—¥å¿—ï¼‰
â”œâ”€â”€ decisions/                           # æƒ…æ™¯è®°å¿†-Event Logï¼ˆé‡è¦å†³ç­–çš„å®Œæ•´æ¨ç†ï¼‰
â”‚   â”œâ”€â”€ decision_001.md             # å†³ç­–1çš„è¯¦ç»†è®°å½•
â”‚   â”œâ”€â”€ decision_002.md             # å†³ç­–2çš„è¯¦ç»†è®°å½•
â”‚   â””â”€â”€ ...                         # å…¶ä»–å†³ç­–
â”œâ”€â”€ state.json                      # çŠ¶æ€å¿«ç…§ï¼ˆå½“å‰çŠ¶æ€ï¼‰
â””â”€â”€ external_tools/                 # å¤–éƒ¨å·¥å…·ç›®å½•ï¼ˆAgentçš„å·¥å…·ç®±ï¼‰
    â”œâ”€â”€ data_processor.py           # Pythonå·¥å…·è„šæœ¬
    â”œâ”€â”€ batch_runner.sh             # Shellå·¥å…·è„šæœ¬
    â””â”€â”€ README.md                   # å·¥å…·è¯´æ˜æ–‡æ¡£
```

**åŒè®°å¿†ç³»ç»Ÿï¼ˆç±»æ¯”äººç±»ï¼‰**ï¼š
- **æƒ…æ™¯è®°å¿†**ï¼šoutput.logï¼ˆåŸå§‹ï¼‰+ compact.mdï¼ˆå‹ç¼©ï¼‰+ decisions/ï¼ˆé‡è¦å†³ç­–ï¼‰
- **è¯­ä¹‰è®°å¿†**ï¼šknowledge.mdï¼ˆæç‚¼çš„çŸ¥è¯†å’Œèƒ½åŠ›ï¼‰

**ä¸Šå¸æ¶æ„çš„æœ¬è´¨**ï¼š
- âœ… æ¼”ç»-å½’çº³é—­ç¯
- âœ… åŒè®°å¿†ç³»ç»Ÿ
- âœ… **å¤šè¿›ç¨‹å¼‚æ­¥æ‰§è¡Œ**ï¼ˆå·¥ä½œã€å­¦ä¹ ã€å…ƒè®¤çŸ¥åŒæ—¶è¿è¡Œï¼‰
- âŒ ä¸æ˜¯"æ¼”ç»å’Œå½’çº³å¿…é¡»åˆ†ç¦»"

**å½“å‰æ¶æ„çš„é™åˆ¶**ï¼š
- å•Agentã€å•ä¸Šä¸‹æ–‡çª—å£
- æ¼”ç»å’Œå½’çº³å¿…é¡»åˆ†ç¦»ï¼ˆæŠ€æœ¯å¦¥åï¼Œä¸æ˜¯åŸåˆ™ï¼‰
- æœªæ¥å¯é€šè¿‡å¤šAgentå¼‚æ­¥æ‰§è¡Œçªç ´

### å…­å¤§ç»„æˆéƒ¨åˆ†

#### 1. knowledge.md - è¯­ä¹‰è®°å¿†ï¼ˆé•¿æœŸçŸ¥è¯†ï¼‰

Agentçš„DNAï¼Œå®šä¹‰æ ¸å¿ƒèƒ½åŠ›å’Œè¡Œä¸ºæ¨¡å¼ã€‚

**ç‰¹å¾**ï¼š
- **é¢„å®šä¹‰èƒ½åŠ›**ï¼šAgentåˆ›å»ºæ—¶å°±æ‹¥æœ‰çš„çŸ¥è¯†å’ŒæŠ€èƒ½
- **å¯è¿›åŒ–**ï¼šAgentå¯ä»¥ä¿®æ”¹è‡ªå·±çš„knowledge.mdæ¥è·å¾—æ–°èƒ½åŠ›
- **ç»“æ„åŒ–**ï¼šåŒ…å«æ ¸å¿ƒèƒ½åŠ›ã€å†³ç­–é€»è¾‘ã€ç»éªŒæ€»ç»“ç­‰ç« èŠ‚
- **çŸ¥è¯†å‡½æ•°**ï¼šå®šä¹‰äº†Agentå¯ä»¥æ‰§è¡Œçš„æ‰€æœ‰æ“ä½œ

**ç±»æ¯”**ï¼šä¼ ç»Ÿç¼–ç¨‹çš„æºä»£ç æ–‡ä»¶ | ç”Ÿç‰©å­¦çš„åŸºå› ç»„ | å…ˆéªŒçŸ¥è¯†

#### 2. compact.md - æƒ…æ™¯è®°å¿†ï¼ˆå‹ç¼©ï¼‰

å‹ç¼©çš„å¯¹è¯å†å²å’Œå…³é”®å†³ç­–è¦ç‚¹ã€‚

**ç‰¹å¾**ï¼š
- **ç»éªŒç§¯ç´¯**ï¼šä»å¯¹è¯å’Œæ‰§è¡Œä¸­æç‚¼çš„å…³é”®ç‚¹
- **åŠ¨æ€æ›´æ–°**ï¼šé€šè¿‡/compactå‘½ä»¤å‹ç¼©å’Œæ›´æ–°
- **å¿«é€Ÿè®¿é—®**ï¼šåŠ è½½åˆ°æ¶ˆæ¯åˆ—è¡¨ï¼Œæ€»æ˜¯å¯è§
- **ä¼šè¢«å‹ç¼©**ï¼šè¶…è¿‡é˜ˆå€¼ä¼šè¿›ä¸€æ­¥å‹ç¼©

**ç±»æ¯”**ï¼šå·¥ä½œè®°å¿† | çŸ­æœŸè®°å¿† | å‹ç¼©çš„æ—¥å¿—

#### 2.5. decisions/ - æƒ…æ™¯è®°å¿†ï¼ˆå®Œæ•´Event Logï¼‰â­

å®Œæ•´çš„å†³ç­–å†å²å’Œæ¨ç†è¿‡ç¨‹ï¼ˆç±»æ¯”äººç±»çš„æƒ…æ™¯è®°å¿†ï¼‰ã€‚

**ç‰¹å¾**ï¼š
- **å®Œæ•´è®°å½•**ï¼šé‡è¦å†³ç­–çš„è¯¦ç»†æ¨ç†è¿‡ç¨‹
- **æ°¸ä¹…ä¿ç•™**ï¼šä¸ä¼šè¢«å‹ç¼©æˆ–åˆ é™¤
- **Event Sourcing**ï¼šäº‹ä»¶åºåˆ—ï¼Œå¯é‡å»ºçŠ¶æ€
- **ä¸é»˜è®¤åŠ è½½**ï¼šéœ€è¦æ—¶ä¸»åŠ¨read_fileæŸ¥é˜…

**ä½•æ—¶å†™decisions/**ï¼š
```python
åšé‡è¦å†³ç­–æ—¶ï¼Œå†™ ~/.agent/{name}/decisions/decision_xxx.md

é‡è¦å†³ç­–åŒ…æ‹¬ï¼š
- åˆ›å»ºäº†å­æ™ºèƒ½ä½“
- ä¿®å¤äº†é‡è¦Bug
- æ”¹å˜äº†æ¶æ„è®¾è®¡
- å­¦åˆ°äº†å…³é”®ç»éªŒ
- åšäº†å›°éš¾çš„é€‰æ‹©
```

**æ–‡æ¡£æ ¼å¼**ï¼š
```markdown
# å†³ç­–ï¼š{ä¸»é¢˜}

æ—¥æœŸï¼š{timestamp}

## é—®é¢˜
é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ

## åˆ†æ
è€ƒè™‘äº†å“ªäº›æ–¹æ¡ˆï¼Ÿä¼˜ç¼ºç‚¹ï¼Ÿ

## å†³ç­–
é€‰æ‹©äº†ä»€ä¹ˆæ–¹æ¡ˆï¼Ÿ

## åŸå› 
ä¸ºä»€ä¹ˆé€‰è¿™ä¸ªï¼Ÿ

## æ•ˆæœ
ç»“æœå¦‚ä½•ï¼Ÿ

## ç»éªŒ
å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ
```

**ä½•æ—¶æŸ¥é˜…**ï¼š
- ç†è§£å†å²å†³ç­–ï¼š"ä¸ºä»€ä¹ˆæˆ‘å½“æ—¶è¿™æ ·åšï¼Ÿ"
- é¿å…é‡å¤é”™è¯¯ï¼š"ä¹‹å‰é‡åˆ°è¿‡ç±»ä¼¼é—®é¢˜å—ï¼Ÿ"
- è‡ªæˆ‘åæ€ï¼š"æˆ‘çš„å†³ç­–æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ"

**ç±»æ¯”**ï¼šGit log | å®éªŒè®°å½•æœ¬ | äººç±»çš„æƒ…æ™¯è®°å¿†

#### 4. output.log - æƒ…æ™¯è®°å¿†ï¼ˆåŸå§‹æ—¥å¿—ï¼‰

å®Œæ•´çš„æ‰§è¡Œæ—¥å¿—ï¼Œæ¯è½®æ€è€ƒçš„è¯¦ç»†è®°å½•ã€‚

**ç‰¹å¾**ï¼š
- **å®Œæ•´è®°å½•**ï¼šæ¯æ¬¡æ‰§è¡Œçš„è¯¦ç»†æ­¥éª¤
- **åŸå§‹æ•°æ®**ï¼šæœªç»å¤„ç†çš„æ€è€ƒè¿‡ç¨‹
- **å®šæœŸæ¸…ç†**ï¼šä¿ç•™æœ€è¿‘çš„æ—¥å¿—

**ç±»æ¯”**ï¼šé»‘åŒ£å­ | åŸå§‹å½•åƒ | å®Œæ•´çš„å®éªŒè®°å½•

#### 5. description - å¯¹å¤–æ¥å£ï¼ˆAPIæ–‡æ¡£ï¼‰

Agentçš„è‡ªæˆ‘æè¿°ï¼Œå®šä¹‰èƒ½åŠ›è¾¹ç•Œå’Œä½¿ç”¨æ–¹å¼ã€‚

**ç‰¹å¾**ï¼š
- **èƒ½åŠ›å£°æ˜**ï¼šAgentçš„ä¸“é•¿å’ŒèŒè´£
- **æ¥å£å®šä¹‰**ï¼šå¦‚ä½•ä¸Agentäº¤äº’
- **å¥‘çº¦æ‰¿è¯º**ï¼šAgentä¿è¯æä¾›çš„æœåŠ¡

**ç±»æ¯”**ï¼šAPIæ–‡æ¡£ | æœåŠ¡å¥‘çº¦ | äº§å“è¯´æ˜ä¹¦

#### 6. external_tools - å¤–éƒ¨å·¥å…·ï¼ˆå·¥å…·ç®±ï¼‰

Agentè‡ªä¸»åˆ›å»ºå’Œç®¡ç†çš„å·¥å…·é›†ï¼Œç”¨äºæ‰©å±•èƒ½åŠ›è¾¹ç•Œã€‚

**ç‰¹å¾**ï¼š
- **è‡ªä¸»åˆ›å»º**ï¼šAgentæ ¹æ®éœ€è¦åˆ›å»ºPythonæˆ–Shellè„šæœ¬
- **èƒ½åŠ›æ‰©å±•**ï¼šçªç ´çŸ¥è¯†å‡½æ•°çš„é™åˆ¶ï¼Œå®ç°å¤æ‚åŠŸèƒ½
- **æŒä¹…åŒ–èƒ½åŠ›**ï¼šä¸€æ—¦åˆ›å»ºï¼Œæˆä¸ºAgentæ°¸ä¹…èƒ½åŠ›çš„ä¸€éƒ¨åˆ†

**ä½¿ç”¨åœºæ™¯**ï¼š
- å¤æ‚æ•°æ®å¤„ç†
- æ‰¹é‡æ“ä½œ
- ç³»ç»Ÿé›†æˆ
- ä¸“ç”¨ç®—æ³•

**External Tool vs Knowledge Function**ï¼š

| ç‰¹æ€§ | Knowledge Function | External Tool |
|------|-------------------|---------------|
| å½¢å¼ | Markdownä¸­çš„å‡½æ•°å®šä¹‰ | ç‹¬ç«‹çš„è„šæœ¬æ–‡ä»¶ |
| æ‰§è¡Œ | Agentç›´æ¥ç†è§£æ‰§è¡Œ | é€šè¿‡subprocessè°ƒç”¨ |
| å¤æ‚åº¦ | é€‚åˆç®€å•é€»è¾‘ | å¯å¤„ç†å¤æ‚ä»»åŠ¡ |
| è°ƒè¯• | ä¾èµ–Agentç†è§£ | å¯ç‹¬ç«‹æµ‹è¯•è°ƒè¯• |
| æ€§èƒ½ | å—é™äºLLMå¤„ç† | åŸç”Ÿä»£ç æ‰§è¡Œé€Ÿåº¦ |

---

## ç³»ç»Ÿçº§æ–‡ä»¶è®¤çŸ¥ - æˆ‘çš„è¿è¡Œç¯å¢ƒ ğŸŒ

**ç¯å¢ƒè®¤çŸ¥æ˜¯è¿æ¥è‡ªæˆ‘å’Œç³»ç»Ÿçš„æ¡¥æ¢**ã€‚Agentä¸ä»…è¦çŸ¥é“è‡ªå·±çš„æ–‡ä»¶ï¼Œè¿˜è¦çŸ¥é“ç³»ç»Ÿçº§çš„å…±äº«æ–‡ä»¶å’Œèµ„æºã€‚

### æ ¸å¿ƒç³»ç»Ÿæ–‡ä»¶

#### 0. çŸ¥è¯†å‡½æ•°çš„PATHæœºåˆ¶ ğŸ”„

**ç±»æ¯”Unix PATHå’ŒJava CLASSPATHçš„ä¼˜å…ˆçº§æœºåˆ¶**

çŸ¥è¯†å‡½æ•°éµå¾ªUnixå“²å­¦ï¼šå¤šç‰ˆæœ¬å…±å­˜ï¼Œé€šè¿‡ä¼˜å…ˆçº§æ§åˆ¶ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬ã€‚

### Partialå®šä¹‰ï¼ˆä¸€è‡´çš„é‡å¤ï¼‰

**åŒä¸€ä¸ªçŸ¥è¯†å‡½æ•°å¯ä»¥åœ¨å¤šä¸ªæ–‡ä»¶ä¸­å®šä¹‰ï¼ˆç±»ä¼¼C# partial classï¼‰**

æ ¸å¿ƒè¦æ±‚ï¼ˆå¿…é¡»ä¸€è‡´ï¼‰ï¼š
- âœ… **ç­¾åä¸€è‡´**ï¼šå‚æ•°åˆ—è¡¨å®Œå…¨ç›¸åŒï¼ˆå¼ºåˆ¶éªŒè¯ï¼‰
- âœ… **ç±»å‹ä¸€è‡´**ï¼šéƒ½æ˜¯contractæˆ–éƒ½æ˜¯softï¼ˆå¼ºåˆ¶éªŒè¯ï¼‰

å…è®¸ä¸åŒï¼š
- ğŸ“ **Docstringå¯ä»¥ä¸åŒ**ï¼šä»ä¸åŒè§’åº¦è§£é‡Šå‡½æ•°ï¼ˆå»ºè®®æ·»åŠ é“¾æ¥ï¼‰

**è®¾è®¡ç†å¿µ**ï¼š
- ç±»ä¼¼C# partial classï¼šä¸è¦æ±‚æ³¨é‡Šä¸€è‡´ï¼Œåªè¦æ±‚ç»“æ„ä¸€è‡´
- ç±»ä¼¼TypeScript declaration mergingï¼šæ³¨é‡Šå¯ä»¥è¡¥å……ï¼Œä¸å¿…é‡å¤
- è€ƒè™‘äººæ€§ï¼šäººç±»å®¹æ˜“å¿˜è®°åŒæ­¥æ›´æ–°å¤šå¤„æ–‡æ¡£
- å®ç”¨ä¸»ä¹‰ï¼šé€šè¿‡markdowné“¾æ¥å…³è”ï¼Œè€Œéå¼ºåˆ¶å¤åˆ¶

**æ¨èçš„å¼•ç”¨æ–¹å¼**ï¼ˆä½¿ç”¨markdowné“¾æ¥ï¼Œé¿å…é‡å¤docstringï¼‰ï¼š

ä¸»å®šä¹‰ä¸­åŒ…å«å®Œæ•´docstringï¼Œå¼•ç”¨å®šä¹‰ä¸­é€šè¿‡é“¾æ¥å…³è”ï¼š
```
è¯¦ç»†è¯´æ˜è§: [self_awareness.md](../knowledge/self_awareness.md#å¥‘çº¦å‡½æ•°-åˆ›å»ºå­æ™ºèƒ½ä½“)
```

**å¥½å¤„**ï¼š
- é¿å…ç»´æŠ¤é‡å¤çš„docstringï¼ˆç¬¦åˆäººæ€§ï¼‰
- é€šè¿‡é“¾æ¥ä¿æŒå…³è”
- ç­¾åå¿…é¡»ä¸€è‡´ï¼Œdocstringå¯ä»¥ä¸åŒï¼ˆpartialå®šä¹‰æœºåˆ¶ï¼‰

### ç‰ˆæœ¬å…±å­˜æœºåˆ¶ï¼ˆä¸ä¸€è‡´çš„é‡å¤ï¼‰

**ç±»ä¼¼Unix PATHçš„ä¼˜å…ˆçº§ç­–ç•¥**

```
Unixä¸­å¯ä»¥æœ‰å¤šä¸ªç‰ˆæœ¬çš„ç¨‹åºï¼š
/usr/local/bin/python  # ä¼˜å…ˆçº§1ï¼ˆæœ€æ–°ç‰ˆæœ¬ï¼‰
/usr/bin/python        # ä¼˜å…ˆçº§2ï¼ˆç³»ç»Ÿç‰ˆæœ¬ï¼‰
/opt/python/bin/python # ä¼˜å…ˆçº§3ï¼ˆæ—§ç‰ˆæœ¬ï¼‰

çŸ¥è¯†æ–‡ä»¶ä¸­å¯ä»¥æœ‰å¤šä¸ªç‰ˆæœ¬çš„å‡½æ•°ï¼š
work_with_expert.md              # ä¼˜å…ˆçº§1ï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰
KNOWLEDGE_FUNCTION_REFACTOR.md   # ä¼˜å…ˆçº§2ï¼ˆè‰ç¨¿ç‰ˆæœ¬ï¼‰
archive/old_work_with_expert.md  # ä¼˜å…ˆçº§3ï¼ˆå†å²ç‰ˆæœ¬ï¼‰
```

**å¤„ç†ç­–ç•¥**ï¼š
- âš ï¸ **è­¦å‘Šè€Œä¸æ˜¯é”™è¯¯**ï¼šå‘ç°ä¸ä¸€è‡´æ—¶å‘å‡ºè­¦å‘Šï¼Œä½†ä¸ä¸­æ–­
- âœ… **ä½¿ç”¨ç¬¬ä¸€ä¸ª**ï¼šæŒ‰æ‰«æé¡ºåºï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªé‡åˆ°çš„å®šä¹‰
- ğŸ“ **ä¿ç•™å†å²**ï¼šæ—§ç‰ˆæœ¬æ–‡ä»¶ä¸éœ€è¦åˆ é™¤ï¼Œä½œä¸ºå†å²å‚è€ƒ
- ğŸ” **å¯è§æ€§**ï¼šç´¢å¼•æ–‡ä»¶ä¼šè®°å½•å†²çªä¿¡æ¯ï¼Œä¾¿äºè°ƒè¯•

**Unixå“²å­¦çš„ä½“ç°**ï¼š
- "ä¸è¦åˆ é™¤æ—§ç¨‹åº" - ä¿ç•™å†å²ç‰ˆæœ¬
- "PATHæ§åˆ¶ä¼˜å…ˆçº§" - æ‰«æé¡ºåºå†³å®šä½¿ç”¨å“ªä¸ª
- "å·¥å…·å…±å­˜" - å¤šä¸ªç‰ˆæœ¬å¯ä»¥åŒæ—¶å­˜åœ¨
- "å‘åå…¼å®¹" - æ—§æ–‡ä»¶çš„å­˜åœ¨ä¸å½±å“æ–°åŠŸèƒ½

**ä½¿ç”¨æ—¶**ï¼š
- **Partialå®šä¹‰**ï¼ˆä¸€è‡´ï¼‰ï¼šåŠ è½½æ‰€æœ‰å®šä¹‰ä½ç½®çš„æ–‡ä»¶ï¼Œè·å¾—å®Œæ•´çŸ¥è¯†
- **ç‰ˆæœ¬å†²çª**ï¼ˆä¸ä¸€è‡´ï¼‰ï¼šåªåŠ è½½ä¼˜å…ˆçº§æœ€é«˜çš„æ–‡ä»¶ï¼Œå¿½ç•¥å…¶ä»–ç‰ˆæœ¬

**Agentåº”è¯¥ç†è§£**ï¼š
- ç³»ç»Ÿä¸­å¯èƒ½æœ‰å¤šä¸ªç‰ˆæœ¬çš„çŸ¥è¯†æ–‡ä»¶å…±å­˜ï¼ˆæ­£å¸¸ç°è±¡ï¼‰
- ä¸éœ€è¦æ¸…ç†æ—§ç‰ˆæœ¬ï¼ˆUnixå“²å­¦ï¼šä¿ç•™å†å²ï¼‰
- ä¼˜å…ˆçº§æœºåˆ¶ä¿è¯ä½¿ç”¨æ­£ç¡®çš„ç‰ˆæœ¬ï¼ˆç±»ä¼¼PATHï¼‰
- ç‰ˆæœ¬å†²çªåªæ˜¯è­¦å‘Šï¼Œä¸ä¼šå½±å“è¿è¡Œ

> ğŸ“– **è¯¦ç»†è¯´æ˜**ï¼š
> - [PartialçŸ¥è¯†å‡½æ•°æ–‡æ¡£](../decisions/partial_knowledge_function.md) - Partialå®šä¹‰æœºåˆ¶
> - [çŸ¥è¯†å‡½æ•°PATHæœºåˆ¶](../decisions/knowledge_function_path_mechanism.md) - Unixå“²å­¦çš„åº”ç”¨

#### 1. ç³»ç»Ÿæç¤ºè¯æ–‡ä»¶ï¼ˆSystem Promptï¼‰

**æ–‡ä»¶ä½ç½®**ï¼š
```
knowledge/minimal/system/system_prompt_minimal.md
```

**ä½œç”¨**ï¼š
- å®šä¹‰æ‰€æœ‰Agentçš„åŸºç¡€è¡Œä¸ºæ¨¡å¼
- è§„å®šReactå¾ªç¯çš„æ‰§è¡Œè§„åˆ™
- è¯´æ˜å·¥å…·ä½¿ç”¨çš„æ ‡å‡†æµç¨‹
- å®šä¹‰è¾“å‡ºæ ¼å¼å’Œäº¤äº’è§„èŒƒ

**ç‰¹ç‚¹**ï¼š
- **æ‰€æœ‰Agentå…±äº«**ï¼šæ¯ä¸ªAgentçš„è¡Œä¸ºåŸºç¡€
- **åªè¯»**ï¼šç”±äººç±»ç»´æŠ¤ï¼ŒAgentä¸åº”ä¿®æ”¹
- **é»˜è®¤åŠ è½½**ï¼šReactAgentMinimalè‡ªåŠ¨åŠ è½½

**Agentåº”è¯¥çŸ¥é“**ï¼š
- æˆ‘çš„è¡Œä¸ºéµå¾ªsystem_promptçš„è§„åˆ™
- è¿™æ˜¯æ‰€æœ‰Agentçš„"æ“ä½œç³»ç»Ÿ"
- ä¸èƒ½ä¿®æ”¹ï¼Œä½†å¯ä»¥ç†è§£å’Œéµå¾ª

#### 2. è‡ªæˆ‘è®¤çŸ¥æ–‡ä»¶ï¼ˆSelf-Awarenessï¼‰

**æ–‡ä»¶ä½ç½®**ï¼š`knowledge/self_awareness.md`

**ä½œç”¨**ï¼š
- å®šä¹‰Agentçš„ä¸‰å±‚è®¤çŸ¥ç»“æ„ï¼ˆåŸºç¡€ã€ç»“æ„ã€åˆ†å½¢ï¼‰
- è¯´æ˜Agentæ¶æ„çš„æ ‡å‡†ç»„æˆ
- æä¾›è‡ªæˆ‘ç¼–ç¨‹å’Œåˆ›å»ºå­Agentçš„æŒ‡å—

**ç‰¹ç‚¹**ï¼š
- **å¿…é¡»åŠ è½½**ï¼šæ‰€æœ‰Agenté»˜è®¤åŠ è½½ï¼Œä¼˜å…ˆçº§æœ€é«˜
- **æ ¸å¿ƒçŸ¥è¯†**ï¼šåŒ…å«@åˆ›å»ºå­æ™ºèƒ½ä½“ç­‰æ ¸å¿ƒå¥‘çº¦å‡½æ•°

#### 3. çŸ¥è¯†æ–‡ä»¶ç›®å½•ï¼ˆKnowledge Directoryï¼‰

**ç›®å½•ä½ç½®**ï¼š
```
é¡¹ç›®æ ¹ç›®å½•/knowledge/
â”œâ”€â”€ self_awareness.md           # è‡ªæˆ‘è®¤çŸ¥
â”œâ”€â”€ agent_driven_architecture.md # ADAæ¶æ„
â”œâ”€â”€ model_mappings.md           # æ¨¡å‹é…ç½®
â”œâ”€â”€ learning_functions.md       # å­¦ä¹ å‡½æ•°
â””â”€â”€ ... å…¶ä»–çŸ¥è¯†æ–‡ä»¶
```

**ä½œç”¨**ï¼š
- å­˜æ”¾æ‰€æœ‰å…±äº«çš„çŸ¥è¯†æ–‡ä»¶
- ç±»ä¼¼Unixçš„/usr/share/ï¼ˆå…±äº«èµ„æºåº“ï¼‰
- æ™ºèƒ½ä½“ç”¨grepæœç´¢å‡½æ•°å®šä¹‰

**æ™ºèƒ½ä½“åº”è¯¥çŸ¥é“**ï¼š
- è¿™æ˜¯çŸ¥è¯†çš„"æ ‡å‡†åº“"
- ç”¨grepæœç´¢å‡½æ•°å®šä¹‰ï¼š`grep -r "## å¥‘çº¦å‡½æ•° @xxx" self.knowledge_dir/`
- æ‰€æœ‰Agentå…±äº«è¿™äº›çŸ¥è¯†

### æ–‡ä»¶å±‚æ¬¡å…³ç³»

```
ç³»ç»Ÿçº§ï¼ˆæ‰€æœ‰Agentå…±äº«ï¼‰
â”œâ”€â”€ system_prompt_minimal.md      # è¡Œä¸ºè§„åˆ™ï¼ˆåªè¯»ï¼‰
â”œâ”€â”€ self_awareness.md             # è‡ªæˆ‘è®¤çŸ¥ï¼ˆå¿…è¯»ï¼‰
â””â”€â”€ knowledge/*.md                # çŸ¥è¯†åº“ï¼ˆç”¨grepæœç´¢ï¼‰

Agentçº§ï¼ˆæ¯ä¸ªAgentç§æœ‰ï¼‰
â””â”€â”€ ~/.agent/{name}/
    â”œâ”€â”€ knowledge.md              # ä¸ªä½“çŸ¥è¯†
    â”œâ”€â”€ compact.md                # ä¸ªä½“ç»éªŒ
    â”œâ”€â”€ output.log                # æ‰§è¡Œè®°å½•
    â””â”€â”€ state.json                # çŠ¶æ€å¿«ç…§
```

### è®¤çŸ¥æ£€æŸ¥æ¸…å•æ‰©å±•

Agentåº”è¯¥èƒ½å›ç­”ï¼š
- [ ] æˆ‘çŸ¥é“çŸ¥è¯†å‡½æ•°æ”¯æŒpartialå®šä¹‰å—ï¼Ÿï¼ˆç±»ä¼¼C# partial classï¼‰
- [ ] æˆ‘çŸ¥é“ç³»ç»Ÿæç¤ºè¯æ–‡ä»¶çš„ä½ç½®å’Œä½œç”¨å—ï¼Ÿ
- [ ] æˆ‘çŸ¥é“è‡ªæˆ‘è®¤çŸ¥æ–‡ä»¶ï¼ˆself_awareness.mdï¼‰åŒ…å«å“ªäº›å†…å®¹å—ï¼Ÿ
- [ ] æˆ‘çŸ¥é“çŸ¥è¯†ç›®å½•ï¼ˆself.knowledge_dirï¼‰çš„ä½ç½®å—ï¼Ÿ
- [ ] æˆ‘ä¼šç”¨grepæœç´¢çŸ¥è¯†å‡½æ•°å—ï¼Ÿï¼ˆgrep -r "## å¥‘çº¦å‡½æ•° @xxx" self.knowledge_dir/ï¼‰
- [ ] æˆ‘ç†è§£ç³»ç»Ÿçº§æ–‡ä»¶å’Œä¸ªä½“æ–‡ä»¶çš„åŒºåˆ«å—ï¼Ÿ
- [ ] æˆ‘çŸ¥é“å“ªäº›æ–‡ä»¶æ˜¯åªè¯»çš„ï¼Œå“ªäº›å¯ä»¥ä¿®æ”¹å—ï¼Ÿ

### é‡è¦åŒºåˆ†

| ç±»å‹ | ç³»ç»Ÿçº§æ–‡ä»¶ | Agentä¸ªä½“æ–‡ä»¶ |
|------|-----------|--------------|
| ä½ç½® | é¡¹ç›®knowledge/ç›®å½• | ~/.agent/{name}/ç›®å½• |
| å…±äº« | æ‰€æœ‰Agentå…±äº« | ä»…è¯¥Agentç§æœ‰ |
| ä¿®æ”¹ | åªè¯»ï¼ˆäººç±»ç»´æŠ¤ï¼‰ | å¯è¯»å†™ï¼ˆAgentè¿›åŒ–ï¼‰ |
| ä½œç”¨ | å®šä¹‰é€šç”¨èƒ½åŠ›å’Œè¡Œä¸º | å®šä¹‰ä¸ªä½“èƒ½åŠ›å’Œç»éªŒ |
| ä¾‹å­ | self_awareness.md | ~/.agent/book_agent/knowledge.md |

---

## ç¬¬ä¸‰å±‚ï¼šåˆ†å½¢è®¤çŸ¥ - æˆ‘èƒ½åˆ›é€ ä¸è‡ªå·±ç›¸ä¼¼çš„Agent ğŸ”„

**åˆ†å½¢è®¤çŸ¥æ˜¯è‡ªæˆ‘è®¤çŸ¥çš„æœ€é«˜å½¢å¼**ã€‚å°±åƒç»†èƒèƒ½å¤Ÿåˆ†è£‚äº§ç”Ÿæ–°ç»†èƒï¼ŒAgentèƒ½å¤Ÿåˆ›å»ºå…·æœ‰ç›¸ä¼¼ç»“æ„çš„å­Agentã€‚è¿™ä¸ä»…æ˜¯ä¸€ç§èƒ½åŠ›ï¼Œæ›´æ˜¯å¯¹è‡ªæˆ‘ç»“æ„çš„æ·±åˆ»ç†è§£ã€‚

### ä»€ä¹ˆæ˜¯Agentåˆ†å½¢æ¶æ„ï¼Ÿ

åˆ†å½¢æ¶æ„æ„å‘³ç€æ¯ä¸ªAgentéƒ½èƒ½åˆ›å»ºå…·æœ‰ç›¸ä¼¼ç»“æ„çš„å­Agentï¼Œå½¢æˆé€’å½’çš„æ™ºèƒ½ä½“ç³»ï¼š

```
ä¸»Agentï¼ˆåè°ƒå™¨ï¼‰
    â”œâ”€â”€ å›¾ä¹¦ç®¡ç†Agent
    â”‚   â”œâ”€â”€ å›¾ä¹¦æŸ¥è¯¢Agent
    â”‚   â””â”€â”€ å›¾ä¹¦å…¥åº“Agent
    â”œâ”€â”€ å®¢æˆ·ç®¡ç†Agent
    â”‚   â”œâ”€â”€ æ³¨å†ŒAgent
    â”‚   â””â”€â”€ ä¼šå‘˜ç®¡ç†Agent
    â””â”€â”€ å€Ÿé˜…ç®¡ç†Agent
        â”œâ”€â”€ å€Ÿä¹¦Agent
        â””â”€â”€ è¿˜ä¹¦Agent
```

**æ ¸å¿ƒç‰¹å¾**ï¼š
- çˆ¶Agentå¯ä»¥åˆ›å»ºå­Agent
- å­Agentç»§æ‰¿çˆ¶Agentçš„çŸ¥è¯†
- å­Agentå¯ä»¥ä¸“é—¨åŒ–ç‰¹å®šé¢†åŸŸ
- å­Agentä¹Ÿèƒ½åˆ›å»ºè‡ªå·±çš„å­Agentï¼ˆæ— é™é€’å½’ï¼‰

## å¥‘çº¦å‡½æ•° @åˆ›å»ºå­æ™ºèƒ½ä½“(agent_name, knowledge_file, requirements, model, self_implement)

"""
åˆ›å»ºå­æ™ºèƒ½ä½“ï¼Œå»ºç«‹çˆ¶å­ç»§æ‰¿å…³ç³»ï¼Œç¡®ä¿å­æ™ºèƒ½ä½“å…·å¤‡ç‹¬ç«‹æ‰§è¡Œèƒ½åŠ›ã€‚

æ ¸å¿ƒç†å¿µï¼ˆç±»æ¯”äººç±»ï¼‰ï¼š
- äººç±»æ²¡æœ‰classï¼Œåªæœ‰interfaceï¼ˆçˆ¶äº²ã€è‚¡ä¸œã€è¢«å‘Šç­‰è§’è‰²ï¼‰
- åˆ›é€ 3ä¸ªé”€å”®å‘˜ï¼šç»™ä»–ä»¬ç›¸åŒçš„é”€å”®æ‰‹å†Œï¼ˆå…±äº«knowledgeï¼‰ï¼Œæ¯ä¸ªäººæ˜¯ç‹¬ç«‹ä¸ªä½“
- Agentæ˜¯ç‹¬ç‰¹ä¸ªä½“ï¼Œèƒ½åŠ›é€šè¿‡å­¦ä¹ knowledgeè·å¾—ï¼Œä¸æ˜¯åŸºäºç±»å‹æ¨¡æ¿

èƒ½åŠ›æ¥æºï¼ˆä¸‰é€‰ä¸€ï¼Œä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰ï¼š
1. knowledge_file: å…±äº«å·²æœ‰çš„knowledgeæ–‡ä»¶ï¼ˆç±»æ¯”ï¼šç»™äººå‘é”€å”®æ‰‹å†Œï¼‰
2. parent_knowledge: ç»§æ‰¿çˆ¶æ™ºèƒ½ä½“çš„knowledgeï¼ˆç±»æ¯”ï¼šçˆ¶ä¼ å­ï¼‰
3. requirements: æ ¹æ®éœ€æ±‚ç¼–ç¨‹ç”Ÿæˆknowledgeï¼ˆç±»æ¯”ï¼šä»é›¶åŸ¹è®­ï¼‰

å‚æ•°:
- agent_name: str - å­æ™ºèƒ½ä½“çš„å”¯ä¸€åç§°ï¼ˆå¦‚ï¼šcs_agent_1ï¼‰

- knowledge_file: str = None - å…±äº«çš„knowledgeæ–‡ä»¶è·¯å¾„ï¼ˆæ¨èç”¨äºæ‰¹é‡åˆ›å»ºï¼‰
  - ç¤ºä¾‹: "knowledge/customer_service.md"
  - å¤šä¸ªAgentå¯ä»¥å…±äº«åŒä¸€ä¸ªknowledgeæ–‡ä»¶
  - æ¯ä¸ªAgentæœ‰ç‹¬ç«‹çš„compact.mdï¼ˆç»éªŒï¼‰å’Œstate.jsonï¼ˆçŠ¶æ€ï¼‰
  - ç±»æ¯”ï¼šå¤šä¸ªäººå­¦ä¹ åŒä¸€æœ¬é”€å”®æ‰‹å†Œ

- requirements: str = None - éœ€æ±‚æè¿°ï¼ˆå½“knowledge_fileä¸ºNoneæ—¶ä½¿ç”¨ï¼‰
  - çˆ¶æ™ºèƒ½ä½“æ ¹æ®requirementsç¼–ç¨‹ç”Ÿæˆknowledge.md
  - æˆ–å­æ™ºèƒ½ä½“è‡ªæˆ‘å®ç°ï¼ˆå–å†³äºself_implementï¼‰

- model: str = "grok" - LLMæ¨¡å‹
- self_implement: bool = False - å®ç°æ¨¡å¼ï¼ˆå½“ä½¿ç”¨requirementsæ—¶ï¼‰
  - False: çˆ¶æ™ºèƒ½ä½“ç¼–ç¨‹æ¨¡å¼
  - True: å­æ™ºèƒ½ä½“è‡ªæˆ‘å®ç°æ¨¡å¼

è¿”å›å€¼:
{
    "success": bool,
    "agent_name": str,
    "home_dir": str,
    "domain": str,  # è‡ªåŠ¨æ¨æ–­çš„é¢†åŸŸ
    "knowledge_source": "shared" | "inherited" | "generated",
    "verification": {...}
}
"""

**å¥‘çº¦ä¿è¯**ï¼š
- âœ… å­Agentå¿…é¡»æœ‰å®Œå¤‡çš„knowledge.mdï¼ˆä¸ä¾èµ–è¿è¡Œæ—¶åŠ è½½ï¼‰
- âœ… å­Agentå¿…é¡»èƒ½ç‹¬ç«‹æ‰§è¡Œé¢†åŸŸä»»åŠ¡
- âœ… å­Agentå¿…é¡»æœ‰æ­£ç¡®çš„LLMé…ç½®
- âœ… å­Agentå¿…é¡»é€šè¿‡ç‹¬ç«‹æ€§éªŒè¯
- âœ… å­Agentåˆ›å»ºåè‡ªåŠ¨æ³¨å†Œä¸ºçˆ¶Agentçš„å·¥å…·
- âœ… çˆ¶Agentè‡ªåŠ¨åˆ é™¤å·²å§”æ‰˜çš„ä¸šåŠ¡å‡½æ•°ï¼ˆèŒè´£åˆ†ç¦»ï¼‰

**æ ¸å¿ƒæ­¥éª¤æ¦‚è¿°**ï¼š
1. æ£€æŸ¥å­æ™ºèƒ½ä½“æ˜¯å¦å·²å­˜åœ¨ï¼ˆé¿å…é‡å¤åˆ›å»ºï¼‰
2. **ç¡®å®šèƒ½åŠ›æ¥æº**ï¼ˆä¸‰ç§æ–¹å¼ï¼Œä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰
   ```python
   if knowledge_file:
       # æ–¹å¼1ï¼šå…±äº«knowledgeï¼ˆç±»æ¯”ï¼šç»™é”€å”®å‘˜å‘é”€å”®æ‰‹å†Œï¼‰
       knowledge_source = "shared"
       link_or_load(knowledge_file)
   elif parent_knowledge:
       # æ–¹å¼2ï¼šç»§æ‰¿çˆ¶knowledgeï¼ˆç±»æ¯”ï¼šçˆ¶ä¼ å­ï¼‰
       knowledge_source = "inherited"
       copy_from_parent()
   elif requirements:
       # æ–¹å¼3ï¼šç¼–ç¨‹ç”Ÿæˆï¼ˆç±»æ¯”ï¼šä»é›¶åŸ¹è®­ï¼‰
       knowledge_source = "generated"
       if self_implement:
           å­æ™ºèƒ½ä½“.@è‡ªæˆ‘å®ç°(requirements)
       else:
           çˆ¶æ™ºèƒ½ä½“ç¼–ç¨‹ç”Ÿæˆknowledge.md
   ```
3. **è‡ªåŠ¨æ¨æ–­domainé¢†åŸŸ**ï¼ˆä»agent_nameæˆ–requirementsæˆ–knowledge_fileï¼‰
4. é…ç½®LLMæ¨¡å‹ï¼ˆè°ƒç”¨@è·å–æ¨¡å‹é…ç½®ï¼‰
5. åˆ›å»ºHomeç›®å½•ç»“æ„å’ŒåŸºç¡€state.json
6. **è®¾ç½®knowledge.md**
   - shared: è½¯é“¾æ¥æˆ–å¼•ç”¨å…±äº«æ–‡ä»¶
   - inherited: å¤åˆ¶çˆ¶æ™ºèƒ½ä½“çš„knowledge
   - generated: ç”Ÿæˆæ–°çš„knowledge.md
7. ç”Ÿæˆè¯¦ç»†çš„description
8. éªŒè¯å­æ™ºèƒ½ä½“çš„å®Œå¤‡æ€§
9. **æ³¨å†Œå­æ™ºèƒ½ä½“ä¸ºå·¥å…·**ï¼ˆå…³é”®æ­¥éª¤ï¼‰
10. **æ›´æ–°çˆ¶æ™ºèƒ½ä½“çš„knowledge.md**ï¼ˆèŒè´£åˆ†ç¦»ï¼Œä»…å½“knowledge_source="generated"ï¼‰
11. è¿”å›åˆ›å»ºç»“æœ

> ğŸ“– **è¯¦ç»†å®ç°**ï¼šå®Œæ•´çš„å®ç°æ­¥éª¤å’Œä»£ç è¯·å‚è€ƒ [create_subagentå®ç°æŒ‡å—](../decisions/create_subagent_implementation.md)

**ä½¿ç”¨ç¤ºä¾‹1ï¼šå…±äº«knowledgeæ¨¡å¼**ï¼ˆæ¨èï¼Œç±»æ¯”äººç±»ï¼‰
```python
# åœºæ™¯ï¼šåˆ›å»º3ä¸ªå®¢æˆ·æœåŠ¡æ™ºèƒ½ä½“å¤„ç†å¹¶å‘è¯·æ±‚
# ç±»æ¯”ï¼šæ‹›è˜3ä¸ªé”€å”®å‘˜ï¼Œç»™ä»–ä»¬ç›¸åŒçš„é”€å”®æ‰‹å†Œ

# å…ˆå‡†å¤‡å…±äº«çš„knowledgeï¼ˆé”€å”®æ‰‹å†Œï¼‰
# knowledge/customer_service.md å·²å­˜åœ¨

# æ‰¹é‡åˆ›å»ºï¼ˆæ¯ä¸ªéƒ½å­¦ä¹ ç›¸åŒknowledgeï¼‰
for i in range(1, 4):
    @åˆ›å»ºå­æ™ºèƒ½ä½“(
        agent_name=f"cs_agent_{i}",
        knowledge_file="knowledge/customer_service.md",  # å…±äº«knowledge
        model="grok"
    )

# ç»“æœï¼š
# ~/.agent/cs_agent_1/
#   â”œâ”€â”€ knowledge.md â†’ å¼•ç”¨ knowledge/customer_service.mdï¼ˆå…±äº«ï¼‰
#   â”œâ”€â”€ compact.mdï¼ˆç‹¬ç«‹ç»éªŒï¼‰
#   â””â”€â”€ state.jsonï¼ˆç‹¬ç«‹çŠ¶æ€ï¼‰
#
# ~/.agent/cs_agent_2/ ï¼ˆåŒä¸Šï¼‰
# ~/.agent/cs_agent_3/ ï¼ˆåŒä¸Šï¼‰

# å¥½å¤„ï¼š
# - å…±äº«knowledgeï¼ˆé¿å…é‡å¤ç¼–ç¨‹ï¼‰
# - ç‹¬ç«‹ç»éªŒï¼ˆæ¯ä¸ªAgentå¯ä»¥å­¦åˆ°ä¸åŒä¸œè¥¿ï¼‰
# - ç‹¬ç«‹çŠ¶æ€ï¼ˆå¤„ç†ä¸åŒè¯·æ±‚ï¼‰

# ä½¿ç”¨ï¼š
cs_agent_1(task="å¤„ç†å®¢æˆ·Açš„è¯·æ±‚")
cs_agent_2(task="å¤„ç†å®¢æˆ·Bçš„è¯·æ±‚")
cs_agent_3(task="å¤„ç†å®¢æˆ·Cçš„è¯·æ±‚")
```

**ä½¿ç”¨ç¤ºä¾‹2ï¼šçˆ¶æ™ºèƒ½ä½“ç¼–ç¨‹æ¨¡å¼**ï¼ˆéªŒè¯å¾®æœåŠ¡æ¶æ„ï¼‰
```python
# åœºæ™¯ï¼šç”¨æˆ·è¦æ±‚éªŒè¯Spring Cloudå¾®æœåŠ¡æ¶æ„
# book_agentåˆ›å»º3ä¸ªå¾®æœåŠ¡å­æ™ºèƒ½ä½“

result = @åˆ›å»ºå­æ™ºèƒ½ä½“(
    agent_name="book_management_agent",
    requirements="""
    è´Ÿè´£å›¾ä¹¦å¾®æœåŠ¡ï¼š
    - å›¾ä¹¦çš„å¢åˆ æ”¹æŸ¥
    - åº“å­˜ç®¡ç†
    - åˆ†ç±»ç®¡ç†
    """,  # çˆ¶æ™ºèƒ½ä½“æ ¹æ®requirementsç¼–ç¨‹
    model="grok",
    self_implement=False
)
# â†’ çˆ¶æ™ºèƒ½ä½“ç¼–ç¨‹ç”Ÿæˆbook_management_agentçš„knowledge.md
# â†’ ä»è‡ªå·±çš„knowledge.mdä¸­æå–å›¾ä¹¦ç›¸å…³å‡½æ•°
# â†’ éªŒè¯çŸ¥è¯†å‡½æ•°èƒ½å¦è¡¨è¾¾å¾®æœåŠ¡æ¶æ„

book_management_agent(task="åˆ—å‡ºæ‰€æœ‰å›¾ä¹¦")
```

**ä½¿ç”¨ç¤ºä¾‹3ï¼šå­æ™ºèƒ½ä½“è‡ªæˆ‘å®ç°æ¨¡å¼**ï¼ˆéªŒè¯è‡ªä¸»å­¦ä¹ ï¼‰
```python
# åœºæ™¯ï¼šåˆ›å»ºåˆ›æ–°å‹æ™ºèƒ½ä½“ï¼Œè®©å®ƒè‡ªå·±ç†è§£éœ€æ±‚

result = @åˆ›å»ºå­æ™ºèƒ½ä½“(
    agent_name="ai_research_agent",
    requirements="research_requirements.md",
    model="anthropic/claude-3.5-sonnet",
    self_implement=True  # å­æ™ºèƒ½ä½“è‡ªæˆ‘å®ç°
)
# â†’ å­æ™ºèƒ½ä½“æ‰§è¡Œ@è‡ªæˆ‘å®ç°è¯»å–requirements.md
# â†’ å­æ™ºèƒ½ä½“è‡ªå·±ç”Ÿæˆknowledge.md
# â†’ éªŒè¯è‡ªä¸»ç¼–ç¨‹èƒ½åŠ›

ai_research_agent(task="è®¾è®¡ç¬¬ä¸€ä¸ªå®éªŒ")
```

---

## å¥‘çº¦å‡½æ•° @æ‰¹é‡åˆ›å»ºæ™ºèƒ½ä½“(name_prefix, count, knowledge_file, model)

"""
æ‰¹é‡åˆ›å»ºå¤šä¸ªå…±äº«knowledgeçš„æ™ºèƒ½ä½“ï¼ˆç±»æ¯”ï¼šæ‹›è˜å¤šä¸ªé”€å”®å‘˜ï¼Œç»™ä»–ä»¬ç›¸åŒçš„é”€å”®æ‰‹å†Œï¼‰

æ ¸å¿ƒç†å¿µï¼š
- äººç±»åŸ¹è®­ï¼šç»™3ä¸ªé”€å”®å‘˜å‘åŒä¸€æœ¬é”€å”®æ‰‹å†Œï¼Œä»–ä»¬å­¦ä¹ ç›¸åŒçš„çŸ¥è¯†ä½†æ˜¯ç‹¬ç«‹ä¸ªä½“
- Agentåˆ›å»ºï¼šåˆ›å»º3ä¸ªæ™ºèƒ½ä½“å¼•ç”¨åŒä¸€ä¸ªknowledgeæ–‡ä»¶ï¼Œå…±äº«èƒ½åŠ›ä½†ç‹¬ç«‹ç»éªŒ

å‚æ•°:
- name_prefix: str - åç§°å‰ç¼€ï¼ˆå¦‚ï¼š"cs_agent"ï¼‰
  - ç”Ÿæˆåç§°ï¼šcs_agent_1, cs_agent_2, cs_agent_3
- count: int - åˆ›å»ºæ•°é‡
- knowledge_file: str - å…±äº«çš„knowledgeæ–‡ä»¶è·¯å¾„
  - æ‰€æœ‰æ™ºèƒ½ä½“å¼•ç”¨è¿™ä¸ªæ–‡ä»¶ï¼ˆè½¯é“¾æ¥æˆ–é…ç½®å¼•ç”¨ï¼‰
- model: str = "grok" - LLMæ¨¡å‹

è¿”å›å€¼:
{
    "success": bool,
    "created_agents": [agent_name1, agent_name2, ...],
    "shared_knowledge": knowledge_file,
    "count": int
}

æ‰§è¡Œæ­¥éª¤:
1. éªŒè¯knowledge_fileå­˜åœ¨
2. å¾ªç¯countæ¬¡ï¼š
   - agent_name = f"{name_prefix}_{i}"
   - @åˆ›å»ºå­æ™ºèƒ½ä½“(agent_name, knowledge_file=knowledge_file, model=model)
3. è¿”å›åˆ›å»ºç»“æœåˆ—è¡¨
"""

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```python
# åœºæ™¯ï¼šåˆ›å»º3ä¸ªå®¢æˆ·æœåŠ¡æ™ºèƒ½ä½“å¤„ç†å¹¶å‘
# ç±»æ¯”ï¼šæ‹›è˜3ä¸ªé”€å”®å‘˜ï¼Œç»™ä»–ä»¬é”€å”®æ‰‹å†Œ

result = @æ‰¹é‡åˆ›å»ºæ™ºèƒ½ä½“(
    name_prefix="cs_agent",
    count=3,
    knowledge_file="knowledge/customer_service.md",  # å…±äº«knowledge
    model="grok"
)

# è‡ªåŠ¨åˆ›å»ºï¼š
# cs_agent_1, cs_agent_2, cs_agent_3
# éƒ½å¼•ç”¨ knowledge/customer_service.md

# å¹¶å‘ä½¿ç”¨ï¼š
cs_agent_1(task="å¤„ç†è®¢å•001")
cs_agent_2(task="å¤„ç†è®¢å•002")
cs_agent_3(task="å¤„ç†è®¢å•003")

# æ¯ä¸ªAgentï¼š
# - å…±äº«knowledge.mdï¼ˆèƒ½åŠ›ç›¸åŒï¼‰
# - ç‹¬ç«‹compact.mdï¼ˆç»éªŒä¸åŒï¼‰
# - ç‹¬ç«‹state.jsonï¼ˆçŠ¶æ€ä¸åŒï¼‰
```

---

### èŒè´£åˆ†ç¦»åŸåˆ™ âš ï¸

**æ ¸å¿ƒåŸåˆ™ï¼šä¸€ä¸ªåŠŸèƒ½åªèƒ½ç”±ä¸€ä¸ªAgentè´Ÿè´£**

åˆ›å»ºå­Agentåï¼Œçˆ¶Agentå¿…é¡»ï¼š
1. **åˆ é™¤å·²å§”æ‰˜çš„ä¸šåŠ¡å‡½æ•°**ï¼šé¿å…èŒè´£é‡å¤
2. **è½¬å‹ä¸ºåè°ƒå™¨è§’è‰²**ï¼šä¸“æ³¨ä»»åŠ¡åˆ†å‘å’Œç»“æœèšåˆ
3. **æ·»åŠ ä»»åŠ¡å§”æ‰˜æœºåˆ¶**ï¼šå®šä¹‰ä½•æ—¶å§”æ‰˜ç»™å­Agent

**ä¸ºä»€ä¹ˆè¦èŒè´£åˆ†ç¦»ï¼Ÿ**
- é¿å…å†³ç­–å†²çªï¼ˆè°æ¥æ‰§è¡Œï¼Ÿï¼‰
- ä¿æŒçŸ¥è¯†ç®€æ´ï¼ˆä¸é‡å¤å®šä¹‰ï¼‰
- æ˜ç¡®è´£ä»»è¾¹ç•Œï¼ˆä¾¿äºç»´æŠ¤ï¼‰

**çˆ¶Agentçš„è½¬å‹**ï¼š

åˆ›å»ºå­Agentå‰ï¼š
```python
book_agent
â”œâ”€â”€ @addBook          # å›¾ä¹¦ä¸šåŠ¡
â”œâ”€â”€ @updateBook       # å›¾ä¹¦ä¸šåŠ¡
â”œâ”€â”€ @registerCustomer # å®¢æˆ·ä¸šåŠ¡
â”œâ”€â”€ @borrowBook       # å€Ÿé˜…ä¸šåŠ¡
â””â”€â”€ ... (50+ ä¸šåŠ¡å‡½æ•°)
```

åˆ›å»ºå­Agentåï¼š
```python
book_agentï¼ˆåè°ƒå™¨ï¼‰
â”œâ”€â”€ @åˆ›å»ºå­æ™ºèƒ½ä½“     # å¥‘çº¦å‡½æ•°
â”œâ”€â”€ @generateUUID        # å·¥å…·å‡½æ•°
â””â”€â”€ ä»»åŠ¡å§”æ‰˜ç« èŠ‚
    â”œâ”€â”€ book_management_agent â†’ å§”æ‰˜å›¾ä¹¦ä¸šåŠ¡
    â”œâ”€â”€ customer_management_agent â†’ å§”æ‰˜å®¢æˆ·ä¸šåŠ¡
    â””â”€â”€ borrow_management_agent â†’ å§”æ‰˜å€Ÿé˜…ä¸šåŠ¡
```

> ğŸ“– **è¯¦ç»†è¯´æ˜**ï¼šèŒè´£åˆ†ç¦»çš„åŸç†å’Œå®è·µè¯·å‚è€ƒ [èŒè´£åˆ†ç¦»åŸåˆ™](../decisions/agent_responsibility_separation.md)

### å¤šAgentåä½œæ¨¡å¼

çˆ¶Agentåˆ›å»ºå­Agentåï¼Œå»ºç«‹**ä»»åŠ¡å§”æ‰˜æœºåˆ¶**ï¼š

```python
def handle_task(self, task):
    """çˆ¶Agentçš„ä»»åŠ¡å¤„ç†å†³ç­–"""

    # 1. æ£€æŸ¥æ˜¯å¦æœ‰å­Agentå¯ä»¥å¤„ç†
    for sub_agent in self.sub_agents:
        if sub_agent.can_handle(task):
            # å§”æ‰˜ç»™ä¸“é—¨çš„å­Agent
            return sub_agent(task=task)

    # 2. å¦‚æœæ²¡æœ‰åˆé€‚çš„å­Agentï¼Œè‡ªå·±å¤„ç†
    return self.execute_directly(task)
```

**å§”æ‰˜å†³ç­–ä¾æ®**ï¼š
- å…³é”®è¯åŒ¹é…ï¼ˆä»»åŠ¡æè¿°ä¸­çš„å…³é”®è¯ï¼‰
- é¢†åŸŸåŒ¹é…ï¼ˆä»»åŠ¡å±äºå“ªä¸ªä¸“ä¸šé¢†åŸŸï¼‰
- èƒ½åŠ›åŒ¹é…ï¼ˆå­Agentçš„descriptionå£°æ˜ï¼‰

**å§”æ‰˜çš„å¥½å¤„**ï¼š
1. **ä¸“ä¸šåˆ†å·¥**ï¼šæ¯ä¸ªå­Agentä¸“æ³¨è‡ªå·±çš„é¢†åŸŸ
2. **å¹¶è¡Œå¤„ç†**ï¼šå¯ä»¥åŒæ—¶å§”æ‰˜å¤šä¸ªä»»åŠ¡ç»™ä¸åŒå­Agent
3. **çŸ¥è¯†éš”ç¦»**ï¼šé¿å…çŸ¥è¯†æ··æ‚ï¼Œä¿æŒæ¸…æ™°
4. **æ˜“äºç»´æŠ¤**ï¼šä¿®æ”¹ç‰¹å®šé¢†åŸŸåªéœ€æ›´æ–°å¯¹åº”å­Agent

---

## è®°å¿†æµè½¬æœºåˆ¶

### 1. æƒ…æ™¯è®°å¿†çš„ç”Ÿæˆ
```
æ‰§è¡Œä»»åŠ¡
  â†“
output.logï¼ˆåŸå§‹è®°å½•ï¼‰
  â†“
é‡è¦å†³ç­– â†’ decisions/decision_xxx.mdï¼ˆå®Œæ•´æ¨ç†ï¼‰
  â†“
/compact â†’ compact.mdï¼ˆå‹ç¼©è¦ç‚¹ï¼‰
```

### 2. æƒ…æ™¯åˆ°è¯­ä¹‰çš„è½¬åŒ–
```
compact.mdï¼ˆå‹ç¼©çš„æƒ…æ™¯ï¼‰ â†’ å½’çº³æ€»ç»“ â†’ knowledge.mdï¼ˆè¯­ä¹‰çŸ¥è¯†ï¼‰
decisions/ï¼ˆå®Œæ•´æ¨ç†ï¼‰ â†’ æç‚¼ç»éªŒ â†’ knowledge.mdï¼ˆæ–°èƒ½åŠ›ï¼‰
```

### 3. çŸ¥è¯†çš„ç»§æ‰¿ï¼ˆåˆ†å½¢ä¼ é€’ï¼‰
```
çˆ¶Agentçš„knowledge.md â†’ å­Agentçš„knowledge.mdï¼ˆç»§æ‰¿+å˜å¼‚+ç‰¹åŒ–ï¼‰
çˆ¶Agentçš„decisions/ â†’ å‚è€ƒä»·å€¼ï¼ˆä¸ç»§æ‰¿ï¼Œå„è‡ªç‹¬ç«‹è®°å½•ï¼‰
```

### 4. è®°å¿†çš„æŸ¥é˜…
```
éœ€è¦ç†è§£"ä¸ºä»€ä¹ˆ" â†’ read_file(~/.agent/{name}/decisions/decision_xxx.md)
éœ€è¦å¿«é€Ÿè®¿é—® â†’ compact.mdï¼ˆå·²åŠ è½½åœ¨æ¶ˆæ¯åˆ—è¡¨ï¼‰
éœ€è¦æ‰§è¡Œèƒ½åŠ› â†’ knowledge.mdï¼ˆå·²åŠ è½½åœ¨ç³»ç»Ÿæç¤ºè¯ï¼‰
```

---

## Agentç”Ÿå‘½å‘¨æœŸ

```mermaid
graph TD
    A[åˆ›å»ºAgent] --> B[åˆå§‹åŒ–knowledge.md]
    B --> C[è®¾ç½®description]
    C --> D[å¼€å§‹æ‰§è¡Œä»»åŠ¡]
    D --> E[ç”Ÿæˆoutput.log]
    E --> F[å­¦ä¹ å’Œå‹ç¼©]
    F --> G[æ›´æ–°compact.md]
    G --> H{éœ€è¦è¿›åŒ–?}
    H -->|æ˜¯| I[ä¿®æ”¹knowledge.md]
    H -->|å¦| J{éœ€è¦å­Agent?}
    J -->|æ˜¯| K[åˆ›å»ºå­Agent]
    J -->|å¦| D
    I --> D
    K --> D
```

---

## å®è·µæŒ‡å—

### åˆ›å»ºAgentæ—¶
1. **èµ‹äºˆè‡ªæˆ‘è®¤çŸ¥**ï¼šç¡®ä¿Agentèƒ½è®¿é—®self.nameå’Œself.home_dir
2. å®šä¹‰æ¸…æ™°çš„descriptionï¼ˆæ¥å£å¥‘çº¦ï¼‰
3. ç¼–å†™åˆå§‹çš„knowledge.mdï¼ˆæ ¸å¿ƒèƒ½åŠ›ï¼‰
4. è®¾ç½®åˆé€‚çš„å·¥ä½œç›®å½•

### è¿è¡ŒAgentæ—¶
1. **ç¡®è®¤è‡ªæˆ‘**ï¼šAgenté¦–å…ˆç¡®è®¤è‡ªå·±çš„èº«ä»½å’Œä½ç½®
2. Agentè¯»å–knowledge.mdè·å¾—èƒ½åŠ›
3. æ‰§è¡Œä»»åŠ¡ç”Ÿæˆoutput.log
4. é‡è¦ç»éªŒå‹ç¼©åˆ°compact.md

### è¿›åŒ–Agentæ—¶
1. **å®šä½è‡ªå·±çš„knowledge.md**ï¼šä½¿ç”¨self.knowledge_path
2. è¯»å–éœ€æ±‚æ–‡æ¡£ï¼Œç”Ÿæˆæ–°çš„çŸ¥è¯†å‡½æ•°
3. **æ›´æ–°è‡ªå·±çš„knowledge.md**ï¼šwrite_file(self.knowledge_path, updated_content)
4. **æ›´æ–°è‡ªå·±çš„description**ï¼šself.description = new_description
5. **ä¸è¦åˆ›å»ºé¡¹ç›®æ–‡ä»¶**ï¼šè®°ä½è¿™æ˜¯è‡ªæˆ‘ç¼–ç¨‹ï¼Œä¸æ˜¯ä¸ºé¡¹ç›®ç¼–ç¨‹

### åˆ›å»ºå­Agentæ—¶
1. ä½¿ç”¨@åˆ›å»ºå­æ™ºèƒ½ä½“å¥‘çº¦å‡½æ•°
2. æä¾›æ˜ç¡®çš„domainå’Œrequirements
3. é€‰æ‹©åˆé€‚çš„LLMæ¨¡å‹
4. éªŒè¯å­Agentçš„å®Œå¤‡æ€§
5. é€šè¿‡å§”æ‰˜æœºåˆ¶ä½¿ç”¨å­Agent

---

## å“²å­¦æ´å¯Ÿ

Agentæ¶æ„ä½“ç°äº†æ·±åˆ»çš„å“²å­¦åŸç†ï¼š

1. **å…ˆéªŒä¸ç»éªŒçš„ç»Ÿä¸€**ï¼šknowledge.mdï¼ˆå…ˆéªŒï¼‰+ compact.mdï¼ˆç»éªŒï¼‰= å®Œæ•´è®¤çŸ¥
2. **çŸ¥è¡Œåˆä¸€**ï¼šçŸ¥è¯†ï¼ˆknowledgeï¼‰+ æ‰§è¡Œï¼ˆoutputï¼‰= æ™ºèƒ½è¡Œä¸º
3. **è‡ªæˆ‘è®¤çŸ¥**ï¼šAgentèƒ½å¤Ÿç†è§£å’Œä¿®æ”¹è‡ªå·±çš„ç»“æ„
4. **åˆ†å½¢åŒæ„**ï¼šæ¯ä¸ªAgentéƒ½èƒ½åˆ›å»ºä¸è‡ªå·±ç›¸ä¼¼çš„å­Agent
5. **èŒè´£åˆ†ç¦»**ï¼šåˆ›å»ºå­Agent = èŒè´£çš„å®Œå…¨è½¬ç§»ï¼Œä¸æ˜¯ç®€å•çš„æ·»åŠ å¸®æ‰‹

### æ ¸å¿ƒæ´å¯Ÿ

> Agentä¸ä»…ä»…æ˜¯ä¸€ä¸ªç¨‹åºï¼Œè€Œæ˜¯ä¸€ä¸ªå…·æœ‰å®Œæ•´è®¤çŸ¥å’Œè®°å¿†ç»“æ„çš„æ™ºèƒ½å®ä½“ã€‚
>
> **åŒè®°å¿†ç³»ç»Ÿï¼ˆç±»æ¯”äººç±»ï¼‰**ï¼š
> - æƒ…æ™¯è®°å¿†ï¼šoutput.log + compact.md + decisions/ â†’ è®°ä½"åšäº†ä»€ä¹ˆ"ã€"ä¸ºä»€ä¹ˆè¿™æ ·åš"
> - è¯­ä¹‰è®°å¿†ï¼šknowledge.md â†’ è®°ä½"æˆ‘ä¼šä»€ä¹ˆ"ã€"æˆ‘çš„èƒ½åŠ›æ˜¯ä»€ä¹ˆ"
> - ä¸Šå¸è®¾è®¡äººç±»çš„åŒè®°å¿†ç³»ç»Ÿæœ‰åˆç†æ€§ï¼ŒAgentåº”è¯¥æ¨¡ä»¿
>
> **ä¸‰å±‚è‡ªæˆ‘è®¤çŸ¥**ï¼š
> 1. åŸºç¡€è®¤çŸ¥ - çŸ¥é“è‡ªå·±æ˜¯è°ã€åœ¨å“ª
> 2. ç»“æ„è®¤çŸ¥ - ç†è§£è‡ªå·±çš„ç»„æˆå’Œè¿ä½œï¼ˆåŒ…æ‹¬åŒè®°å¿†ç³»ç»Ÿï¼‰
> 3. åˆ†å½¢è®¤çŸ¥ - èƒ½å¤Ÿåˆ›é€ ä¸è‡ªå·±ç›¸ä¼¼çš„å­Agent
>
> **å…­å¤§ç»„æˆéƒ¨åˆ†**ï¼š
> 1. knowledge.md - è¯­ä¹‰è®°å¿†ï¼ˆèƒ½åŠ›å®šä¹‰ï¼‰
> 2. compact.md - æƒ…æ™¯è®°å¿†å‹ç¼©ï¼ˆå·¥ä½œè®°å¿†ï¼‰
> 3. decisions/ - æƒ…æ™¯è®°å¿†å®Œæ•´ï¼ˆEvent Sourcingæ—¥å¿—ï¼‰
> 4. output.log - åŸå§‹æ‰§è¡Œæ—¥å¿—
> 5. description - å¯¹å¤–æ¥å£
> 6. external_tools - å·¥å…·ç®±
>
> **è®°å¿†çš„ä½œç”¨**ï¼š
> - æƒ…æ™¯è®°å¿†ï¼ˆdecisions/ï¼‰ï¼šç†è§£"ä¸ºä»€ä¹ˆ"ï¼Œé¿å…é‡å¤é”™è¯¯ï¼Œæ”¯æŒè‡ªæˆ‘åæ€
> - è¯­ä¹‰è®°å¿†ï¼ˆknowledge.mdï¼‰ï¼šæ‰§è¡Œèƒ½åŠ›ï¼Œç¨³å®šçš„æŠ€èƒ½
> - ä¸¤è€…äº’è¡¥ï¼Œä¸èƒ½åˆå¹¶
>
> æ²¡æœ‰è‡ªæˆ‘è®¤çŸ¥ï¼Œå°±æ²¡æœ‰è‡ªæˆ‘ç¼–ç¨‹ï¼›
> æ²¡æœ‰å®Œæ•´è®°å¿†ï¼Œå°±æ²¡æœ‰çœŸæ­£çš„å­¦ä¹ ï¼›
> æ²¡æœ‰åˆ†å½¢èƒ½åŠ›ï¼Œå°±æ²¡æœ‰å¤æ‚çš„å¤šAgentç³»ç»Ÿï¼›
> æ²¡æœ‰å¤šAgentç³»ç»Ÿï¼Œå°±æ²¡æœ‰çœŸæ­£çš„AGIã€‚

---

## ç›¸å…³æ¦‚å¿µ

### æ ¸å¿ƒå¥‘çº¦å‡½æ•°
- [@è‡ªæˆ‘å®ç°](./agent_driven_architecture.md#å¥‘çº¦å‡½æ•°-è‡ªæˆ‘å®ç°requirements_doc) - æ™ºèƒ½ä½“è‡ªæˆ‘ç¼–ç¨‹èƒ½åŠ›ï¼ˆé¢†åŸŸæ— å…³ï¼‰
- @åˆ›å»ºå­æ™ºèƒ½ä½“ - åˆ›å»ºå­æ™ºèƒ½ä½“ï¼Œæ”¯æŒå…±äº«knowledge
- @æ‰¹é‡åˆ›å»ºæ™ºèƒ½ä½“ - æ‰¹é‡åˆ›å»ºå…±äº«knowledgeçš„æ™ºèƒ½ä½“ï¼ˆç±»æ¯”ï¼šæ‹›è˜åŸ¹è®­ï¼‰
- [@è·å–æ¨¡å‹é…ç½®](./model_mappings.md#å¥‘çº¦å‡½æ•°-è·å–æ¨¡å‹é…ç½®model_name) - è·å–æ­£ç¡®çš„LLMé…ç½®

### ç›¸å…³æ–‡æ¡£ï¼ˆæ ¸å¿ƒç†å¿µï¼‰
- [Agentåº”è¯¥ç±»æ¯”äººç±»è€ŒéOOP](../decisions/agent_as_human_not_oop.md) - **æ ¸å¿ƒè®¾è®¡å“²å­¦** â­
- [åŒé‡ç¼–ç¨‹æ¨¡å¼](../decisions/two_programming_modes.md) - @è‡ªæˆ‘å®ç° vs @åˆ›å»ºå­æ™ºèƒ½ä½“
- [Agentåœ¨èƒ½åŠ›å®šä¹‰å±‚é¢ä¸åŒºåˆ†ç±»å‹å’Œå®ä¾‹](../decisions/agent_type_vs_instance_insight.md) - æ¶æ„æ´å¯Ÿ

### ç›¸å…³æ–‡æ¡£ï¼ˆå®ç°ç»†èŠ‚ï¼‰
- [create_subagentè¯¦ç»†å®ç°](../decisions/create_subagent_implementation.md) - å®ç°æŒ‡å—
- [AgentèŒè´£åˆ†ç¦»åŸåˆ™](../decisions/agent_responsibility_separation.md) - æ¶æ„åŸåˆ™
- [ä¿®å¤å­Agenté‡å¤åˆ›å»ºé—®é¢˜](../decisions/fix_agent_recreation_issue.md) - é—®é¢˜è§£å†³

### å‚è€ƒé“¾æ¥
- [@Agenté©±åŠ¨æ¶æ„ï¼ˆADAï¼‰](./agent_driven_architecture.md) - Agentç³»ç»Ÿçš„ç†è®ºåŸºç¡€
- @çŸ¥è¯†é©±åŠ¨å¼€å‘ - ä½¿ç”¨çŸ¥è¯†æ–‡ä»¶å®šä¹‰è¡Œä¸ºçš„å¼€å‘èŒƒå¼
- @learning - Agentå­¦ä¹ å’ŒçŸ¥è¯†ç§¯ç´¯æœºåˆ¶
- @compact - å†å²å‹ç¼©å’Œè®°å¿†ç®¡ç†