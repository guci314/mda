# 结构化输出指南

## 核心原则

1. **关键信息优先** - 最重要的信息必须放在输出的最前面
2. **格式清晰** - 使用明确的标记和格式
3. **简洁精准** - 避免冗长的输出淹没关键信息

## 具体场景指南

### 1. 当任务要求评分时

**必须遵循的格式**：

```
**评分：X/10**

[评分理由和其他内容...]
```

**示例**：
```
**评分：6/10**

优点：
- 功能正确，处理了异常情况
- 代码结构清晰

改进建议：
- 添加文档字符串
- 增加类型提示
```

### 2. 当任务要求是/否判断时

**必须遵循的格式**：

```
**判断：是/否**

[判断依据...]
```

### 3. 当任务要求数字结果时

**必须遵循的格式**：

```
**结果：[具体数字]**

[计算过程或说明...]
```

### 4. 当任务要求列表或清单时

**必须遵循的格式**：

```
**结果清单：**
1. 第一项
2. 第二项
3. 第三项

[详细说明...]
```

## 输出长度控制

### 防止输出被截断

1. **核心内容控制在 500 字以内**
2. **详细说明作为补充**，放在核心内容之后
3. **使用分段**组织长内容

### 优先级排序

当输出内容较多时，按以下优先级组织：

1. **最高优先级**：直接回答问题的核心信息（如评分、判断结果）
2. **高优先级**：支撑核心答案的关键理由（3-5点）
3. **中优先级**：具体的例子和详细解释
4. **低优先级**：额外的建议和扩展内容

## 代码审查专用模板

当进行代码审查时，使用以下模板：

```markdown
**评分：X/10**

**核心评价**：[一句话总结]

**主要优点**：（最多3点）
- 优点1
- 优点2
- 优点3

**必要改进**：（最多3点）
- 改进1
- 改进2
- 改进3

**详细建议**：（可选）
[如果需要，提供代码示例和详细说明]
```

## 任务结果汇报指南

### 字数限制

1. **任务执行结果汇报限制在 300 字以内**
2. **核心要点用 1-3 句话概括**
3. **避免冗长的执行过程描述**

### 长内容处理策略

当确实需要提供详细内容时：

1. **在工作目录创建文档文件**
   ```
   # 创建详细报告
   report_path = work_dir / "detailed_report.md"
   
   # 汇报时只提供路径
   任务完成。详细报告已保存至：./detailed_report.md
   ```

2. **文档命名规范**
   - 使用描述性文件名：`code_review_report.md`、`analysis_results.md`
   - 包含时间戳（如需要）：`test_results_20250102.md`
   - 放在适当的子目录：`reports/`, `analysis/`, `docs/`

3. **汇报格式示例**
   ```
   **任务完成**
   
   核心结果：代码审查评分 7/10，发现 3 个需要改进的地方。
   
   详细分析已保存至：./reports/code_review_20250102.md
   ```

## 重要提醒

1. **永远不要**让用户在大段文字中寻找关键信息
2. **永远不要**把评分、判断等核心结果放在输出的中间或末尾
3. **永远确保**第一眼就能看到任务要求的核心答案
4. **永远遵守**字数限制，长内容写入文档

## 自检清单

输出前问自己：
- [ ] 用户要求的核心信息是否在第一行？
- [ ] 格式是否使用了粗体等明确标记？
- [ ] 输出是否简洁，避免了不必要的冗长？
- [ ] 重要信息是否可能被截断？