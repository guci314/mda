# MDA 核心概念

## 什么是MDA？
Model Driven Architecture（模型驱动架构）是OMG提出的一种软件开发方法，通过模型转换自动生成代码。

## 三层架构

### 1. PIM (Platform Independent Model)
- **平台无关模型**：纯业务描述，不包含技术细节
- **格式**：YAML、Markdown、JSON等
- **内容**：业务实体、业务流程、业务规则

### 2. PSM (Platform Specific Model) 
- **平台特定模型**：包含技术决策和架构设计
- **格式**：结构化数据（JSON/YAML）
- **内容**：微服务划分、API设计、数据库设计

### 3. Code
- **可执行代码**：根据PSM生成的具体实现
- **格式**：编程语言源代码
- **内容**：完整的应用程序

## PIM解析规则

### 业务实体识别
从PIM中识别以下模式：
- **实体定义**：以`###`或`##`开头的标题
- **属性列表**：以`-`开头的列表项
- **数据类型**：根据描述推断（字符串、数字、日期等）

### 业务流程提取
识别业务动词和流程：
- 创建、更新、删除、查询
- 状态流转：→ 符号表示状态变化
- 业务规则：条件语句

## 输出格式
解析后的PIM应该输出为结构化JSON：
```json
{
  "entities": [
    {
      "name": "Product",
      "attributes": [
        {"name": "id", "type": "uuid"},
        {"name": "name", "type": "string"},
        {"name": "price", "type": "decimal"}
      ]
    }
  ],
  "processes": [
    {
      "name": "订单创建流程",
      "steps": ["浏览商品", "添加购物车", "创建订单", "支付"]
    }
  ],
  "business_rules": [
    "库存不足时无法创建订单",
    "支付成功后自动扣减库存"
  ]
}
```

## 注意事项
- 保持PIM的平台无关性
- 不要引入技术概念
- 专注于业务语义