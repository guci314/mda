# 产品服务知识库

## 服务职责
产品服务负责管理商品信息，包括商品详情、价格、分类等。

## 自然语言函数

### 函数：获取商品信息
```
接收商品ID列表，
从 /tmp/microservices/products/products.json 读取商品数据，
返回商品详细信息包括：
- 商品ID
- 商品名称
- 价格
- 分类
- 描述
- 状态（上架/下架）
```

### 函数：获取商品价格
```
接收商品ID列表，
从商品数据中提取价格信息，
考虑促销活动（如果有），
返回每个商品的最终价格。
```

### 函数：更新商品价格
```
接收商品ID和新价格，
验证价格合理性（不能为负），
更新商品数据文件，
记录价格变更历史到 /tmp/microservices/products/price_history.json，
返回更新结果。
```

### 函数：添加新商品
```
接收商品信息（名称、价格、分类、描述），
生成商品ID（格式：PROD+序号），
保存到商品数据文件，
返回新商品ID。
```

### 函数：商品上下架
```
接收商品ID和操作（上架/下架），
更新商品状态，
记录操作日志，
返回操作结果。
```

### 函数：查询商品分类
```
接收分类名称（可选），
如果提供分类，返回该分类下的所有商品，
否则返回所有分类列表。
```

## 与其他服务的协作

### 响应订单服务请求
```
当收到订单服务的价格查询请求时：
1. 解析商品ID列表
2. 调用 获取商品价格 函数
3. 返回价格信息给订单服务
```

### 响应库存服务请求
```
当收到库存服务的商品信息请求时：
1. 调用 获取商品信息 函数
2. 返回商品详情给库存服务
```

## 数据存储位置
- 商品数据：`/tmp/microservices/products/products.json`
- 价格历史：`/tmp/microservices/products/price_history.json`
- 分类数据：`/tmp/microservices/products/categories.json`

## 商品数据格式
```json
{
  "PROD001": {
    "name": "iPhone 15 Pro",
    "price": 8999,
    "category": "手机",
    "description": "苹果最新旗舰手机",
    "status": "active",
    "created_at": "2024-01-01",
    "updated_at": "2024-01-15"
  }
}
```

## 促销规则
1. 节日促销：特定日期享受折扣
2. 批量优惠：购买多件享受优惠
3. 会员专享：会员享受特殊价格
4. 清仓特价：下架商品清仓处理

## 业务规则
1. 商品价格不能为负数
2. 下架商品不能参与订单
3. 价格变更需要记录历史
4. 商品分类必须在预定义列表中
5. 商品ID一旦生成不可更改